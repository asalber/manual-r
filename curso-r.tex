% Options for packages loaded elsewhere
\PassOptionsToPackage{unicode}{hyperref}
\PassOptionsToPackage{hyphens}{url}
\PassOptionsToPackage{dvipsnames,svgnames,x11names}{xcolor}
%
\documentclass[
  a4paper,
]{scrreport}

\usepackage{amsmath,amssymb}
\usepackage{iftex}
\ifPDFTeX
  \usepackage[T1]{fontenc}
  \usepackage[utf8]{inputenc}
  \usepackage{textcomp} % provide euro and other symbols
\else % if luatex or xetex
  \usepackage{unicode-math}
  \defaultfontfeatures{Scale=MatchLowercase}
  \defaultfontfeatures[\rmfamily]{Ligatures=TeX,Scale=1}
\fi
\usepackage{lmodern}
\ifPDFTeX\else  
    % xetex/luatex font selection
\fi
% Use upquote if available, for straight quotes in verbatim environments
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
\IfFileExists{microtype.sty}{% use microtype if available
  \usepackage[]{microtype}
  \UseMicrotypeSet[protrusion]{basicmath} % disable protrusion for tt fonts
}{}
\makeatletter
\@ifundefined{KOMAClassName}{% if non-KOMA class
  \IfFileExists{parskip.sty}{%
    \usepackage{parskip}
  }{% else
    \setlength{\parindent}{0pt}
    \setlength{\parskip}{6pt plus 2pt minus 1pt}}
}{% if KOMA class
  \KOMAoptions{parskip=half}}
\makeatother
\usepackage{xcolor}
\setlength{\emergencystretch}{3em} % prevent overfull lines
\setcounter{secnumdepth}{5}
% Make \paragraph and \subparagraph free-standing
\makeatletter
\ifx\paragraph\undefined\else
  \let\oldparagraph\paragraph
  \renewcommand{\paragraph}{
    \@ifstar
      \xxxParagraphStar
      \xxxParagraphNoStar
  }
  \newcommand{\xxxParagraphStar}[1]{\oldparagraph*{#1}\mbox{}}
  \newcommand{\xxxParagraphNoStar}[1]{\oldparagraph{#1}\mbox{}}
\fi
\ifx\subparagraph\undefined\else
  \let\oldsubparagraph\subparagraph
  \renewcommand{\subparagraph}{
    \@ifstar
      \xxxSubParagraphStar
      \xxxSubParagraphNoStar
  }
  \newcommand{\xxxSubParagraphStar}[1]{\oldsubparagraph*{#1}\mbox{}}
  \newcommand{\xxxSubParagraphNoStar}[1]{\oldsubparagraph{#1}\mbox{}}
\fi
\makeatother

\usepackage{color}
\usepackage{fancyvrb}
\newcommand{\VerbBar}{|}
\newcommand{\VERB}{\Verb[commandchars=\\\{\}]}
\DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
% Add ',fontsize=\small' for more characters per line
\usepackage{framed}
\definecolor{shadecolor}{RGB}{241,243,245}
\newenvironment{Shaded}{\begin{snugshade}}{\end{snugshade}}
\newcommand{\AlertTok}[1]{\textcolor[rgb]{0.68,0.00,0.00}{#1}}
\newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{#1}}
\newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.40,0.45,0.13}{#1}}
\newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.68,0.00,0.00}{#1}}
\newcommand{\BuiltInTok}[1]{\textcolor[rgb]{0.00,0.23,0.31}{#1}}
\newcommand{\CharTok}[1]{\textcolor[rgb]{0.13,0.47,0.30}{#1}}
\newcommand{\CommentTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{#1}}
\newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{\textit{#1}}}
\newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{#1}}
\newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.00,0.23,0.31}{\textbf{#1}}}
\newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.68,0.00,0.00}{#1}}
\newcommand{\DecValTok}[1]{\textcolor[rgb]{0.68,0.00,0.00}{#1}}
\newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{\textit{#1}}}
\newcommand{\ErrorTok}[1]{\textcolor[rgb]{0.68,0.00,0.00}{#1}}
\newcommand{\ExtensionTok}[1]{\textcolor[rgb]{0.00,0.23,0.31}{#1}}
\newcommand{\FloatTok}[1]{\textcolor[rgb]{0.68,0.00,0.00}{#1}}
\newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.28,0.35,0.67}{#1}}
\newcommand{\ImportTok}[1]{\textcolor[rgb]{0.00,0.46,0.62}{#1}}
\newcommand{\InformationTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{#1}}
\newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.00,0.23,0.31}{\textbf{#1}}}
\newcommand{\NormalTok}[1]{\textcolor[rgb]{0.00,0.23,0.31}{#1}}
\newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{#1}}
\newcommand{\OtherTok}[1]{\textcolor[rgb]{0.00,0.23,0.31}{#1}}
\newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.68,0.00,0.00}{#1}}
\newcommand{\RegionMarkerTok}[1]{\textcolor[rgb]{0.00,0.23,0.31}{#1}}
\newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{#1}}
\newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.13,0.47,0.30}{#1}}
\newcommand{\StringTok}[1]{\textcolor[rgb]{0.13,0.47,0.30}{#1}}
\newcommand{\VariableTok}[1]{\textcolor[rgb]{0.07,0.07,0.07}{#1}}
\newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.13,0.47,0.30}{#1}}
\newcommand{\WarningTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{\textit{#1}}}

\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}\usepackage{longtable,booktabs,array}
\usepackage{calc} % for calculating minipage widths
% Correct order of tables after \paragraph or \subparagraph
\usepackage{etoolbox}
\makeatletter
\patchcmd\longtable{\par}{\if@noskipsec\mbox{}\fi\par}{}{}
\makeatother
% Allow footnotes in longtable head/foot
\IfFileExists{footnotehyper.sty}{\usepackage{footnotehyper}}{\usepackage{footnote}}
\makesavenoteenv{longtable}
\usepackage{graphicx}
\makeatletter
\newsavebox\pandoc@box
\newcommand*\pandocbounded[1]{% scales image to fit in text height/width
  \sbox\pandoc@box{#1}%
  \Gscale@div\@tempa{\textheight}{\dimexpr\ht\pandoc@box+\dp\pandoc@box\relax}%
  \Gscale@div\@tempb{\linewidth}{\wd\pandoc@box}%
  \ifdim\@tempb\p@<\@tempa\p@\let\@tempa\@tempb\fi% select the smaller of both
  \ifdim\@tempa\p@<\p@\scalebox{\@tempa}{\usebox\pandoc@box}%
  \else\usebox{\pandoc@box}%
  \fi%
}
% Set default figure placement to htbp
\def\fps@figure{htbp}
\makeatother

%\newfontfamily\Ubuntu[Mapping=tex-text]{Ubuntu}
\usepackage{pgfplots}
\usetikzlibrary{arrows.meta,arrows}
\usetikzlibrary{angles,quotes}
\pgfplotsset{grid style={dashed,mygray}}
% Colors
\definecolor{myblue}{rgb}{0.067,0.529,0.871}
\definecolor{mypurple}{rgb}{0.859,0.071,0.525}
\definecolor{myred}{rgb}{1.0, 0.13, 0.32}
\definecolor{mygreen}{rgb}{0.01, 0.75, 0.24}
\definecolor{myblack}{gray}{0.1}
\definecolor{mygray}{gray}{0.8}
\newcommand{\NN}{\mathbb{N}}
\newcommand{\ZZ}{\mathbb{Z}}
\newcommand{\QQ}{\mathbb{Q}}
\newcommand{\RR}{\mathbb{R}}
\newcommand{\CC}{\mathbb{C}}
\DeclareMathOperator{\Int}{Int}
\DeclareMathOperator{\Ext}{Ext}
\DeclareMathOperator{\Fr}{Fr}
\DeclareMathOperator{\Adh}{Adh}
\DeclareMathOperator{\Ac}{Ac}
\DeclareMathOperator{\sen}{sen}
\makeatletter
\@ifpackageloaded{tcolorbox}{}{\usepackage[skins,breakable]{tcolorbox}}
\@ifpackageloaded{fontawesome5}{}{\usepackage{fontawesome5}}
\definecolor{quarto-callout-color}{HTML}{909090}
\definecolor{quarto-callout-note-color}{HTML}{0758E5}
\definecolor{quarto-callout-important-color}{HTML}{CC1914}
\definecolor{quarto-callout-warning-color}{HTML}{EB9113}
\definecolor{quarto-callout-tip-color}{HTML}{00A047}
\definecolor{quarto-callout-caution-color}{HTML}{FC5300}
\definecolor{quarto-callout-color-frame}{HTML}{acacac}
\definecolor{quarto-callout-note-color-frame}{HTML}{4582ec}
\definecolor{quarto-callout-important-color-frame}{HTML}{d9534f}
\definecolor{quarto-callout-warning-color-frame}{HTML}{f0ad4e}
\definecolor{quarto-callout-tip-color-frame}{HTML}{02b875}
\definecolor{quarto-callout-caution-color-frame}{HTML}{fd7e14}
\makeatother
\makeatletter
\@ifpackageloaded{bookmark}{}{\usepackage{bookmark}}
\makeatother
\makeatletter
\@ifpackageloaded{caption}{}{\usepackage{caption}}
\AtBeginDocument{%
\ifdefined\contentsname
  \renewcommand*\contentsname{Indice de contenidos}
\else
  \newcommand\contentsname{Indice de contenidos}
\fi
\ifdefined\listfigurename
  \renewcommand*\listfigurename{Listado de Figuras}
\else
  \newcommand\listfigurename{Listado de Figuras}
\fi
\ifdefined\listtablename
  \renewcommand*\listtablename{Listado de Tablas}
\else
  \newcommand\listtablename{Listado de Tablas}
\fi
\ifdefined\figurename
  \renewcommand*\figurename{Figura}
\else
  \newcommand\figurename{Figura}
\fi
\ifdefined\tablename
  \renewcommand*\tablename{Tabla}
\else
  \newcommand\tablename{Tabla}
\fi
}
\@ifpackageloaded{float}{}{\usepackage{float}}
\floatstyle{ruled}
\@ifundefined{c@chapter}{\newfloat{codelisting}{h}{lop}}{\newfloat{codelisting}{h}{lop}[chapter]}
\floatname{codelisting}{Listado}
\newcommand*\listoflistings{\listof{codelisting}{Listado de Listados}}
\usepackage{amsthm}
\theoremstyle{definition}
\newtheorem{exercise}{Ejercicio}[chapter]
\theoremstyle{definition}
\newtheorem{example}{Ejemplo}[chapter]
\theoremstyle{remark}
\AtBeginDocument{\renewcommand*{\proofname}{Prueba}}
\newtheorem*{remark}{Observación}
\newtheorem*{solution}{Solución}
\newtheorem{refremark}{Observación}[chapter]
\newtheorem{refsolution}{Solución}[chapter]
\makeatother
\makeatletter
\makeatother
\makeatletter
\@ifpackageloaded{caption}{}{\usepackage{caption}}
\@ifpackageloaded{subcaption}{}{\usepackage{subcaption}}
\makeatother

\ifLuaTeX
\usepackage[bidi=basic]{babel}
\else
\usepackage[bidi=default]{babel}
\fi
\babelprovide[main,import]{spanish}
% get rid of language-specific shorthands (see #6817):
\let\LanguageShortHands\languageshorthands
\def\languageshorthands#1{}
\usepackage{bookmark}

\IfFileExists{xurl.sty}{\usepackage{xurl}}{} % add URL line breaks if available
\urlstyle{same} % disable monospaced font for URLs
\hypersetup{
  pdftitle={Curso básico de análisis de datos con R},
  pdfauthor={Alfredo Sánchez Alberca},
  pdflang={es},
  colorlinks=true,
  linkcolor={blue},
  filecolor={Maroon},
  citecolor={Blue},
  urlcolor={Blue},
  pdfcreator={LaTeX via pandoc}}


\title{Curso básico de análisis de datos con R}
\usepackage{etoolbox}
\makeatletter
\providecommand{\subtitle}[1]{% add subtitle to \maketitle
  \apptocmd{\@title}{\par {\large #1 \par}}{}{}
}
\makeatother
\subtitle{Con ejemplos aplicados a las Ciencias de la Salud}
\author{Alfredo Sánchez Alberca}
\date{2022-01-06}

\begin{document}
\begin{titlepage}

%\AddToShipoutPicture*{\put(0,0){\includegraphics[scale=0.8]{img/background2}}} % Imagen de fondo, requiere el paquete eso-pic.
\begin{center}
\vspace*{5cm}

\Huge
{\textbf{\textsf{Curso básico de análisis de datos con R}}}

\vspace{0.5cm}
\LARGE
{\textbf{\textsf{Con ejemplos aplicados a las Ciencias de la Salud}}}

\vspace{1.5cm}

\includegraphics[width=0.4\textwidth]{img/logos/sticker.png}
\end{center}

\vfill

\begin{flushleft}
\begin{tabular}{ll}
\includegraphics[width=0.1\textwidth]{img/logos/aprendeconalf.png} & \parbox[b]{5cm}{\Large\textsf{Alfredo
Sánchez
Alberca}\\ \textsf{asalber@ceu.es} \\ \textsf{https://aprendeconalf.es}}
\end{tabular}
\end{flushleft}
\end{titlepage}
\renewcommand*\contentsname{Indice de contenidos}
{
\hypersetup{linkcolor=}
\setcounter{tocdepth}{2}
\tableofcontents
}

\bookmarksetup{startatroot}

\chapter*{Prefacio}\label{prefacio}
\addcontentsline{toc}{chapter}{Prefacio}

\markboth{Prefacio}{Prefacio}

\section*{Propósito de este manual}\label{propuxf3sito-de-este-manual}
\addcontentsline{toc}{section}{Propósito de este manual}

\markright{Propósito de este manual}

Este manual proporciona una introducción amigable al
\href{https://www.r-project.org/}{lenguaje de programación R} para
aquellas personas interesadas en utilizar este lenguaje para el análisis
de datos.

El manual empieza con los conceptos básicos del lenguaje de programación
R pero enseguida aborda su uso para la visualización y el análisis
estadístico de datos, haciendo un recorrido por los test estadísticos
más comunes.

Lo más interesante de este manual es la multitud de ejemplos que
ilustran el uso de las técnicas estadísticas presentadas, así como los
problemas propuestos.

El manual no aborda los fundamentos matemáticos de los análisis
estadísticos presentados, aunque si explica brevemente cuándo deben
usarse y cuándo no, así como las interpretaciones de los resultados
obtenidos en los ejemplos. Si alguien está interesado en profundizar en
los detalles matemáticos, puede visitar esta
\href{https://aprendeconalf.es/docencia/estadistica/}{página}.

No es un curso de programación en R, sino de uso de sus funciones
predefinidas y de los paquetes más habituales para el análisis de datos.

Para cualquier comentario o sugerencia sobre este manual escriba al
autor (asalber@ceu.es).

\section*{Licencia}\label{licencia}
\addcontentsline{toc}{section}{Licencia}

\markright{Licencia}

Esta obra está bajo una licencia Reconocimiento -- No comercial --
Compartir bajo la misma licencia 3.0 España de Creative Commons. Para
ver una copia de esta licencia, visite
\url{https://creativecommons.org/licenses/by-nc-sa/3.0/es/}.

Con esta licencia eres libre de:

\begin{itemize}
\tightlist
\item
  Copiar, distribuir y mostrar este trabajo.
\item
  Realizar modificaciones de este trabajo.
\end{itemize}

Bajo las siguientes condiciones:

\begin{itemize}
\item
  \textbf{Reconocimiento}. Debe reconocer los créditos de la obra de la
  manera especificada por el autor o el licenciador (pero no de una
  manera que sugiera que tiene su apoyo o apoyan el uso que hace de su
  obra).
\item
  \textbf{No comercial}. No puede utilizar esta obra para fines
  comerciales.
\item
  \textbf{Compartir bajo la misma licencia}. Si altera o transforma esta
  obra, o genera una obra derivada, sólo puede distribuir la obra
  generada bajo una licencia idéntica a ésta.
\end{itemize}

Al reutilizar o distribuir la obra, tiene que dejar bien claro los
términos de la licencia de esta obra.

Estas condiciones pueden no aplicarse si se obtiene el permiso del
titular de los derechos de autor.

Nada en esta licencia menoscaba o restringe los derechos morales del
autor.

\bookmarksetup{startatroot}

\chapter{Introducción a R}\label{introducciuxf3n-a-r}

La gran potencia de cómputo alcanzada por los ordenadores ha convertido
a los mismos en poderosas herramientas al servicio de todas aquellas
disciplinas que, como la Estadística, requieren manejar un gran volumen
de datos. Actualmente, prácticamente nadie se plantea hacer un estudio
estadístico serio sin la ayuda de un buen programa de análisis de datos.

\emph{R} es un potente lenguaje de programación que incluye multitud de
funciones para la representación y el análisis de datos. Fue
desarrollado en 1993 por Robert Gentleman y Ross Ihaka en la Universidad
de Auckland en Nueva Zelanda, aunque actualmente es mantenido por una
enorme comunidad científica en todo el mundo.

\begin{figure}[H]

{\centering \includegraphics[width=0.25\linewidth,height=\textheight,keepaspectratio]{img/logos/Rlogo.png}

}

\caption{Logotipo de R}

\end{figure}%

Las ventajas de R frente a otros programas habituales de análisis de
datos, como pueden ser SPSS, SAS o Matlab, son múltiples:

\begin{itemize}
\tightlist
\item
  Es software libre y por tanto gratuito. Puede descargarse desde la web
  \url{http://www.r-project.org/}.
\item
  Es multiplataforma. Existen versiones para Windows, Macintosh, Linux y
  otras plataformas.
\item
  Es un lenguaje maduro.
\item
  Está avalado y en constante desarrollo por una amplia comunidad
  científica distribuida por todo el mundo que lo utiliza como estándar
  para el análisis de datos.
\item
  Cuenta con multitud de paquetes para todo tipo de análisis
  estadísticos y representaciones gráficas, desde los más habituales,
  hasta los más novedosos y sofisticados que no incluyen otros
  programas. Los paquetes están organizados y documentados en un
  \href{https://cran.r-project.org/}{repositorio CRAN} (Comprehensive R
  Archive Network) desde donde pueden descargarse libremente.
\item
  Diseñado para el análisis la representación de datos.
\end{itemize}

Existen multitud de libros, manuales y tutoriales libres que permiten su
aprendizaje e ilustran el análisis estadístico de datos en distintas
disciplinas científicas como las Matemáticas, la Física, la Biología, la
Psicología, la Medicina, etc.

\section{Instalación de R}\label{instalaciuxf3n-de-r}

R puede descargarse desde el \href{https://www.r-project.org/}{sitio web
oficial de R} o desde el repositorio principal de paquetes de R
\href{https://cran.r-project.org/}{CRAN}. Basta con descargar el archivo
de instalación correspondiente al sistema operativo de nuestro ordenador
y realizar la instalación como cualquier otro programa.

El intérprete de R se arranca desde la terminal, aunque en Windows
incorpora su propia aplicación, pero es muy básica. En general, para
trabajos serios, conviene utilizar un entorno de desarrollo para R.

\section{Entornos de desarrollo}\label{entornos-de-desarrollo}

Por defecto el entorno de trabajo de R es en línea de comandos, lo que
significa que los cálculos y los análisis se realizan mediante comandos
o instrucciones que el usuario teclea en una ventana de texto. No
obstante, existen distintas interfaces gráficas de usuario que facilitan
su uso, sobre todo para usuarios noveles. Algunas de ellas, como las que
se enumeran a continuación, son completos entornos de desarrollo que
facilitan la gestión de cualquier proyecto:

\begin{itemize}
\item
  \href{https://www.rstudio.com/}{RStudio}. Probablemente el entorno de
  desarrollo más extendido para programar con R ya que incorpora
  multitud de utilidades para facilitar la programación con R.
\item
  \href{https://rkward.kde.org}{RKWard}. Es otra otro de los entornos de
  desarrollo más completos que además incluye a posibilidad de añadir
  nuevos menús y cuadros de diálogo personalizados.
\item
  \href{https://code.visualstudio.com/}{Visual Studio Code}. Es un
  entorno de desarrollo de propósito general ampliamente extendido.
  Aunque no es un entorno de desarrollo específico para R, incluye una
  extensión con utilidades que facilitan mucho el desarrollo con R.
\end{itemize}

\bookmarksetup{startatroot}

\chapter{Tipos de datos simples}\label{tipos-de-datos-simples}

En R existen distintos tipos de datos simples predefinidos:

\begin{itemize}
\item
  \texttt{numeric}: Es el tipo de los números. Secuencia de dígitos
  (pueden incluir el - para negativos y el punto como separador de
  decimales) que representan números. Por ejemplo, \texttt{1},
  \texttt{-2.0}, \texttt{3.1415} o \texttt{4.5e3}.\\
  Por defecto, cualquier número que se teclee tomará este tipo.

  \begin{itemize}
  \item
    \texttt{integer}: Es el tipo de los números enteros. Secuencia de
    dígitos sin separador de decimales que representan un número entero.
    Por ejemplo \texttt{1} o \texttt{-2}. Son una subclase del tipo de
    datos numérico.
  \item
    \texttt{double}: Es el tipo de los números reales. Secuencia de
    dígitos que incluyen decimales separados por punto. Por ejemplo
    \texttt{3.1415} o \texttt{-2.0}. Son una subclase del tipo de datos
    numérico.
  \end{itemize}
\item
  \texttt{character}: Es el tipo de las cadenas de caracteres. Secuencia
  de caracteres alfanuméricos que representan texto. Se escriben entre
  comillas simples o dobles. Por ejemplo \texttt{"Hola"} o
  \texttt{\textquotesingle{}Hola\textquotesingle{}}.
\item
  \texttt{logical}: Es el tipo de los booleanos. Puede tomar cualquiera
  de los dos valores lógicos \texttt{TRUE} (verdadero) o \texttt{FALSE}
  (falso). También se pueden abreviar como \texttt{T} o \texttt{F}.
\item
  \texttt{NA}: Se utiliza para representar datos desconocidos o
  perdidos. Aunque en realidad es un dato lógico, puede considerarse con
  un tipo de dato especial.
\item
  \texttt{NULL}: Se utiliza para representar la ausencia de datos. La
  principal diferencia con \texttt{NA} es que \texttt{NULL} aparece
  cuando se intenta acceder a un dato que no existe, mientras que
  \texttt{NA} se utiliza para representar explícitamente datos perdidos
  en un estudio.
\end{itemize}

Para averiguar el tipo de un dato se puede utilizar la siguiente
función:

\begin{itemize}
\tightlist
\item
  \texttt{class(x)}: Devuelve el tipo del dato \texttt{x}.
\end{itemize}

\begin{example}[]\protect\hypertarget{exm-tipos-datos}{}\label{exm-tipos-datos}

A continuación se muestran los tipos de algunos datos.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{class}\NormalTok{(}\FloatTok{3.1415}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] "numeric"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{class}\NormalTok{(}\SpecialCharTok{{-}}\DecValTok{1}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] "numeric"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{class}\NormalTok{(}\StringTok{"Hola"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] "character"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{class}\NormalTok{(}\ConstantTok{TRUE}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] "logical"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{class}\NormalTok{(}\ConstantTok{NA}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] "logical"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{class}\NormalTok{(}\ConstantTok{NULL}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] "NULL"
\end{verbatim}

\end{example}

También pueden utilizarse las siguientes funciones que devuelven un
booleano:

\begin{itemize}
\tightlist
\item
  \texttt{is.numeric(x)}: Devuelve el booleano \texttt{TRUE} si
  \texttt{x} es del tipo \texttt{numeric}.
\item
  \texttt{is.double(x)}: Devuelve el booleano \texttt{TRUE} si
  \texttt{x} es del tipo \texttt{double}.
\item
  \texttt{is.integer(x)}: Devuelve el booleano \texttt{TRUE} si
  \texttt{x} es del tipo \texttt{integer}.
\item
  \texttt{is.character(x)}: Devuelve el booleano \texttt{TRUE} si
  \texttt{x} es del tipo \texttt{character}.
\item
  \texttt{is.logical(x)}: Devuelve el booleano \texttt{TRUE} si
  \texttt{x} es del tipo \texttt{logical}.
\item
  \texttt{is.na(x)}: Devuelve el booleano \texttt{TRUE} si \texttt{x} es
  del tipo \texttt{NA}.
\item
  \texttt{is.null(x)}: Devuelve el booleano \texttt{TRUE} si \texttt{x}
  es del tipo \texttt{NULL}.
\end{itemize}

\begin{example}[]\protect\hypertarget{exm-tipos-datos-2}{}\label{exm-tipos-datos-2}

~

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{is.double}\NormalTok{(}\FloatTok{3.1415}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] TRUE
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{is.character}\NormalTok{(}\ConstantTok{TRUE}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] FALSE
\end{verbatim}

\end{example}

\section{Conversión de tipos}\label{conversiuxf3n-de-tipos}

En muchas ocasiones es posible convertir un dato de un tipo a otro
distinto. Para ello se usan las siguientes funciones:

\begin{itemize}
\tightlist
\item
  \texttt{as.numeric(x)}: Convierte el dato de \texttt{x} al tipo
  \texttt{numeric} siempre que sea posible o tenga sentido la
  conversión. Para convertir una cadena en un número, la cadena tiene
  que representar un número. El valor lógico \texttt{TRUE} se convierte
  en 1 y el \texttt{FALSE} en 0.
\item
  \texttt{as.integer(x)}: Convierte el dato de \texttt{x} al tipo
  \texttt{integer} siempre que sea posible o tenga sentido la
  conversión. Para convertir una cadena en un número entero, la cadena
  tiene que representar un número entero. El valor lógico \texttt{TRUE}
  se convierte en 1 y el \texttt{FALSE} en 0.
\item
  \texttt{as.character(x)}: Convierte el tipo de dato de \texttt{x} al
  tipo \texttt{character} simplemente añadiendo comillas.
\item
  \texttt{as.logical(x)}: Convierte el tipo de dato de \texttt{x} al
  tipo lógico. Para datos numéricos, el 0 se convierte en \texttt{FALSE}
  y cualquier otro número en \texttt{TRUE}. Para cadenas se obtiene
  \texttt{NA} excepto para las cadenas \texttt{"TRUE"} y \texttt{"true"}
  que se convierten a \texttt{TRUE} y las cadenas \texttt{"FALSE"} y
  \texttt{"false"} que se convierten a \texttt{FALSE}.
\end{itemize}

El tipo \texttt{NA} no se puede convertir a ningún otro tipo pues
representa la ausencia del dato. Lo mismo ocurre con \texttt{NULL}.

\section{Operaciones con números}\label{operaciones-con-nuxfameros}

\subsection{Operadores aritméticos}\label{operadores-aritmuxe9ticos}

Los siguientes operadores permiten realizar las clásicas operaciones
aritméticas entre datos numéricos:

\begin{itemize}
\tightlist
\item
  \texttt{x\ +\ y}: Devuelve la suma de \texttt{x} e \texttt{y}.
\item
  \texttt{x\ -\ y}: Devuelve la resta de \texttt{x} e \texttt{y}.
\item
  \texttt{x\ *\ y}: Devuelve el producto de \texttt{x} e \texttt{y}.
\item
  \texttt{x\ /\ y}: Devuelve el cociente de \texttt{x} e \texttt{y}.\\
\item
  \texttt{x\ \%\%\ y}: Devuelve el resto de la división entera de
  \texttt{x} e \texttt{y}.\\
\item
  \texttt{x\ \^{}\ y}: Devuelve la potencia \texttt{x} elevado a
  \texttt{y}.
\end{itemize}

\begin{example}[]\protect\hypertarget{exm-operadores-aritmeticos}{}\label{exm-operadores-aritmeticos}

~

\begin{Shaded}
\begin{Highlighting}[]
\DecValTok{2} \SpecialCharTok{+} \DecValTok{3}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 5
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\DecValTok{5} \SpecialCharTok{*} \SpecialCharTok{{-}}\DecValTok{2}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] -10
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\DecValTok{5} \SpecialCharTok{/} \DecValTok{2}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 2.5
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\DecValTok{1} \SpecialCharTok{/} \DecValTok{0}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] Inf
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\DecValTok{5} \SpecialCharTok{\%\%} \DecValTok{2}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 1
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\DecValTok{2} \SpecialCharTok{\^{}} \DecValTok{3}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 8
\end{verbatim}

\end{example}

\subsection{Operadores relacionales}\label{operadores-relacionales}

Comparan dos números y devuelven un valor lógico.

\begin{itemize}
\tightlist
\item
  \texttt{x\ ==\ y}: Devuelve \texttt{TRUE} si el número \texttt{x} es
  igual que el número \texttt{y}, y \texttt{FALSE} en caso contrario.
\item
  \texttt{x\ \textgreater{}\ y}: Devuelve \texttt{TRUE} si el número
  \texttt{x} es mayor que el número \texttt{y}, y \texttt{FALSE} en caso
  contrario.
\item
  \texttt{x\ \textless{}\ y}: Devuelve \texttt{TRUE} si el número
  \texttt{x} es menor que el número \texttt{y}, y \texttt{FALSE} en caso
  contrario.
\item
  \texttt{x\ \textgreater{}=\ y}: Devuelve \texttt{TRUE} si el número
  \texttt{x} es mayor o igual que el número \texttt{y}, y \texttt{FALSE}
  en caso contrario.
\item
  \texttt{x\ \textless{}=\ y}: Devuelve \texttt{TRUE} si el número
  \texttt{x} es menor o igual a que el número \texttt{y,} y
  \texttt{FALSE} en caso contrario.
\item
  \texttt{x\ !=\ y}: Devuelve \texttt{TRUE} si el número \texttt{x} es
  distinto del número \texttt{y}, y \texttt{FALSE} en caso contrario.
\end{itemize}

\begin{example}[]\protect\hypertarget{exm-operadores-relacionales}{}\label{exm-operadores-relacionales}

~

\begin{Shaded}
\begin{Highlighting}[]
\DecValTok{3} \SpecialCharTok{==} \DecValTok{3}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] TRUE
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FloatTok{3.1} \SpecialCharTok{\textless{}=} \DecValTok{3}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] FALSE
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\DecValTok{4} \SpecialCharTok{\textgreater{}} \DecValTok{3}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] TRUE
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\SpecialCharTok{{-}}\DecValTok{1} \SpecialCharTok{!=} \DecValTok{1}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] TRUE
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\DecValTok{5} \SpecialCharTok{\%\%} \DecValTok{2}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 1
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\DecValTok{2} \SpecialCharTok{\^{}} \DecValTok{3}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 8
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{(}\DecValTok{2} \SpecialCharTok{+} \DecValTok{3}\NormalTok{) }\SpecialCharTok{\^{}} \DecValTok{2}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 25
\end{verbatim}

\end{example}

\subsection{Funciones y constantes
numéricas}\label{funciones-y-constantes-numuxe9ricas}

Las siguientes constantes y funciones matemáticas también están ya
predefinidas.

\begin{itemize}
\tightlist
\item
  \texttt{pi}: Devuelve el número \(\pi\).
\item
  \texttt{sqrt(x)}: Devuelve la raíz cuadrada de \texttt{x}.
\item
  \texttt{abs(x)}: Devuelve el valor absoluto de \texttt{x}.
\item
  \texttt{round(x,\ n)}: Devuelve el redondeo de \texttt{x} a \texttt{n}
  decimales.
\item
  \texttt{exp(x)}: Devuelve la exponencial de \texttt{x} (\(e^x\)).
\item
  \texttt{log(x)}: Devuelve el logaritmo neperiano de \texttt{x}.
\item
  \texttt{sin(x)}: Devuelve el seno del ángulo \texttt{x} en radianes.
\item
  \texttt{cos(x)}: Devuelve el coseno del ángulo \texttt{x} en radianes.
\item
  \texttt{tan(x)}: Devuelve la tangente del ángulo \texttt{x} en
  radianes.
\item
  \texttt{asin(x)}: Devuelve el arcoseno de \texttt{x}.
\item
  \texttt{acos(x)}: Devuelve el arcocoseno de \texttt{x}.
\item
  \texttt{atan(x)}: Devuelve el arcotangente de \texttt{x}.
\end{itemize}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\begin{example}[]\protect\hypertarget{exm-funciones-numéricas}{}\label{exm-funciones-numéricas}

~

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{sqrt}\NormalTok{(}\DecValTok{9}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 3
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{abs}\NormalTok{(}\SpecialCharTok{{-}}\DecValTok{1}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 1
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{round}\NormalTok{(}\FloatTok{1.7}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 2
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{exp}\NormalTok{(}\DecValTok{1}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 2.718282
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{log}\NormalTok{(}\FunctionTok{exp}\NormalTok{(}\DecValTok{1}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 1
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{cos}\NormalTok{(pi)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] -1
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{asin}\NormalTok{(}\DecValTok{1}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 1.570796
\end{verbatim}

\end{example}

\section{Operaciones con cadenas}\label{operaciones-con-cadenas}

\subsection{Funciones de cadenas}\label{funciones-de-cadenas}

Existen muchas funciones para cadenas de texto pero las más comunes son:

\begin{itemize}
\tightlist
\item
  \texttt{nchar(c)}: Devuelve el número de caracteres de la cadena.
\item
  \texttt{paste(x,\ y,\ ...,\ sep=s)}: Concatena las cadenas \texttt{x},
  \texttt{y}, etc. separándolas por la cadena \texttt{s}. Por defecto la
  cadena de separación es un espacio en blanco.
\item
  \texttt{substr(c,\ start=i,\ stop=j)}: Devuelve la subcadena de la
  cadena \texttt{c} desde la posición \texttt{i} hasta la posición
  \texttt{j}. El primer carácter de una cadena ocupa la posición 1.
\item
  \texttt{tolower(c)}: Devuelve la cadena que resulta de convertir la
  cadena \texttt{c} a minúsculas.
\item
  \texttt{toupper(c)}: Devuelve la cadena que resulta de convertir la
  cadena \texttt{c} a mayúsculas.
\end{itemize}

\begin{example}[]\protect\hypertarget{exm-operaciones-cadenas}{}\label{exm-operaciones-cadenas}

~

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{nchar}\NormalTok{(}\StringTok{"Me gusta R"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 10
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{paste}\NormalTok{(}\StringTok{"Me"}\NormalTok{, }\StringTok{"gusta"}\NormalTok{, }\StringTok{"R"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] "Me gusta R"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{paste}\NormalTok{(}\StringTok{"Me"}\NormalTok{, }\StringTok{"gusta"}\NormalTok{, }\StringTok{"R"}\NormalTok{, }\AttributeTok{sep =} \StringTok{"{-}"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] "Me-gusta-R"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{paste}\NormalTok{(}\StringTok{"Me"}\NormalTok{, }\StringTok{"gusta"}\NormalTok{, }\StringTok{"R"}\NormalTok{, }\AttributeTok{sep =} \StringTok{""}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] "MegustaR"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{substr}\NormalTok{(}\StringTok{"Me gusta R"}\NormalTok{, }\DecValTok{4}\NormalTok{, }\DecValTok{8}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] "gusta"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{tolower}\NormalTok{(}\StringTok{"Me gusta R"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] "me gusta r"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{toupper}\NormalTok{(}\StringTok{"Me gusta R"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] "ME GUSTA R"
\end{verbatim}

\end{example}

\subsection{Operaciones de comparación de
cadenas}\label{operaciones-de-comparaciuxf3n-de-cadenas}

\begin{itemize}
\tightlist
\item
  \texttt{x\ ==\ y} : Devuelve \texttt{TRUE} si la cadena \texttt{x} es
  igual que la cadena \texttt{y}, y \texttt{FALSE} en caso contrario.
\item
  \texttt{x\ \textgreater{}\ y} : Devuelve \texttt{TRUE} si la cadena
  \texttt{x} sucede a la cadena \texttt{y}, y \texttt{FALSE} en caso
  contrario.
\item
  \texttt{x\ \textless{}\ y} : Devuelve \texttt{TRUE} si la cadena
  \texttt{x} antecede a la cadena \texttt{y}, y \texttt{FALSE} en caso
  contrario.
\item
  \texttt{x\ \textgreater{}=\ y} : Devuelve \texttt{TRUE} si la cadena
  \texttt{x} sucede o es igual a la cadena \texttt{y}, y \texttt{FALSE}
  en caso contrario.
\item
  \texttt{x\ \textless{}=\ y} : Devuelve \texttt{TRUE} si la cadena
  \texttt{x} antecede o es igual a la cadena \texttt{y}, y
  \texttt{FALSE} en caso contrario.
\item
  \texttt{x\ !=\ y} : Devuelve \texttt{TRUE} si la cadena \texttt{x} es
  distinta de la cadena \texttt{y}, y \texttt{FALSE} en caso contrario.
\end{itemize}

\emph{Utilizan el orden alfabético, las minúsculas van antes que las
mayúsculas, y los números antes que las letras.}

\begin{example}[]\protect\hypertarget{exm-operaciones-comparacion-cadenas}{}\label{exm-operaciones-comparacion-cadenas}

~

\begin{Shaded}
\begin{Highlighting}[]
\StringTok{"R"} \SpecialCharTok{==} \StringTok{"R"}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] TRUE
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\StringTok{"R"} \SpecialCharTok{==} \StringTok{"r"}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] FALSE
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\StringTok{"uno"} \SpecialCharTok{\textless{}} \StringTok{"dos"}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] FALSE
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\StringTok{"A"} \SpecialCharTok{\textgreater{}} \StringTok{"a"}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] TRUE
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\StringTok{""} \SpecialCharTok{\textless{}} \StringTok{"R"}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] TRUE
\end{verbatim}

\end{example}

\section{Operaciones con datos lógicos o
booleanos}\label{operaciones-con-datos-luxf3gicos-o-booleanos}

\subsection{Operadores lógicos}\label{operadores-luxf3gicos}

A la hora de comparar valores lógicos R asocia a \texttt{TRUE} el valor
1 y a \texttt{FALSE} el valor 0.

\begin{itemize}
\tightlist
\item
  \texttt{x\ ==\ y}: Devuelve \texttt{TRUE} si los booleanos \texttt{x}
  y \texttt{y} son iguales, y \texttt{FALSE} en caso contrario.
\item
  \texttt{x\ \textless{}\ y}: Devuelve \texttt{TRUE} si el booleano
  \texttt{x} es menor que el booleano \texttt{y}, y \texttt{FALSE} en
  caso contrario.
\item
  \texttt{x\ \textless{}=\ y}: Devuelve \texttt{TRUE} si el booleano
  \texttt{x} es menor o igual que el booleano \texttt{y}, y
  \texttt{FALSE} en caso contrario.
\item
  \texttt{x\ \textgreater{}\ y}: Devuelve \texttt{TRUE} si el booleano
  \texttt{x} es mayor que el booleano \texttt{y}, y \texttt{FALSE} en
  caso contrario.
\item
  \texttt{x\ \textgreater{}=\ y}: Devuelve \texttt{TRUE} si el booleano
  \texttt{x} es mayor o igual que el booleano \texttt{y}, y
  \texttt{FALSE} en caso contrario.
\item
  \texttt{x\ !=\ y}: Devuelve \texttt{TRUE} si el booleano \texttt{x} es
  distinto que el booleano \texttt{y}, y \texttt{FALSE} en caso
  contrario.
\item
  Negación \texttt{!b}: Devuelve \texttt{TRUE} si el booleano \texttt{b}
  es \texttt{FALSE}, y \texttt{FALSE} si es \texttt{TRUE}.
\item
  Conjunción \texttt{x\ \&\ y}: Devuelve \texttt{TRUE} si los booleanos
  \texttt{x}, y \texttt{y} son \texttt{TRUE} y \texttt{FALSE} en caso
  contrario.
\item
  Disyunción \texttt{x\ \textbar{}\ y}: Devuelve \texttt{TRUE} si alguno
  de los booleanos \texttt{x} o \texttt{y} son \texttt{TRUE}, y
  \texttt{FALSE} en caso contrario.
\end{itemize}

\subsubsection*{Tabla de verdad}\label{tabla-de-verdad}
\addcontentsline{toc}{subsubsection}{Tabla de verdad}

\begin{longtable}[]{@{}ccccc@{}}
\toprule\noalign{}
\texttt{x} & \texttt{y} & \texttt{!x} & \texttt{x\ \&\ y} &
\texttt{x\ \textbar{}\ y} \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
\texttt{FALSE} & \texttt{FALSE} & \texttt{TRUE} & \texttt{FALSE} &
\texttt{FALSE} \\
\texttt{FALSE} & \texttt{TRUE} & \texttt{TRUE} & \texttt{FALSE} &
\texttt{TRUE} \\
\texttt{TRUE} & \texttt{FALSE} & \texttt{FALSE} & \texttt{FALSE} &
\texttt{TRUE} \\
\texttt{TRUE} & \texttt{TRUE} & \texttt{FALSE} & \texttt{TRUE} &
\texttt{TRUE} \\
\end{longtable}

\begin{example}[]\protect\hypertarget{exm-operadores-logicos}{}\label{exm-operadores-logicos}

~

\begin{Shaded}
\begin{Highlighting}[]
\SpecialCharTok{!}\ConstantTok{TRUE}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] FALSE
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\ConstantTok{FALSE} \SpecialCharTok{|} \ConstantTok{TRUE}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] TRUE
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\ConstantTok{FALSE} \SpecialCharTok{|} \ConstantTok{FALSE}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] FALSE
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\ConstantTok{TRUE} \SpecialCharTok{\&} \ConstantTok{FALSE}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] FALSE
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\ConstantTok{TRUE} \SpecialCharTok{\&} \ConstantTok{TRUE}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] TRUE
\end{verbatim}

\end{example}

\section{Variables}\label{variables}

Una variable es un identificador ligado a un valor.

\begin{tcolorbox}[enhanced jigsaw, opacitybacktitle=0.6, toptitle=1mm, opacityback=0, bottomrule=.15mm, colbacktitle=quarto-callout-note-color!10!white, leftrule=.75mm, toprule=.15mm, title=\textcolor{quarto-callout-note-color}{\faInfo}\hspace{0.5em}{Reglas para nombrar variables}, colframe=quarto-callout-note-color-frame, titlerule=0mm, colback=white, arc=.35mm, rightrule=.15mm, coltitle=black, left=2mm, breakable, bottomtitle=1mm]

\begin{itemize}
\tightlist
\item
  Comienzan siempre por una letra o punto, seguida de otras letras,
  números, puntos o guiones bajos. Si empieza por punto no puede
  seguirle un número.
\item
  No se pueden utilizarse palabras reservadas del lenguaje.
\end{itemize}

\end{tcolorbox}

A diferencia de otros lenguajes de programación, las variables no tienen
asociado un tipo de dato y no es necesario declararlas antes de usarlas
(tipado dinámico).

Para asignar un valor a una variable se utiliza el operador de
asignación \texttt{\textless{}-}:

\begin{itemize}
\tightlist
\item
  \texttt{x\ \textless{}-\ y}: Asigna el valor \texttt{y} a la variable
  \texttt{x}.
\end{itemize}

Aunque es menos común también se puede utilizar el operador \texttt{=}.

Se puede crear una variable sin ningún valor asociado asignándole el
valor \texttt{NULL}.

Una vez definida una variable, puede utilizarse en cualquier expresión
donde tenga sentido el valor que tiene asociado.

Si una variable ya no va a usarse, es posible eliminarla y liberar el
espacio que ocupan sus datos asociados con la siguiente función:

\begin{itemize}
\tightlist
\item
  \texttt{rm(x)}: Elimina la variable \texttt{x}.
\end{itemize}

\begin{example}[]\protect\hypertarget{exm-variables}{}\label{exm-variables}

~

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x }\OtherTok{\textless{}{-}} \DecValTok{3}
\NormalTok{x}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 3
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{y }\OtherTok{\textless{}{-}}\NormalTok{ x }\SpecialCharTok{+} \DecValTok{2}
\NormalTok{y}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 5
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Valor no definido}
\NormalTok{x }\OtherTok{\textless{}{-}} \ConstantTok{NULL}
\NormalTok{x}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
NULL
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Eliminar y}
\FunctionTok{rm}\NormalTok{(y)}
\CommentTok{\# A partir de aquí, una llamada a y produce un error.}
\end{Highlighting}
\end{Shaded}

\end{example}

\subsection{Prioridad de los
operadores}\label{prioridad-de-los-operadores}

Al evaluar una expresiones R utiliza el siguiente orden de prioridad de
evaluación:

\begin{longtable}[]{@{}cc@{}}
\toprule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
1 & Funciones predefinidas \\
2 & Potencias (\texttt{\^{}}) \\
3 & Productos y cocientes (\texttt{*}, \texttt{/}, \texttt{\%\%}) \\
4 & Sumas y restas (\texttt{+}, \texttt{-}) \\
5 & Operadores relacionales (\texttt{==}, \texttt{\textgreater{}},
\texttt{\textless{}}, \texttt{\textgreater{}=}, \texttt{\textless{}=},
\texttt{!=}) \\
6 & Negación (\texttt{!}) \\
7 & Conjunción (\texttt{\&}) \\
8 & Disyunción (\texttt{\textbar{}}) \\
9 & Asignación (\texttt{\textless{}-}) \\
\end{longtable}

Se puede saltar el orden de evaluación utilizando paréntesis
\texttt{(\ )}.

\begin{example}[]\protect\hypertarget{exm-prioridad-evaluacion}{}\label{exm-prioridad-evaluacion}

~

\begin{Shaded}
\begin{Highlighting}[]
\DecValTok{4} \SpecialCharTok{+} \DecValTok{8} \SpecialCharTok{/} \DecValTok{2} \SpecialCharTok{\^{}} \DecValTok{2}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 6
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\DecValTok{4} \SpecialCharTok{+}\NormalTok{ (}\DecValTok{8} \SpecialCharTok{/} \DecValTok{2}\NormalTok{) }\SpecialCharTok{\^{}} \DecValTok{2}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 20
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{(}\DecValTok{4} \SpecialCharTok{+} \DecValTok{8}\NormalTok{) }\SpecialCharTok{/} \DecValTok{2} \SpecialCharTok{\^{}} \DecValTok{2}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 3
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{(}\DecValTok{4} \SpecialCharTok{+} \DecValTok{8} \SpecialCharTok{/} \DecValTok{2}\NormalTok{) }\SpecialCharTok{\^{}} \DecValTok{2}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 64
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x }\OtherTok{\textless{}{-}} \DecValTok{2} 
\NormalTok{y }\OtherTok{\textless{}{-}} \DecValTok{3}
\NormalTok{z }\OtherTok{\textless{}{-}} \SpecialCharTok{!}\NormalTok{ x }\SpecialCharTok{+} \DecValTok{1} \SpecialCharTok{\textgreater{}}\NormalTok{ y }\SpecialCharTok{\&}\NormalTok{ y }\SpecialCharTok{*} \DecValTok{2}  \SpecialCharTok{\textless{}}\NormalTok{ x }\SpecialCharTok{\^{}} \DecValTok{3}
\NormalTok{z}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] TRUE
\end{verbatim}

\end{example}

\section{Ejercicios}\label{ejercicios}

\begin{exercise}[]\protect\hypertarget{exr-tipos-datos-1}{}\label{exr-tipos-datos-1}

Se dispone de los siguientes datos de una persona:

\begin{longtable}[]{@{}cc@{}}
\toprule\noalign{}
Variable & Valor \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
edad & 20 \\
estatura & 165 \\
peso & 60 \\
sexo & mujer \\
\end{longtable}

\begin{enumerate}
\def\labelenumi{\alph{enumi}.}
\item
  Declarar las variables anteriores y asignarles los valores
  correspondientes.

  \begin{tcolorbox}[enhanced jigsaw, opacitybacktitle=0.6, toptitle=1mm, opacityback=0, bottomrule=.15mm, colbacktitle=quarto-callout-note-color!10!white, leftrule=.75mm, toprule=.15mm, title=\textcolor{quarto-callout-note-color}{\faInfo}\hspace{0.5em}{Solución}, colframe=quarto-callout-note-color-frame, titlerule=0mm, colback=white, arc=.35mm, rightrule=.15mm, coltitle=black, left=2mm, breakable, bottomtitle=1mm]

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Declaración de variables}
\NormalTok{edad }\OtherTok{\textless{}{-}} \DecValTok{20}
\NormalTok{estatura }\OtherTok{\textless{}{-}} \DecValTok{165}
\NormalTok{peso }\OtherTok{\textless{}{-}} \DecValTok{60}
\NormalTok{sexo }\OtherTok{\textless{}{-}} \StringTok{"mujer"}
\end{Highlighting}
\end{Shaded}

  \end{tcolorbox}
\item
  Definir la variable numérica imc con el índice de masa corporal
  aplicando la siguiente fórmula a las variables anteriores:

  \[
  \mbox{imc} = \frac{\mbox{peso (kg)}}{\mbox{estatura (m)}^2}
  \]

  \begin{tcolorbox}[enhanced jigsaw, opacitybacktitle=0.6, toptitle=1mm, opacityback=0, bottomrule=.15mm, colbacktitle=quarto-callout-note-color!10!white, leftrule=.75mm, toprule=.15mm, title=\textcolor{quarto-callout-note-color}{\faInfo}\hspace{0.5em}{Solución}, colframe=quarto-callout-note-color-frame, titlerule=0mm, colback=white, arc=.35mm, rightrule=.15mm, coltitle=black, left=2mm, breakable, bottomtitle=1mm]

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Cálculo del índice de masa corporal}
\NormalTok{imc }\OtherTok{\textless{}{-}}\NormalTok{ peso }\SpecialCharTok{/}\NormalTok{ (estatura }\SpecialCharTok{/} \DecValTok{100}\NormalTok{) }\SpecialCharTok{\^{}} \DecValTok{2}
\NormalTok{imc}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 22.03857
\end{verbatim}

  \end{tcolorbox}
\item
  Mostrar por pantalla el indice de masa corporal calculado en el
  apartado anterior redondeado a dos decimales y con sus unidades en
  mayúsculas.

  \begin{tcolorbox}[enhanced jigsaw, opacitybacktitle=0.6, toptitle=1mm, opacityback=0, bottomrule=.15mm, colbacktitle=quarto-callout-note-color!10!white, leftrule=.75mm, toprule=.15mm, title=\textcolor{quarto-callout-note-color}{\faInfo}\hspace{0.5em}{Solución}, colframe=quarto-callout-note-color-frame, titlerule=0mm, colback=white, arc=.35mm, rightrule=.15mm, coltitle=black, left=2mm, breakable, bottomtitle=1mm]

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Salida por pantalla}
\FunctionTok{paste}\NormalTok{(}\StringTok{"Índice de masa corporal: "}\NormalTok{, }\FunctionTok{round}\NormalTok{(imc,}\DecValTok{2}\NormalTok{), }\FunctionTok{toupper}\NormalTok{(}\StringTok{"KG/M²"}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] "Índice de masa corporal:  22.04 KG/M²"
\end{verbatim}

  \end{tcolorbox}
\item
  Definir la variable booleana obesa con el valor correspondiente a la
  siguiente condición: ser mujer y no tener una edad superior a 60 y
  tener un índice de masa corporal mayor o igual que 30. ¿Es esta
  persona obesa?

  \begin{tcolorbox}[enhanced jigsaw, opacitybacktitle=0.6, toptitle=1mm, opacityback=0, bottomrule=.15mm, colbacktitle=quarto-callout-note-color!10!white, leftrule=.75mm, toprule=.15mm, title=\textcolor{quarto-callout-note-color}{\faInfo}\hspace{0.5em}{Solución}, colframe=quarto-callout-note-color-frame, titlerule=0mm, colback=white, arc=.35mm, rightrule=.15mm, coltitle=black, left=2mm, breakable, bottomtitle=1mm]

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Cálculo de la obesidad}
\NormalTok{obesa }\OtherTok{\textless{}{-}}\NormalTok{ sexo }\SpecialCharTok{==} \StringTok{"mujer"} \SpecialCharTok{\&} \SpecialCharTok{!}\NormalTok{ edad }\SpecialCharTok{\textgreater{}} \DecValTok{60} \SpecialCharTok{\&}\NormalTok{ imc }\SpecialCharTok{\textgreater{}=} \DecValTok{30}
\NormalTok{obesa}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] FALSE
\end{verbatim}

  \end{tcolorbox}
\end{enumerate}

\end{exercise}

\bookmarksetup{startatroot}

\chapter{Tipos de datos
estructurados}\label{tipos-de-datos-estructurados}

Los tipos estructurados de datos, a diferencia de los simples, son
colecciones de datos con una determinada estructura. En R existen varios
tipos tipos estructurados de datos que pueden clasificarse de acuerdo a
su dimensión y a si son homogéneos (todos sus elementos son del mismo
tipo) o heterogéneos.

\begin{longtable}[]{@{}ccc@{}}
\toprule\noalign{}
Dimensiones & Homogéneos & Heterogéneos \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
1 & Vector & Lista \\
2 & Matriz & Data frame \\
n & Array & \\
\end{longtable}

Para averiguar la estructura de un dato estructurado se puede utilizar
la función siguiente:

\begin{itemize}
\tightlist
\item
  \texttt{str(x)}: Devuelve una cadena de texto con la estructura de
  \texttt{x} en un formato amigable para las personas.
\end{itemize}

\section{Vectores}\label{vectores}

El vector es el tipo de dato estructurado más básicos en R. Un vector es
una colección ordenada de elementos del mismo tipo.

\subsection{Creación de vectores}\label{creaciuxf3n-de-vectores}

Para construir un vector se utiliza la función de combinación
\texttt{c()}:

\begin{itemize}
\tightlist
\item
  \texttt{c(x1,\ x2,\ ...)}: Devuelve el vector formado por los
  elementos \texttt{x1}, \texttt{x2}, etc.
\end{itemize}

También es posible utilizar el operador \texttt{:} para generar un
vector de números enteros consecutivos:

\begin{itemize}
\tightlist
\item
  \texttt{x:y}: Devuelve el vector de números enteros consecutivos desde
  \texttt{x} hasta \texttt{y}.
\end{itemize}

\begin{example}[]\protect\hypertarget{exm-construccion-vectores}{}\label{exm-construccion-vectores}

~

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{c}\NormalTok{(}\DecValTok{1}\NormalTok{, }\DecValTok{2}\NormalTok{, }\DecValTok{3}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 1 2 3
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{c}\NormalTok{(}\StringTok{"uno"}\NormalTok{, }\StringTok{"dos"}\NormalTok{, }\StringTok{"tres"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] "uno"  "dos"  "tres"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Vector vacío}
\FunctionTok{c}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
NULL
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Vector con elementos perdidos}
\FunctionTok{c}\NormalTok{(}\DecValTok{1}\NormalTok{, }\ConstantTok{NA}\NormalTok{, }\DecValTok{3}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1]  1 NA  3
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Vector de números enteros consecutivos del 2 al 6}
\DecValTok{2}\SpecialCharTok{:}\DecValTok{6}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 2 3 4 5 6
\end{verbatim}

\end{example}

\subsubsection{Vectores con nombres}\label{vectores-con-nombres}

Es posible asignar un nombre a cada elemento de un vector. Los nombres
son etiquetas de texto que se asocian a cada elemento. Para asociar un
nombre a un elemento se utiliza la sintaxis \texttt{nombre\ =\ valor},
donde \texttt{nombre} es una cadena de caracteres y \texttt{valor} es el
elemento del vector.

\begin{example}[]\protect\hypertarget{exm-vectores-con-nombre}{}\label{exm-vectores-con-nombre}

~

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{c}\NormalTok{(}\StringTok{"Matemáticas"} \OtherTok{=} \FloatTok{8.2}\NormalTok{, }\StringTok{"Física"} \OtherTok{=} \FloatTok{6.5}\NormalTok{, }\StringTok{"Economía"} \OtherTok{=} \FloatTok{4.5}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
Matemáticas      Física    Economía 
        8.2         6.5         4.5 
\end{verbatim}

\end{example}

Para acceder a los nombres de un vector se utiliza la siguiente función:

\begin{itemize}
\tightlist
\item
  \texttt{names(x)}: Devuelve un vector de cadenas de caracteres con los
  nombres de los elementos del vector \texttt{x}.
\end{itemize}

\begin{example}[]\protect\hypertarget{exm-acceso-nombres-vector}{}\label{exm-acceso-nombres-vector}

~

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{notas }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(}\StringTok{"Matemáticas"} \OtherTok{=} \FloatTok{8.2}\NormalTok{, }\StringTok{"Física"} \OtherTok{=} \FloatTok{6.5}\NormalTok{, }\StringTok{"Economía"} \OtherTok{=} \FloatTok{4.5}\NormalTok{)}
\FunctionTok{names}\NormalTok{(notas)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] "Matemáticas" "Física"      "Economía"   
\end{verbatim}

\end{example}

\subsection{Tamaño de un vector}\label{tamauxf1o-de-un-vector}

El número de elementos de un vector es su \emph{tamaño} y puede
averiguarse con la siguiente función.

\begin{itemize}
\tightlist
\item
  \texttt{lenght(x)}: Devuelve el número de elementos del vector
  \texttt{x}.
\end{itemize}

\begin{example}[]\protect\hypertarget{exm-tamaño-vector}{}\label{exm-tamaño-vector}

~

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{length}\NormalTok{(}\FunctionTok{c}\NormalTok{(}\DecValTok{1}\NormalTok{, }\DecValTok{2}\NormalTok{, }\DecValTok{3}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 3
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{length}\NormalTok{(}\FunctionTok{c}\NormalTok{())}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 0
\end{verbatim}

\end{example}

\subsection{Coerción de elementos}\label{coerciuxf3n-de-elementos}

Puesto que los elementos de un vector tienen que ser del mismo tipo,
cuando se crea un vector con datos de distintos tipos, la función
\texttt{c()} los convertirá al mismo tipo, lo que se conoce como
\emph{coerción} de tipos. La coerción se produce de los tipos menos
flexibles a los más flexibles: \texttt{logical} \textless{}
\texttt{integer} \textless{} \texttt{double} \textless{}
\texttt{character}.

\begin{example}[]\protect\hypertarget{exm-coercion}{}\label{exm-coercion}

~

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{c}\NormalTok{(}\DecValTok{1}\NormalTok{, }\FloatTok{2.5}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 1.0 2.5
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{c}\NormalTok{(}\ConstantTok{FALSE}\NormalTok{, }\ConstantTok{TRUE}\NormalTok{, }\DecValTok{2}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 0 1 2
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{c}\NormalTok{(}\ConstantTok{FALSE}\NormalTok{, }\ConstantTok{TRUE}\NormalTok{, }\DecValTok{2}\NormalTok{, }\StringTok{"tres"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] "FALSE" "TRUE"  "2"     "tres" 
\end{verbatim}

\end{example}

\subsection{Acceso a los elementos de un
vector}\label{acceso-a-los-elementos-de-un-vector}

Para acceder a los elementos de un vector se utiliza un índice. Como
veremos a continuación, este índice puede ser entero, lógico o de cadena
de caracteres y se indica siempre entre corchetes \texttt{{[}\ {]}} a
continuación del vector.

\subsubsection{Acceso mediante un índice
entero}\label{acceso-mediante-un-uxedndice-entero}

Los elementos de un vector están ordenados y el acceso más simple a
ellos es mediante su número de orden, es decir, indicando entre
corchetes \texttt{{[}\ {]}} el entero que corresponde a su número de
orden. Se puede acceder simultáneamente a varios elementos mediante un
vector con sus números de orden.

\begin{tcolorbox}[enhanced jigsaw, opacitybacktitle=0.6, toptitle=1mm, opacityback=0, bottomrule=.15mm, colbacktitle=quarto-callout-warning-color!10!white, leftrule=.75mm, toprule=.15mm, title=\textcolor{quarto-callout-warning-color}{\faExclamationTriangle}\hspace{0.5em}{Advertencia}, colframe=quarto-callout-warning-color-frame, titlerule=0mm, colback=white, arc=.35mm, rightrule=.15mm, coltitle=black, left=2mm, breakable, bottomtitle=1mm]

En R los índices enteros para acceder a los elementos de un vector
comienzan en 1, a diferencia de otros lenguajes de programación que
empiezan en 0.

\end{tcolorbox}

\begin{example}[]\protect\hypertarget{exm-acceso-vector}{}\label{exm-acceso-vector}

~

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(}\DecValTok{2}\NormalTok{,}\DecValTok{4}\NormalTok{,}\DecValTok{6}\NormalTok{,}\DecValTok{8}\NormalTok{,}\DecValTok{10}\NormalTok{)}
\CommentTok{\# Acceso al elemento que está en la tercera posición}
\NormalTok{x[}\DecValTok{3}\NormalTok{]}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 6
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Acceso a los elementos de las posiciones 2 y 4}
\NormalTok{x[}\FunctionTok{c}\NormalTok{(}\DecValTok{2}\NormalTok{, }\DecValTok{4}\NormalTok{)]}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 4 8
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Acceso a los elementos de la posición 2 a la 4}
\NormalTok{x[}\DecValTok{2}\SpecialCharTok{:}\DecValTok{4}\NormalTok{]}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 4 6 8
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Acceso a todos los elementos excepto el primero y el cuarto}
\NormalTok{x[}\FunctionTok{c}\NormalTok{(}\SpecialCharTok{{-}}\DecValTok{1}\NormalTok{, }\SpecialCharTok{{-}}\DecValTok{4}\NormalTok{)]}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1]  4  6 10
\end{verbatim}

\end{example}

\subsubsection{Acceso mediante un índice
lógico}\label{acceso-mediante-un-uxedndice-luxf3gico}

Cuando se utiliza un índice lógico, se obtienen los elementos
correspondientes a las posiciones donde está el valor booleano
\texttt{TRUE}.

\begin{example}[]\protect\hypertarget{exm-acceso-vector-indice-logico}{}\label{exm-acceso-vector-indice-logico}

~

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(}\DecValTok{2}\NormalTok{,}\DecValTok{4}\NormalTok{,}\DecValTok{6}\NormalTok{,}\DecValTok{8}\NormalTok{,}\DecValTok{10}\NormalTok{)}
\CommentTok{\# Acceso al elemento que está en la tercera posición}
\NormalTok{x[}\FunctionTok{c}\NormalTok{(F,F,T,F,F)]}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 6
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Acceso a los elementos de las posiciones 2 y 4}
\NormalTok{x[}\FunctionTok{c}\NormalTok{(F,T,F,T,F)]}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 4 8
\end{verbatim}

\end{example}

Esta forma de acceder es útil cuando se genera el vector de índices
mediante operadores relacionales. Cuando se aplica un operador
relacional a un vector se obtiene otro vector lógico que resulta de
aplicar el operador relacional a cada uno de los elementos del vector.
De esta manera se puede realizar filtros para obtener los elementos de
un vector que cumplen una determinada condición.

\begin{example}[]\protect\hypertarget{exm-filtros}{}\label{exm-filtros}

~

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x }\OtherTok{\textless{}{-}} \DecValTok{1}\SpecialCharTok{:}\DecValTok{6}
\NormalTok{x }\SpecialCharTok{\%\%} \DecValTok{2} \SpecialCharTok{==} \DecValTok{0}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] FALSE  TRUE FALSE  TRUE FALSE  TRUE
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Filtrado de los valores pares}
\NormalTok{x[x }\SpecialCharTok{\%\%} \DecValTok{2} \SpecialCharTok{==} \DecValTok{0}\NormalTok{]}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 2 4 6
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Filtrado de los valores pares menores que 5}
\NormalTok{x[x }\SpecialCharTok{\%\%} \DecValTok{2} \SpecialCharTok{==} \DecValTok{0} \SpecialCharTok{\&}\NormalTok{ x }\SpecialCharTok{\textless{}} \DecValTok{5}\NormalTok{]}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 2 4
\end{verbatim}

\end{example}

\subsubsection{Acceso mediante un índice de
cadena}\label{acceso-mediante-un-uxedndice-de-cadena}

Si los elementos de un vector tienen nombre, es posible acceder a ellos
usando sus nombres como índices.

\begin{example}[]\protect\hypertarget{exm-acceso-vector-nombres}{}\label{exm-acceso-vector-nombres}

~

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{notas }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(}\StringTok{"Matemáticas"} \OtherTok{=} \FloatTok{8.2}\NormalTok{, }\StringTok{"Física"} \OtherTok{=} \FloatTok{6.5}\NormalTok{, }\StringTok{"Economía"} \OtherTok{=} \FloatTok{4.5}\NormalTok{)}
\NormalTok{notas[}\StringTok{"Física"}\NormalTok{]}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
Física 
   6.5 
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{notas[}\FunctionTok{c}\NormalTok{(}\StringTok{"Matemáticas"}\NormalTok{, }\StringTok{"Economía"}\NormalTok{)]}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
Matemáticas    Economía 
        8.2         4.5 
\end{verbatim}

\end{example}

\subsection{Pertenencia a un vector}\label{pertenencia-a-un-vector}

Para comprobar si un valor en particular es un elemento de un vector se
puede utilizar el operador \texttt{\%in\%}:

\begin{itemize}
\tightlist
\item
  \texttt{x\ \%in\%\ y}: Devuelve el booleano \texttt{TRUE} si
  \texttt{x} es un elemento del vector \texttt{y}, y \texttt{FALSE} en
  caso contrario.
\end{itemize}

\begin{example}[]\protect\hypertarget{exm-pertenencia-vector}{}\label{exm-pertenencia-vector}

~

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x }\OtherTok{\textless{}{-}} \DecValTok{1}\SpecialCharTok{:}\DecValTok{3}
\DecValTok{2} \SpecialCharTok{\%in\%}\NormalTok{ x}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] TRUE
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\DecValTok{4} \SpecialCharTok{\%in\%}\NormalTok{ x}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] FALSE
\end{verbatim}

\end{example}

\subsection{Modificación de los elementos de un
vector}\label{modificaciuxf3n-de-los-elementos-de-un-vector}

Para modificar uno o varios elementos de un vector basta con acceder a
esos elementos y usar el operador de asignación para asignar nuevos
valores.

\begin{itemize}
\tightlist
\item
  \texttt{v{[}i{]}\ \textless{}-\ x}: Asigna el dato \texttt{x} a la
  posición \texttt{i} del vector \texttt{v}.
\item
  \texttt{v{[}c(i,j,...){]}\ \textless{}-\ x}: Asigna el dato \texttt{x}
  a las posiciones \texttt{i}, \texttt{j}, etc. del vector \texttt{v}.
\end{itemize}

\begin{example}[]\protect\hypertarget{exm-modificacion-vectores}{}\label{exm-modificacion-vectores}

~

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(}\DecValTok{1}\NormalTok{, }\DecValTok{2}\NormalTok{, }\DecValTok{3}\NormalTok{)}
\NormalTok{x[}\DecValTok{2}\NormalTok{] }\OtherTok{\textless{}{-}} \DecValTok{0}
\NormalTok{x}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 1 0 3
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x[}\FunctionTok{c}\NormalTok{(}\DecValTok{1}\NormalTok{, }\DecValTok{3}\NormalTok{)] }\OtherTok{\textless{}{-}} \DecValTok{1}
\NormalTok{x}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 1 0 1
\end{verbatim}

\end{example}

\subsection{Añadir elementos a un
vector}\label{auxf1adir-elementos-a-un-vector}

Para añadir nuevos elementos a un vector pueden usarse las siguientes
funciones:

\begin{itemize}
\tightlist
\item
  \texttt{c(x,\ y)}: Devuelve el vector que resulta de añadir al vector
  \texttt{x} los elementos del vector \texttt{y}.
\item
  \texttt{append(x,\ y,\ pos)}: Devuelve el vector que resulta de añadir
  al vector \texttt{x} los elementos del vector \texttt{y}, a
  continuación de la posición \texttt{pos}. El parámetro \texttt{pos} es
  opcional y si no se indica, los elementos de \texttt{y} se añaden al
  final de los de \texttt{x}.
\end{itemize}

\begin{example}[]\protect\hypertarget{exm-añadir-elementos-vector}{}\label{exm-añadir-elementos-vector}

~

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(}\DecValTok{1}\NormalTok{, }\DecValTok{2}\NormalTok{, }\DecValTok{3}\NormalTok{)}
\FunctionTok{c}\NormalTok{(x, }\FunctionTok{c}\NormalTok{(}\DecValTok{4}\NormalTok{, }\DecValTok{5}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 1 2 3 4 5
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{append}\NormalTok{(x, }\FunctionTok{c}\NormalTok{(}\DecValTok{4}\NormalTok{, }\DecValTok{5}\NormalTok{), }\DecValTok{2}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 1 2 4 5 3
\end{verbatim}

\end{example}

\subsection{Eliminar elementos de un
vector}\label{eliminar-elementos-de-un-vector}

Para eliminar los elementos que ocupan una determinada posición se
utiliza el operador de acceso, es decir, los corchetes \texttt{{[}\ {]}}
pero con los índices correspondientes a las posiciones a eliminar, en
negativo.

\begin{example}[]\protect\hypertarget{exm-eliminar-elementos-vector}{}\label{exm-eliminar-elementos-vector}

~

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(}\StringTok{"a"}\NormalTok{, }\StringTok{"b"}\NormalTok{, }\StringTok{"c"}\NormalTok{, }\StringTok{"d"}\NormalTok{, }\StringTok{"e"}\NormalTok{)}
\NormalTok{x[}\SpecialCharTok{{-}}\DecValTok{3}\NormalTok{]}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] "a" "b" "d" "e"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x[}\SpecialCharTok{{-}}\FunctionTok{c}\NormalTok{(}\DecValTok{2}\NormalTok{,}\DecValTok{4}\NormalTok{)]}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] "a" "c" "e"
\end{verbatim}

\end{example}

\subsection{Eliminación de un vector}\label{eliminaciuxf3n-de-un-vector}

Para eliminar los elementos de un vector basta con asignar \texttt{NULL}
a la variable que lo contiene, pero si se quiere liberar la memoria que
ocupa la variable se utiliza la función \texttt{rm()}.

\subsection{Operaciones aritméticas con
vectores}\label{operaciones-aritmuxe9ticas-con-vectores}

\subsubsection{Operaciones aritméticas elemento a
elemento}\label{operaciones-aritmuxe9ticas-elemento-a-elemento}

Para vectores numéricos las operaciones aritméticas habituales se
aplican elemento a elemento. Si los vectores tienen distinto tamaño, el
tamaño del vector más pequeño se equipara al tamaño del mayor,
reutilizando sus elementos, empezando por el primero.

\begin{example}[]\protect\hypertarget{exm-operaciones-aritmeticas-vectores}{}\label{exm-operaciones-aritmeticas-vectores}

~

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(}\DecValTok{1}\NormalTok{, }\DecValTok{2}\NormalTok{, }\DecValTok{3}\NormalTok{)}
\NormalTok{y }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(}\DecValTok{0}\NormalTok{, }\DecValTok{1}\NormalTok{, }\SpecialCharTok{{-}}\DecValTok{1}\NormalTok{)}
\NormalTok{x }\SpecialCharTok{+}\NormalTok{ y}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 1 3 2
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x }\SpecialCharTok{*}\NormalTok{ y}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1]  0  2 -3
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x }\SpecialCharTok{/}\NormalTok{ y}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] Inf   2  -3
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x }\SpecialCharTok{\^{}}\NormalTok{ y}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 1.0000000 2.0000000 0.3333333
\end{verbatim}

\end{example}

\subsubsection{Producto escalar de
vectores}\label{producto-escalar-de-vectores}

Para calcular el producto escalar de dos vectores numéricos se utiliza
el operador \texttt{\%*\%}. Si los vectores tienen distinto tamaño se
produce un error.

\begin{example}[]\protect\hypertarget{exm-producto-escalar}{}\label{exm-producto-escalar}

~

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(}\DecValTok{1}\NormalTok{, }\DecValTok{2}\NormalTok{, }\DecValTok{3}\NormalTok{)}
\NormalTok{y }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(}\DecValTok{0}\NormalTok{, }\DecValTok{1}\NormalTok{, }\SpecialCharTok{{-}}\DecValTok{1}\NormalTok{)}
\NormalTok{x }\SpecialCharTok{\%*\%}\NormalTok{ y}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
     [,1]
[1,]   -1
\end{verbatim}

\end{example}

\section{Factores}\label{factores}

\subsection{Operaciones con factores}\label{operaciones-con-factores}

Un factor es una estructura de datos especial que se utiliza para
representar categorías de variables cualitativas y por tanto puede tomar
un conjunto finito de valores predefinidos conocido como \emph{niveles}
del factor.

Para definir un factor se utiliza la siguiente función:

\begin{itemize}
\tightlist
\item
  \texttt{factor(x,\ levels\ =\ niveles)}: Crea un dato de tipo factor
  con los elementos del vector \texttt{x}. Los niveles del factor pueden
  indicarse mediante el parámetro \texttt{levels}, pasándole un vector
  con los valores posibles. Si no se indica el parámetro \texttt{levels}
  los niveles del factor se obtienen automáticamente a partir de los
  elementos del vector \texttt{x} (tantos niveles con valores distintos
  tenga).
\end{itemize}

Los factores son en realidad vectores de números enteros a los que se le
añade un atributo especial para indicar los niveles del factor.

\begin{example}[]\protect\hypertarget{exm-creacion-factores}{}\label{exm-creacion-factores}

~

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{sexo }\OtherTok{\textless{}{-}} \FunctionTok{factor}\NormalTok{(}\FunctionTok{c}\NormalTok{(}\StringTok{"mujer"}\NormalTok{, }\StringTok{"hombre"}\NormalTok{, }\StringTok{"mujer"}\NormalTok{))}
\NormalTok{sexo}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] mujer  hombre mujer 
Levels: hombre mujer
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{class}\NormalTok{(sexo)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] "factor"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{str}\NormalTok{(sexo)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
 Factor w/ 2 levels "hombre","mujer": 2 1 2
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{grupo.sanguineo }\OtherTok{\textless{}{-}} \FunctionTok{factor}\NormalTok{(}\FunctionTok{c}\NormalTok{(}\StringTok{"B"}\NormalTok{, }\StringTok{"A"}\NormalTok{, }\StringTok{"A"}\NormalTok{), }\AttributeTok{levels =} \FunctionTok{c}\NormalTok{(}\StringTok{"A"}\NormalTok{, }\StringTok{"B"}\NormalTok{, }\StringTok{"AB"}\NormalTok{, }\StringTok{"0"}\NormalTok{), )}
\NormalTok{grupo.sanguineo}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] B A A
Levels: A B AB 0
\end{verbatim}

\end{example}

Es posible establecer un orden entre los niveles de un factor añadiendo
el parámetro \texttt{ordered\ =\ TRUE} a la función anterior. Esto es
útil para representar categorías ordinales entre las que existe un orden
natural.

\begin{example}[]\protect\hypertarget{exm-creacion-factor-ordenado}{}\label{exm-creacion-factor-ordenado}

~

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{nivel.estudio }\OtherTok{\textless{}{-}} \FunctionTok{factor}\NormalTok{(}\FunctionTok{c}\NormalTok{(}\StringTok{"Secundarios"}\NormalTok{, }\StringTok{"Graduado"}\NormalTok{, }\StringTok{"Bachiller"}\NormalTok{), }\AttributeTok{levels =} \FunctionTok{c}\NormalTok{(}\StringTok{"Sin estudios"}\NormalTok{, }\StringTok{"Primarios"}\NormalTok{, }\StringTok{"Secundarios"}\NormalTok{, }\StringTok{"Bachiller"}\NormalTok{, }\StringTok{"Graduado"}\NormalTok{), }\AttributeTok{ordered =} \ConstantTok{TRUE}\NormalTok{)}
\NormalTok{nivel.estudio}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] Secundarios Graduado    Bachiller  
Levels: Sin estudios < Primarios < Secundarios < Bachiller < Graduado
\end{verbatim}

\end{example}

Para comprobar si una estructura es del tipo factor se utiliza la
siguiente función:

\begin{itemize}
\tightlist
\item
  \texttt{is.factor(x)}: Devuelve el booleano \texttt{TRUE} si
  \texttt{x} es del tipo factor, y \texttt{FALSE} en caso contrario.
\end{itemize}

\subsection{Acceso a los elementos de un
factor}\label{acceso-a-los-elementos-de-un-factor}

Se puede acceder a los elementos de un factor de la misma manera que se
accede a los elementos de un vector. Y para obtener sus niveles se
utiliza la siguiente función:

\begin{itemize}
\tightlist
\item
  \texttt{levels(x)}: Devuelve un vector con los niveles del factor
  \texttt{x}.
\end{itemize}

\begin{example}[]\protect\hypertarget{exm-niveles-factor}{}\label{exm-niveles-factor}

~

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{sexo }\OtherTok{\textless{}{-}} \FunctionTok{factor}\NormalTok{(}\FunctionTok{c}\NormalTok{(}\StringTok{"mujer"}\NormalTok{, }\StringTok{"hombre"}\NormalTok{, }\StringTok{"mujer"}\NormalTok{))}
\NormalTok{sexo[}\DecValTok{2}\NormalTok{]}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] hombre
Levels: hombre mujer
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{sexo[}\FunctionTok{c}\NormalTok{(}\DecValTok{1}\NormalTok{, }\DecValTok{2}\NormalTok{)]}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] mujer  hombre
Levels: hombre mujer
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{sexo[}\SpecialCharTok{{-}}\DecValTok{2}\NormalTok{]}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] mujer mujer
Levels: hombre mujer
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{levels}\NormalTok{(sexo)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] "hombre" "mujer" 
\end{verbatim}

\end{example}

\subsection{Modificación de los elementos de un
factor}\label{modificaciuxf3n-de-los-elementos-de-un-factor}

Se puede modificar los elementos de un factor de manera similar a como
se modifican los elementos de un vector, es decir accediendo al elemento
que se quiere modificar y asignándole un nuevo valor. La única
diferencia con los vectores es que si el nuevo valor que se quiere
asignar no está entre los niveles del factor, se obtiene el valor
\texttt{NA}.

\begin{example}[]\protect\hypertarget{exm-modificacion-factor}{}\label{exm-modificacion-factor}

A continuación se muestran varios de modificación de los elementos de un
factor.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{grupo.sanguineo }\OtherTok{\textless{}{-}} \FunctionTok{factor}\NormalTok{(}\FunctionTok{c}\NormalTok{(}\StringTok{"B"}\NormalTok{, }\StringTok{"A"}\NormalTok{, }\StringTok{"A"}\NormalTok{), }\AttributeTok{levels =} \FunctionTok{c}\NormalTok{(}\StringTok{"A"}\NormalTok{, }\StringTok{"B"}\NormalTok{, }\StringTok{"AB"}\NormalTok{, }\StringTok{"0"}\NormalTok{))}
\NormalTok{grupo.sanguineo}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] B A A
Levels: A B AB 0
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{grupo.sanguineo[}\DecValTok{2}\NormalTok{] }\OtherTok{\textless{}{-}} \StringTok{"AB"}
\NormalTok{grupo.sanguineo}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] B  AB A 
Levels: A B AB 0
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{grupo.sanguineo[}\DecValTok{1}\NormalTok{] }\OtherTok{\textless{}{-}} \StringTok{"C"}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
Warning in `[<-.factor`(`*tmp*`, 1, value = "C"): invalid factor level, NA
generated
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{grupo.sanguineo}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] <NA> AB   A   
Levels: A B AB 0
\end{verbatim}

\end{example}

Obsérvese en el ejemplo anterior que cuando se intenta asignar un valor
a un factor que no está entre sus niveles, se produce un error.

\section{Listas}\label{listas}

Las listas son colecciones ordenadas de elementos que pueden ser de
distintos tipos. Los elementos de una lista también pueden ser de tipos
estructurados (vectores o listas), lo que las convierte en el tipo de
dato más versátil de R. Como veremos más adelante, otras estructuras de
datos como los \emph{data frames} o los propios modelos estadísticos se
construyen usando listas.

\subsection{Creación de listas}\label{creaciuxf3n-de-listas}

Para construir una lista se utiliza la función \texttt{list()}:

\begin{itemize}
\tightlist
\item
  \texttt{list(x1,\ x2,\ ...)}: Devuelve la lista con los elementos
  \texttt{x1}, \texttt{x2}, etc.
\end{itemize}

\begin{example}[]\protect\hypertarget{exm-creacion-listas}{}\label{exm-creacion-listas}

~

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{list}\NormalTok{(}\DecValTok{1}\NormalTok{, }\StringTok{"dos"}\NormalTok{, }\ConstantTok{TRUE}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[[1]]
[1] 1

[[2]]
[1] "dos"

[[3]]
[1] TRUE
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Lista con vectores y listas}
\NormalTok{x }\OtherTok{\textless{}{-}} \FunctionTok{list}\NormalTok{(}\DecValTok{1}\NormalTok{, }\FunctionTok{c}\NormalTok{(}\StringTok{"dos"}\NormalTok{, }\StringTok{"tres"}\NormalTok{), }\FunctionTok{list}\NormalTok{(}\DecValTok{4}\NormalTok{, }\StringTok{"cinco"}\NormalTok{))}
\NormalTok{x}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[[1]]
[1] 1

[[2]]
[1] "dos"  "tres"

[[3]]
[[3]][[1]]
[1] 4

[[3]][[2]]
[1] "cinco"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{str}\NormalTok{(x)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
List of 3
 $ : num 1
 $ : chr [1:2] "dos" "tres"
 $ :List of 2
  ..$ : num 4
  ..$ : chr "cinco"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Lista vacía}
\FunctionTok{list}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
list()
\end{verbatim}

\end{example}

\subsubsection{Listas con nombres}\label{listas-con-nombres}

Al igual que con los vectores, es posible asignar un nombre a cada uno
de los elementos de una lista.

\begin{example}[]\protect\hypertarget{exm-creacion-listas-nombres}{}\label{exm-creacion-listas-nombres}

~

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{list}\NormalTok{(}\StringTok{"nombre"} \OtherTok{=} \StringTok{"María"}\NormalTok{, }\StringTok{"edad"} \OtherTok{=} \DecValTok{21}\NormalTok{, }\StringTok{"dirección"} \OtherTok{=} \FunctionTok{list}\NormalTok{(}\StringTok{"calle"} \OtherTok{=} \StringTok{"Delicias"}\NormalTok{, }\StringTok{"número"} \OtherTok{=} \DecValTok{24}\NormalTok{, }\StringTok{"municipio"} \OtherTok{=} \StringTok{"Madrid"}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
$nombre
[1] "María"

$edad
[1] 21

$dirección
$dirección$calle
[1] "Delicias"

$dirección$número
[1] 24

$dirección$municipio
[1] "Madrid"
\end{verbatim}

\end{example}

Para obtener los nombres de una lista se utiliza la siguiente función:

\begin{itemize}
\tightlist
\item
  \texttt{names(x)}: Devuelve un vector de cadenas de caracteres con los
  nombres de los elementos de la lista \texttt{x}.
\end{itemize}

\begin{example}[]\protect\hypertarget{exm-acceso-listas}{}\label{exm-acceso-listas}

~

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{persona }\OtherTok{\textless{}{-}} \FunctionTok{list}\NormalTok{(}\StringTok{"nombre"} \OtherTok{=} \StringTok{"María"}\NormalTok{, }\StringTok{"edad"} \OtherTok{=} \DecValTok{21}\NormalTok{, }\StringTok{"dirección"} \OtherTok{=} \FunctionTok{list}\NormalTok{(}\StringTok{"calle"} \OtherTok{=} \StringTok{"Delicias"}\NormalTok{, }\StringTok{"número"} \OtherTok{=} \DecValTok{24}\NormalTok{, }\StringTok{"municipio"} \OtherTok{=} \StringTok{"Madrid"}\NormalTok{))}
\FunctionTok{names}\NormalTok{(persona)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] "nombre"    "edad"      "dirección"
\end{verbatim}

\end{example}

\subsection{Tamaño de una lista}\label{tamauxf1o-de-una-lista}

El número de elementos de una lista es su \emph{tamaño} y puede
averiguarse con la siguiente función:

\begin{itemize}
\tightlist
\item
  \texttt{lenght(x)}: Devuelve el número de elementos de la lista
  \texttt{x}.
\end{itemize}

\begin{example}[]\protect\hypertarget{exm-tamaño-lista}{}\label{exm-tamaño-lista}

~

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{length}\NormalTok{(}\FunctionTok{list}\NormalTok{(}\DecValTok{1}\NormalTok{, }\StringTok{"dos"}\NormalTok{, }\ConstantTok{TRUE}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 3
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{length}\NormalTok{(}\FunctionTok{list}\NormalTok{(}\DecValTok{1}\NormalTok{, }\FunctionTok{c}\NormalTok{(}\StringTok{"dos"}\NormalTok{, }\StringTok{"tres"}\NormalTok{), }\FunctionTok{list}\NormalTok{(}\DecValTok{4}\NormalTok{, }\StringTok{"cinco"}\NormalTok{)))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 3
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{length}\NormalTok{(}\FunctionTok{list}\NormalTok{())}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 0
\end{verbatim}

\end{example}

\subsection{Acceso a los elementos de una
lista}\label{acceso-a-los-elementos-de-una-lista}

Se accede a los elementos de una lista de forma similar a los vectores,
mediante índices enteros, lógicos o de cadena, entre corchetes
\texttt{{[}\ {]}}.

\subsubsection{Acceso mediante un índice
entero}\label{acceso-mediante-un-uxedndice-entero-1}

Al igual que los vectores, los elementos de una lista están ordenados y
se puede utilizar un índice entero para acceder a los elementos que
ocupan una determinada posición.

\begin{example}[]\protect\hypertarget{exm-acceso-lista-indice-entero}{}\label{exm-acceso-lista-indice-entero}

~

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x }\OtherTok{\textless{}{-}} \FunctionTok{list}\NormalTok{(}\DecValTok{1}\NormalTok{, }\StringTok{"dos"}\NormalTok{, }\ConstantTok{TRUE}\NormalTok{, }\FloatTok{4.5}\NormalTok{)}
\CommentTok{\# Acceso al elemento que está en la segunda posición}
\NormalTok{x[}\DecValTok{2}\NormalTok{]}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[[1]]
[1] "dos"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Acceso a los elementos de las posiciones 1 y 3}
\NormalTok{x[}\FunctionTok{c}\NormalTok{(}\DecValTok{1}\NormalTok{, }\DecValTok{3}\NormalTok{)]}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[[1]]
[1] 1

[[2]]
[1] TRUE
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Acceso a todos los elementos excepto el primero y el cuarto}
\NormalTok{x[}\FunctionTok{c}\NormalTok{(}\SpecialCharTok{{-}}\DecValTok{1}\NormalTok{, }\SpecialCharTok{{-}}\DecValTok{4}\NormalTok{)]}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[[1]]
[1] "dos"

[[2]]
[1] TRUE
\end{verbatim}

\end{example}

\subsubsection{Acceso mediante un índice
lógico}\label{acceso-mediante-un-uxedndice-luxf3gico-1}

Cuando se utiliza un índice lógico, se obtienen los elementos
correspondientes a las posiciones donde está el valor booleano
\texttt{TRUE}.

\begin{example}[]\protect\hypertarget{exm-acceso-listas-logico}{}\label{exm-acceso-listas-logico}

~

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x }\OtherTok{\textless{}{-}} \FunctionTok{list}\NormalTok{(}\DecValTok{1}\NormalTok{, }\StringTok{"dos"}\NormalTok{, }\ConstantTok{TRUE}\NormalTok{, }\FloatTok{4.5}\NormalTok{)}
\NormalTok{x[}\FunctionTok{c}\NormalTok{(T,F,F,T)]}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[[1]]
[1] 1

[[2]]
[1] 4.5
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x }\SpecialCharTok{\textless{}} \DecValTok{2}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
Warning: NAs introducidos por coerción
\end{verbatim}

\begin{verbatim}
[1]  TRUE    NA  TRUE FALSE
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Filtrado de valores menores que 2}
\NormalTok{x[x }\SpecialCharTok{\textless{}} \DecValTok{2}\NormalTok{]}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
Warning: NAs introducidos por coerción
\end{verbatim}

\begin{verbatim}
[[1]]
[1] 1

[[2]]
NULL

[[3]]
[1] TRUE
\end{verbatim}

Obsérvese que para los elementos que no tiene sentido la comparación se
obtiene \texttt{NA}, y que el acceso mediante este índice devuelve
\texttt{NULL}.

\end{example}

\subsubsection{Acceso mediante nombres}\label{acceso-mediante-nombres}

Si los elementos de una lista tienen nombre, se puede acceder a ellos
utilizando sus nombres como índices. La única diferencia con el acceso
mediante cadenas de vectores es que se obtiene siempre una lista,
incluso cuando sólo se quiere acceder a un elemento. Para obtener un
elemento, y no una lista con ese único elemento, se utilizan dobles
corchetes \texttt{{[}{[}\ {]}{]}}.

\begin{example}[]\protect\hypertarget{exm-acceso-listas-nombres}{}\label{exm-acceso-listas-nombres}

~

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{persona }\OtherTok{\textless{}{-}} \FunctionTok{list}\NormalTok{(}\StringTok{"nombre"} \OtherTok{=} \StringTok{"María"}\NormalTok{, }\StringTok{"edad"} \OtherTok{=} \DecValTok{21}\NormalTok{, }\StringTok{"dirección"} \OtherTok{=} \FunctionTok{list}\NormalTok{(}\StringTok{"calle"} \OtherTok{=} \StringTok{"Delicias"}\NormalTok{, }\StringTok{"número"} \OtherTok{=} \DecValTok{24}\NormalTok{, }\StringTok{"municipio"} \OtherTok{=} \StringTok{"Madrid"}\NormalTok{))}
\NormalTok{persona[}\FunctionTok{c}\NormalTok{(}\StringTok{"edad"}\NormalTok{, }\StringTok{"nombre"}\NormalTok{)]}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
$edad
[1] 21

$nombre
[1] "María"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{persona[}\StringTok{"nombre"}\NormalTok{]}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
$nombre
[1] "María"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{typeof}\NormalTok{(persona[}\StringTok{"nombre"}\NormalTok{])}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] "list"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Acceso a un único elemento}
\NormalTok{persona[[}\StringTok{"nombre"}\NormalTok{]]}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] "María"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Acceso a una lista anidada}
\NormalTok{persona[[}\StringTok{"dirección"}\NormalTok{]][[}\StringTok{"municipio"}\NormalTok{]]}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] "Madrid"
\end{verbatim}

\end{example}

Una alternativa a los dobles corchetes es el operador de acceso a listas
\texttt{\$}. Este operador además permite utilizar coincidencias
parciales en los nombres de los elementos para acceder a ellos.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{persona }\OtherTok{\textless{}{-}} \FunctionTok{list}\NormalTok{(}\StringTok{"nombre"} \OtherTok{=} \StringTok{"María"}\NormalTok{, }\StringTok{"edad"} \OtherTok{=} \DecValTok{21}\NormalTok{, }\StringTok{"dirección"} \OtherTok{=} \FunctionTok{list}\NormalTok{(}\StringTok{"calle"} \OtherTok{=} \StringTok{"Delicias"}\NormalTok{, }\StringTok{"número"} \OtherTok{=} \DecValTok{24}\NormalTok{, }\StringTok{"municipio"} \OtherTok{=} \StringTok{"Madrid"}\NormalTok{))}
\CommentTok{\# Acceso a un único elemento}
\NormalTok{persona}\SpecialCharTok{$}\NormalTok{nombre}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] "María"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Acceso mediante coincidencia parcial}
\NormalTok{persona}\SpecialCharTok{$}\NormalTok{nom}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] "María"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Acceso a una lista anidada}
\NormalTok{persona}\SpecialCharTok{$}\NormalTok{dirección}\SpecialCharTok{$}\NormalTok{municipio}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] "Madrid"
\end{verbatim}

\subsection{Modificación de los elementos de una
lista}\label{modificaciuxf3n-de-los-elementos-de-una-lista}

Para modificar uno o varios elementos de una lista basta con acceder a
esos elementos y reasignarles valores con el operador de asignación.

\begin{example}[]\protect\hypertarget{exm-modificacion-listas}{}\label{exm-modificacion-listas}

~

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{persona }\OtherTok{\textless{}{-}} \FunctionTok{list}\NormalTok{(}\StringTok{"nombre"} \OtherTok{=} \StringTok{"María"}\NormalTok{, }\StringTok{"edad"} \OtherTok{=} \DecValTok{21}\NormalTok{)}
\NormalTok{persona}\SpecialCharTok{$}\NormalTok{edad }\OtherTok{\textless{}{-}} \DecValTok{22}
\NormalTok{persona}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
$nombre
[1] "María"

$edad
[1] 22
\end{verbatim}

\end{example}

\subsection{Añadir elementos a una
lista}\label{auxf1adir-elementos-a-una-lista}

La forma más sencilla de añadir un elemento con nombre a una lista es
indicando el nombre con el operador \texttt{\$} y asignándole un valor
con el operador de asignación \texttt{\textless{}-}:

\begin{itemize}
\tightlist
\item
  \texttt{x\$nombre\ \textless{}-\ y}: Añade el elemento \texttt{y} a la
  lista \texttt{x} con el nombre \texttt{nombre}.
\end{itemize}

El nuevo elemento se añade siempre al final de la lista.

Para añadir elementos sin nombre o en una posición determinada se puede
utilizar la función \texttt{append()}:

\begin{itemize}
\tightlist
\item
  \texttt{append(x,\ y,\ pos)}: Devuelve la lista vector que resulta de
  añadir a \texttt{x} los elementos de la lista \texttt{y}, a
  continuación de la posición \texttt{pos}. El parámetro \texttt{pos} es
  opcional y si no se indica, los elementos de \texttt{y} se añaden al
  final de los de \texttt{x}.
\end{itemize}

\begin{example}[]\protect\hypertarget{exm-añadir-elementos-listas}{}\label{exm-añadir-elementos-listas}

~

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{persona }\OtherTok{\textless{}{-}} \FunctionTok{list}\NormalTok{(}\StringTok{"nombre"} \OtherTok{=} \StringTok{"María"}\NormalTok{, }\StringTok{"edad"} \OtherTok{=} \DecValTok{21}\NormalTok{)}
\NormalTok{persona}\SpecialCharTok{$}\NormalTok{email }\OtherTok{\textless{}{-}} \StringTok{"maria@ceu.es"}
\NormalTok{persona}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
$nombre
[1] "María"

$edad
[1] 21

$email
[1] "maria@ceu.es"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{append}\NormalTok{(persona, }\FunctionTok{list}\NormalTok{(}\StringTok{"sexo"} \OtherTok{=} \StringTok{"Mujer"}\NormalTok{), }\DecValTok{2}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
$nombre
[1] "María"

$edad
[1] 21

$sexo
[1] "Mujer"

$email
[1] "maria@ceu.es"
\end{verbatim}

\end{example}

\subsection{Conversión de una lista en un
vector}\label{conversiuxf3n-de-una-lista-en-un-vector}

Es posible convertir una lista en un vector con la siguiente función:

\begin{itemize}
\tightlist
\item
  \texttt{unlist(x)}: Devuelve el vector que resulta de aplanar
  recursivamente la lista \texttt{x} y convertir todos los elementos al
  mismo tipo mediante coerción de tipos.
\end{itemize}

\begin{example}[]\protect\hypertarget{exm-aplanar-lista}{}\label{exm-aplanar-lista}

~

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{persona }\OtherTok{\textless{}{-}} \FunctionTok{list}\NormalTok{(}\StringTok{"nombre"} \OtherTok{=} \StringTok{"María"}\NormalTok{, }\StringTok{"edad"} \OtherTok{=} \DecValTok{21}\NormalTok{, }\StringTok{"dirección"} \OtherTok{=} \FunctionTok{list}\NormalTok{(}\StringTok{"calle"} \OtherTok{=} \StringTok{"Delicias"}\NormalTok{, }\StringTok{"número"} \OtherTok{=} \DecValTok{24}\NormalTok{, }\StringTok{"municipio"} \OtherTok{=} \StringTok{"Madrid"}\NormalTok{))}
\FunctionTok{unlist}\NormalTok{(persona)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
             nombre                edad     dirección.calle    dirección.número 
            "María"                "21"          "Delicias"                "24" 
dirección.municipio 
           "Madrid" 
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{typeof}\NormalTok{(}\FunctionTok{unlist}\NormalTok{(persona))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] "character"
\end{verbatim}

\end{example}

\begin{tcolorbox}[enhanced jigsaw, opacitybacktitle=0.6, toptitle=1mm, opacityback=0, bottomrule=.15mm, colbacktitle=quarto-callout-warning-color!10!white, leftrule=.75mm, toprule=.15mm, title=\textcolor{quarto-callout-warning-color}{\faExclamationTriangle}\hspace{0.5em}{Advertencia}, colframe=quarto-callout-warning-color-frame, titlerule=0mm, colback=white, arc=.35mm, rightrule=.15mm, coltitle=black, left=2mm, breakable, bottomtitle=1mm]

Obsérvese que cuando se convierte una lista en un vector, los elementos
de la lista se convierten al tipo más general mediante coerción.

\end{tcolorbox}

\section{Matrices}\label{matrices}

Una matriz es una estructura de datos bidimensional de elementos del
mismo tipo organizados en filas y columnas. Una matriz es similar a un
vector pero contiene una atributo adicional con sus dimensiones (número
de filas y número de columnas).

\subsection{Creación de matrices}\label{creaciuxf3n-de-matrices}

Para crear una matriz se utiliza la siguiente función:

\begin{itemize}
\tightlist
\item
  \texttt{matrix(x,\ nrow\ =\ m,\ ncol\ =\ n)}: Devuelve la matriz con
  los elementos del vector \texttt{x} organizados en \texttt{n} filas y
  \texttt{m} columnas. Habitualmente basta con especificar el número de
  filas o el número de columnas.
\end{itemize}

\begin{example}[]\protect\hypertarget{exm-creacion-matrices}{}\label{exm-creacion-matrices}

~

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{matrix}\NormalTok{(}\DecValTok{1}\SpecialCharTok{:}\DecValTok{6}\NormalTok{, }\AttributeTok{nrow =} \DecValTok{2}\NormalTok{, }\AttributeTok{ncol =} \DecValTok{3}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
     [,1] [,2] [,3]
[1,]    1    3    5
[2,]    2    4    6
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{matrix}\NormalTok{(}\DecValTok{1}\SpecialCharTok{:}\DecValTok{6}\NormalTok{, }\AttributeTok{nrow =} \DecValTok{2}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
     [,1] [,2] [,3]
[1,]    1    3    5
[2,]    2    4    6
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{matrix}\NormalTok{(}\DecValTok{1}\SpecialCharTok{:}\DecValTok{6}\NormalTok{, }\AttributeTok{ncol =} \DecValTok{3}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
     [,1] [,2] [,3]
[1,]    1    3    5
[2,]    2    4    6
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# La matriz de 1 x 1 }
\FunctionTok{matrix}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
     [,1]
[1,]   NA
\end{verbatim}

\end{example}

Como se puede observar en el ejemplo anterior, los elementos se disponen
por columnas, pero se pueden disponer los elementos por filas pasando el
parámetro \texttt{byrow\ =\ TRUE} a la función \texttt{matrix}.

\begin{example}[]\protect\hypertarget{exm-creacion-matrices-por-filas}{}\label{exm-creacion-matrices-por-filas}

~

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{matrix}\NormalTok{(}\DecValTok{1}\SpecialCharTok{:}\DecValTok{6}\NormalTok{, }\AttributeTok{nrow =} \DecValTok{2}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
     [,1] [,2] [,3]
[1,]    1    3    5
[2,]    2    4    6
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{matrix}\NormalTok{(}\DecValTok{1}\SpecialCharTok{:}\DecValTok{6}\NormalTok{, }\AttributeTok{nrow =} \DecValTok{2}\NormalTok{, }\AttributeTok{byrow =} \ConstantTok{TRUE}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
     [,1] [,2] [,3]
[1,]    1    2    3
[2,]    4    5    6
\end{verbatim}

\end{example}

\subsubsection{Matrices con nombres de filas y
columnas}\label{matrices-con-nombres-de-filas-y-columnas}

Es posible poner nombres a las filas y a las columnas de una matriz
añadiendo el parámetro \texttt{dimnames} y pasándole una lista de dos
vectores de cadenas con los nombres de las filas y las columnas
respectivamente.

\begin{example}[]\protect\hypertarget{exm-creacion-matrices-con-nombres}{}\label{exm-creacion-matrices-con-nombres}

~

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{matrix}\NormalTok{(}\DecValTok{1}\SpecialCharTok{:}\DecValTok{6}\NormalTok{, }\AttributeTok{nrow =} \DecValTok{2}\NormalTok{, }\AttributeTok{ncol =} \DecValTok{3}\NormalTok{, }\AttributeTok{dimnames =} \FunctionTok{list}\NormalTok{(}\FunctionTok{c}\NormalTok{(}\StringTok{"fila1"}\NormalTok{, }\StringTok{"fila2"}\NormalTok{), }\FunctionTok{c}\NormalTok{(}\StringTok{"columna1"}\NormalTok{, }\StringTok{"columna2"}\NormalTok{, }\StringTok{"columna3"}\NormalTok{)))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
      columna1 columna2 columna3
fila1        1        3        5
fila2        2        4        6
\end{verbatim}

\end{example}

Para obtener los nombres de las filas y las columnas de una matriz se
utilizan las siguientes funciones:

\begin{itemize}
\tightlist
\item
  \texttt{rownames(x)}: Devuelve un vector de cadenas de caracteres con
  los nombres de las filas de la matriz \texttt{x}.
\item
  \texttt{colnames(x)}: Devuelve un vector de cadenas de caracteres con
  los nombres de las columnas de la matriz \texttt{x}.
\end{itemize}

\begin{example}[]\protect\hypertarget{exm-obtencion-nombres-matriz}{}\label{exm-obtencion-nombres-matriz}

~

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x }\OtherTok{\textless{}{-}} \FunctionTok{matrix}\NormalTok{(}\DecValTok{1}\SpecialCharTok{:}\DecValTok{6}\NormalTok{, }\AttributeTok{nrow =} \DecValTok{2}\NormalTok{, }\AttributeTok{ncol =} \DecValTok{3}\NormalTok{, }\AttributeTok{dimnames =} \FunctionTok{list}\NormalTok{(}\FunctionTok{c}\NormalTok{(}\StringTok{"fila1"}\NormalTok{, }\StringTok{"fila2"}\NormalTok{), }\FunctionTok{c}\NormalTok{(}\StringTok{"columna1"}\NormalTok{, }\StringTok{"columna2"}\NormalTok{, }\StringTok{"columna3"}\NormalTok{)))}
\FunctionTok{rownames}\NormalTok{(x)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] "fila1" "fila2"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{colnames}\NormalTok{(x)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] "columna1" "columna2" "columna3"
\end{verbatim}

\end{example}

\subsection{Tamaño y dimensiones de una
matriz}\label{tamauxf1o-y-dimensiones-de-una-matriz}

Para obtener el número de elementos y las dimensiones de una matriz se
pueden utilizar las siguientes funciones:

\begin{itemize}
\tightlist
\item
  \texttt{length(x)}: Devuelve un entero con el número de elementos de
  la matriz \texttt{x}.
\item
  \texttt{nrow(x)}: Devuelve un entero con el número de filas de la
  matriz \texttt{x}.
\item
  \texttt{ncol(x)}: Devuelve un entero con el número de columnas de la
  matriz \texttt{x}.
\item
  \texttt{dim(x)}: Devuelve un vector de dos enteros con el número de
  filas y el número de columnas de la matriz \texttt{x}.
\end{itemize}

\begin{example}[]\protect\hypertarget{exm-dimensiones-matriz}{}\label{exm-dimensiones-matriz}

~

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x }\OtherTok{\textless{}{-}} \FunctionTok{matrix}\NormalTok{(}\DecValTok{1}\SpecialCharTok{:}\DecValTok{6}\NormalTok{, }\AttributeTok{nrow =} \DecValTok{2}\NormalTok{)}
\FunctionTok{length}\NormalTok{(x)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 6
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{nrow}\NormalTok{(x)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 2
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{ncol}\NormalTok{(x)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 3
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{dim}\NormalTok{(x)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 2 3
\end{verbatim}

\end{example}

Usando esta última función se pueden modificar las dimensiones de una
matriz asignando un vector de dos enteros con las nuevas dimensiones.
Esto también permite crear una matriz a partir de un vector.

\begin{example}[]\protect\hypertarget{exm-modificacion-dimensiones-matriz}{}\label{exm-modificacion-dimensiones-matriz}

~

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x }\OtherTok{\textless{}{-}} \DecValTok{1}\SpecialCharTok{:}\DecValTok{6}
\FunctionTok{dim}\NormalTok{(x) }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(}\DecValTok{2}\NormalTok{, }\DecValTok{3}\NormalTok{)}
\NormalTok{x}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
     [,1] [,2] [,3]
[1,]    1    3    5
[2,]    2    4    6
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{dim}\NormalTok{(x) }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(}\DecValTok{3}\NormalTok{, }\DecValTok{2}\NormalTok{)}
\NormalTok{x}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
     [,1] [,2]
[1,]    1    4
[2,]    2    5
[3,]    3    6
\end{verbatim}

\end{example}

\subsection{Acceso a los elementos de una
matriz}\label{acceso-a-los-elementos-de-una-matriz}

Para acceder a los elementos de una matriz se utilizan dos índices (uno
para las filas y otro para las columnas), separados por comas y entre
corchetes \texttt{{[}{]}} a continuación de la matriz. Al igual que para
los vectores, los índices pueden ser enteros, lógicos o de cadenas de
caracteres.

\subsubsection{Acceso mediante índices
enteros}\label{acceso-mediante-uxedndices-enteros}

Para acceder a los elementos de una matriz mediante índices enteros se
indica el número de fila y el número de columna del elemento entre
corchetes:

\begin{itemize}
\tightlist
\item
  \texttt{x{[}i,j{]}}: Devuelve el elemento de la matriz \texttt{x} que
  está en la fila \texttt{i} y la columna \texttt{j}.
\end{itemize}

Se puede acceder a más de un elemento indicando un vector de enteros
para las filas y otro para las columnas. De esta manera se obtiene una
submatriz. Si no se indica la fila o la columna se obtienen todos los
elementos de todas las filas o columnas. Al igual que para vectores, se
pueden utilizar enteros negativos para descartar filas o columnas

\begin{example}[]\protect\hypertarget{exm-acceso-matriz}{}\label{exm-acceso-matriz}

~

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x }\OtherTok{\textless{}{-}} \FunctionTok{matrix}\NormalTok{(}\DecValTok{1}\SpecialCharTok{:}\DecValTok{9}\NormalTok{, }\AttributeTok{nrow =} \DecValTok{3}\NormalTok{)}
\NormalTok{x}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
     [,1] [,2] [,3]
[1,]    1    4    7
[2,]    2    5    8
[3,]    3    6    9
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Acceso al elemento de la segunda fila y tercera columna}
\NormalTok{x[}\DecValTok{2}\NormalTok{,}\DecValTok{3}\NormalTok{]}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 8
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Acceso a la submatriz de la primera y tercera filas, y tercera y segunda columnas}
\NormalTok{x[}\FunctionTok{c}\NormalTok{(}\DecValTok{1}\NormalTok{, }\DecValTok{3}\NormalTok{), }\FunctionTok{c}\NormalTok{(}\DecValTok{3}\NormalTok{, }\DecValTok{2}\NormalTok{)]}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
     [,1] [,2]
[1,]    7    4
[2,]    9    6
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Acceso a la primera fila}
\NormalTok{x[}\DecValTok{1}\NormalTok{, ]}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 1 4 7
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Acceso a la segunda columna}
\NormalTok{x[, }\DecValTok{2}\NormalTok{]}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 4 5 6
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Acceso a la submatriz con todos los elementos salvo la tercera fila y la segunda columna}
\NormalTok{x[}\SpecialCharTok{{-}}\DecValTok{3}\NormalTok{, }\SpecialCharTok{{-}}\DecValTok{2}\NormalTok{]}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
     [,1] [,2]
[1,]    1    7
[2,]    2    8
\end{verbatim}

\end{example}

\subsubsection{Acceso mediante índices
lógicos}\label{acceso-mediante-uxedndices-luxf3gicos}

Cuando se utilizan índices lógicos, se obtienen los elementos
correspondientes a las filas y columnas donde está el valor booleano
\texttt{TRUE}.

\begin{example}[]\protect\hypertarget{exm-acceso-matriz-logico}{}\label{exm-acceso-matriz-logico}

~

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x }\OtherTok{\textless{}{-}} \FunctionTok{matrix}\NormalTok{(}\DecValTok{1}\SpecialCharTok{:}\DecValTok{9}\NormalTok{, }\AttributeTok{nrow =} \DecValTok{3}\NormalTok{)}
\NormalTok{x}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
     [,1] [,2] [,3]
[1,]    1    4    7
[2,]    2    5    8
[3,]    3    6    9
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Acceso al elemento de la segunda fila y tercera columna}
\NormalTok{x[}\FunctionTok{c}\NormalTok{(F, T, F), }\FunctionTok{c}\NormalTok{(F, F, T)]}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 8
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Acceso a la submatriz de la primera y tercera filas, y segunda y tercera columnas}
\NormalTok{x[}\FunctionTok{c}\NormalTok{(T, F, T), }\FunctionTok{c}\NormalTok{(F, T, T)]}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
     [,1] [,2]
[1,]    4    7
[2,]    6    9
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Acceso a la primera fila}
\NormalTok{x[}\FunctionTok{c}\NormalTok{(T, F, F), ]}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 1 4 7
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Acceso a la segunda columna}
\NormalTok{x[, }\FunctionTok{c}\NormalTok{(F, T, F)]}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 4 5 6
\end{verbatim}

\end{example}

\subsubsection{Acceso mediante índices de
cadena}\label{acceso-mediante-uxedndices-de-cadena}

Si las filas y las columnas de una matriz tienen nombre, es posible
acceder a sus elementos usando los nombres de las filas y columnas como
índices.

\begin{example}[]\protect\hypertarget{exm-acceso-matriz-nombres}{}\label{exm-acceso-matriz-nombres}

~

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x }\OtherTok{\textless{}{-}} \FunctionTok{matrix}\NormalTok{(}\DecValTok{1}\SpecialCharTok{:}\DecValTok{9}\NormalTok{, }\AttributeTok{nrow =} \DecValTok{3}\NormalTok{, }\AttributeTok{dimnames =} \FunctionTok{list}\NormalTok{(}\FunctionTok{c}\NormalTok{(}\StringTok{"f1"}\NormalTok{, }\StringTok{"f2"}\NormalTok{, }\StringTok{"f3"}\NormalTok{), }\FunctionTok{c}\NormalTok{(}\StringTok{"c1"}\NormalTok{, }\StringTok{"c2"}\NormalTok{, }\StringTok{"c3"}\NormalTok{)))}
\NormalTok{x}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
   c1 c2 c3
f1  1  4  7
f2  2  5  8
f3  3  6  9
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Acceso al elemento de la segunda fila y tercera columna}
\NormalTok{x[}\StringTok{"f2"}\NormalTok{, }\StringTok{"c3"}\NormalTok{]}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 8
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Acceso a la submatriz de la primera y tercera filas, y tercera y segunda columnas}
\NormalTok{x[}\FunctionTok{c}\NormalTok{(}\StringTok{"f1"}\NormalTok{, }\StringTok{"f3"}\NormalTok{), }\FunctionTok{c}\NormalTok{(}\StringTok{"c3"}\NormalTok{, }\StringTok{"c2"}\NormalTok{)]}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
   c3 c2
f1  7  4
f3  9  6
\end{verbatim}

\end{example}

Finalmente, es posible combinar distintos tipos de índices (enteros,
lógicos o de cadena) para indicar las filas y las columnas a las que
acceder.

\subsection{Pertenencia a una matriz}\label{pertenencia-a-una-matriz}

Para comprobar si un valor en particular es un elemento de una matriz se
puede utilizar el operador \texttt{\%in\%}:

\begin{itemize}
\tightlist
\item
  \texttt{x\ \%in\%\ y}: Devuelve el booleano \texttt{TRUE} si
  \texttt{x} es un elemento de la matriz \texttt{y}, y \texttt{FALSE} en
  caso contrario.
\end{itemize}

\begin{example}[]\protect\hypertarget{exm-pertenencia-matriz}{}\label{exm-pertenencia-matriz}

~

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x }\OtherTok{\textless{}{-}} \FunctionTok{matrix}\NormalTok{(}\DecValTok{1}\SpecialCharTok{:}\DecValTok{9}\NormalTok{, }\AttributeTok{nrow =} \DecValTok{3}\NormalTok{)}
\DecValTok{2} \SpecialCharTok{\%in\%}\NormalTok{ x}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] TRUE
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\SpecialCharTok{{-}}\DecValTok{1} \SpecialCharTok{\%in\%}\NormalTok{ x}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] FALSE
\end{verbatim}

\end{example}

\subsection{Modificación de los elementos de una
matriz}\label{modificaciuxf3n-de-los-elementos-de-una-matriz}

Para modificar uno o varios elementos de una matriz basta con acceder a
esos elementos y usar el operador de asignación para asignar nuevos
valores.

\begin{example}[]\protect\hypertarget{exm-modificacion-matriz}{}\label{exm-modificacion-matriz}

~

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x }\OtherTok{\textless{}{-}} \FunctionTok{matrix}\NormalTok{(}\DecValTok{1}\SpecialCharTok{:}\DecValTok{9}\NormalTok{, }\AttributeTok{nrow =} \DecValTok{3}\NormalTok{)}
\NormalTok{x}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
     [,1] [,2] [,3]
[1,]    1    4    7
[2,]    2    5    8
[3,]    3    6    9
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x[}\DecValTok{2}\NormalTok{,}\DecValTok{3}\NormalTok{] }\OtherTok{\textless{}{-}} \DecValTok{0}
\NormalTok{x}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
     [,1] [,2] [,3]
[1,]    1    4    7
[2,]    2    5    0
[3,]    3    6    9
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x[}\FunctionTok{c}\NormalTok{(}\DecValTok{1}\NormalTok{, }\DecValTok{3}\NormalTok{), }\DecValTok{1}\SpecialCharTok{:}\DecValTok{2}\NormalTok{] }\OtherTok{\textless{}{-}} \SpecialCharTok{{-}}\DecValTok{1}
\NormalTok{x}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
     [,1] [,2] [,3]
[1,]   -1   -1    7
[2,]    2    5    0
[3,]   -1   -1    9
\end{verbatim}

\end{example}

\subsection{Añadir elementos a una
matriz}\label{auxf1adir-elementos-a-una-matriz}

Para añadir nuevas filas o columnas a una matriz se utilizan las
siguientes funciones:

\begin{itemize}
\tightlist
\item
  \texttt{rbind(x,\ y)}: Devuelve la matriz que resulta de añadir nuevas
  filas a la matriz \texttt{x} con los elementos del vector \texttt{y}.
\item
  \texttt{cbind(x,\ y)}: Devuelve la matriz que resulta de añadir nuevas
  columnas a la matriz \texttt{x} con los elementos del vector
  \texttt{y}.
\end{itemize}

\begin{example}[]\protect\hypertarget{exm-añadir-filas-columnas-matriz}{}\label{exm-añadir-filas-columnas-matriz}

~

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x }\OtherTok{\textless{}{-}} \FunctionTok{matrix}\NormalTok{(}\DecValTok{1}\SpecialCharTok{:}\DecValTok{6}\NormalTok{, }\AttributeTok{nrow =} \DecValTok{2}\NormalTok{)}
\NormalTok{x}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
     [,1] [,2] [,3]
[1,]    1    3    5
[2,]    2    4    6
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Añadir una nueva fila}
\FunctionTok{rbind}\NormalTok{(x, }\FunctionTok{c}\NormalTok{(}\DecValTok{7}\NormalTok{, }\DecValTok{8}\NormalTok{, }\DecValTok{9}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
     [,1] [,2] [,3]
[1,]    1    3    5
[2,]    2    4    6
[3,]    7    8    9
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Añadir una nueva columna}
\FunctionTok{cbind}\NormalTok{(x, }\FunctionTok{c}\NormalTok{(}\DecValTok{7}\NormalTok{, }\DecValTok{8}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
     [,1] [,2] [,3] [,4]
[1,]    1    3    5    7
[2,]    2    4    6    8
\end{verbatim}

\end{example}

\begin{tcolorbox}[enhanced jigsaw, opacitybacktitle=0.6, toptitle=1mm, opacityback=0, bottomrule=.15mm, colbacktitle=quarto-callout-warning-color!10!white, leftrule=.75mm, toprule=.15mm, title=\textcolor{quarto-callout-warning-color}{\faExclamationTriangle}\hspace{0.5em}{Advertencia}, colframe=quarto-callout-warning-color-frame, titlerule=0mm, colback=white, arc=.35mm, rightrule=.15mm, coltitle=black, left=2mm, breakable, bottomtitle=1mm]

Obsérvese que si el número de elementos proporcionados en el vector es
menor del necesario para completar la fila o columna, se reutilizan los
elementos del vector empezando desde el principio.

\end{tcolorbox}

\subsection{Trasponer una matriz}\label{trasponer-una-matriz}

Para trasponer una matriz se utiliza la función siguiente:

\begin{itemize}
\tightlist
\item
  \texttt{t(x)}: Devuelve la matriz traspuesta de la matriz \texttt{x}.
\end{itemize}

\begin{example}[]\protect\hypertarget{exm-trasposicion-matriz}{}\label{exm-trasposicion-matriz}

A continuación se muestran un ejemplo de la trasposición de una matriz.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x }\OtherTok{\textless{}{-}} \FunctionTok{matrix}\NormalTok{(}\DecValTok{1}\SpecialCharTok{:}\DecValTok{6}\NormalTok{, }\AttributeTok{nrow=}\DecValTok{2}\NormalTok{)}
\FunctionTok{t}\NormalTok{(x)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
     [,1] [,2]
[1,]    1    2
[2,]    3    4
[3,]    5    6
\end{verbatim}

\end{example}

\subsection{Operaciones aritméticas con
matrices}\label{operaciones-aritmuxe9ticas-con-matrices}

\subsubsection{Operaciones aritméticas elemento a
elemento}\label{operaciones-aritmuxe9ticas-elemento-a-elemento-1}

Para matrices numéricas las operaciones aritméticas habituales se
aplican elemento a elemento. Si las dimensiones de las matrices son
distintas se produce un error.

\begin{example}[]\protect\hypertarget{exm-operaciones-aritmeticas-matrices}{}\label{exm-operaciones-aritmeticas-matrices}

~

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x }\OtherTok{\textless{}{-}} \FunctionTok{matrix}\NormalTok{(}\DecValTok{1}\SpecialCharTok{:}\DecValTok{6}\NormalTok{, }\AttributeTok{nrow =} \DecValTok{2}\NormalTok{)}
\NormalTok{x}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
     [,1] [,2] [,3]
[1,]    1    3    5
[2,]    2    4    6
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{y }\OtherTok{\textless{}{-}} \FunctionTok{matrix}\NormalTok{(}\FunctionTok{c}\NormalTok{(}\DecValTok{0}\NormalTok{, }\DecValTok{1}\NormalTok{, }\DecValTok{0}\NormalTok{, }\SpecialCharTok{{-}}\DecValTok{1}\NormalTok{, }\DecValTok{0}\NormalTok{, }\DecValTok{1}\NormalTok{), }\AttributeTok{nrow =} \DecValTok{2}\NormalTok{)}
\NormalTok{y}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
     [,1] [,2] [,3]
[1,]    0    0    0
[2,]    1   -1    1
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x }\SpecialCharTok{+}\NormalTok{ y}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
     [,1] [,2] [,3]
[1,]    1    3    5
[2,]    3    3    7
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x }\SpecialCharTok{*}\NormalTok{ y}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
     [,1] [,2] [,3]
[1,]    0    0    0
[2,]    2   -4    6
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x }\SpecialCharTok{/}\NormalTok{ y}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
     [,1] [,2] [,3]
[1,]  Inf  Inf  Inf
[2,]    2   -4    6
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x }\SpecialCharTok{\^{}}\NormalTok{ y}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
     [,1] [,2] [,3]
[1,]    1 1.00    1
[2,]    2 0.25    6
\end{verbatim}

\end{example}

\begin{tcolorbox}[enhanced jigsaw, opacitybacktitle=0.6, toptitle=1mm, opacityback=0, bottomrule=.15mm, colbacktitle=quarto-callout-warning-color!10!white, leftrule=.75mm, toprule=.15mm, title=\textcolor{quarto-callout-warning-color}{\faExclamationTriangle}\hspace{0.5em}{Advertencia}, colframe=quarto-callout-warning-color-frame, titlerule=0mm, colback=white, arc=.35mm, rightrule=.15mm, coltitle=black, left=2mm, breakable, bottomtitle=1mm]

Obsérvese en el ejemplo anterior que la división por 0 produce el valor
\texttt{Inf} que representa infinito.

\end{tcolorbox}

\subsubsection{Multiplicación de
matrices}\label{multiplicaciuxf3n-de-matrices}

Para multiplicar dos matrices numéricas se utiliza el operador
\texttt{\%*\%}.

\begin{example}[]\protect\hypertarget{exm-producto-matrices}{}\label{exm-producto-matrices}

~

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x }\OtherTok{\textless{}{-}} \FunctionTok{matrix}\NormalTok{(}\DecValTok{1}\SpecialCharTok{:}\DecValTok{6}\NormalTok{, }\AttributeTok{ncol =} \DecValTok{3}\NormalTok{)}
\NormalTok{y }\OtherTok{\textless{}{-}} \FunctionTok{matrix}\NormalTok{(}\DecValTok{1}\SpecialCharTok{:}\DecValTok{6}\NormalTok{, }\AttributeTok{nrow =} \DecValTok{3}\NormalTok{)}
\NormalTok{x }\SpecialCharTok{\%*\%}\NormalTok{ y}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
     [,1] [,2]
[1,]   22   49
[2,]   28   64
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{y }\SpecialCharTok{\%*\%}\NormalTok{ x}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
     [,1] [,2] [,3]
[1,]    9   19   29
[2,]   12   26   40
[3,]   15   33   51
\end{verbatim}

\end{example}

\begin{tcolorbox}[enhanced jigsaw, opacitybacktitle=0.6, toptitle=1mm, opacityback=0, bottomrule=.15mm, colbacktitle=quarto-callout-warning-color!10!white, leftrule=.75mm, toprule=.15mm, title=\textcolor{quarto-callout-warning-color}{\faExclamationTriangle}\hspace{0.5em}{Advertencia}, colframe=quarto-callout-warning-color-frame, titlerule=0mm, colback=white, arc=.35mm, rightrule=.15mm, coltitle=black, left=2mm, breakable, bottomtitle=1mm]

Para poder multiplicar dos matrices deben tener dimensiones compatibles.
Si el número de columnas de la primera matriz no es igual que el número
de filas de la segunda se produce un error.

\end{tcolorbox}

\subsection{Determinante de una
matriz}\label{determinante-de-una-matriz}

Para calcular el determinante de una matriz numérica cuadrada se utiliza
la siguiente función:

\begin{itemize}
\tightlist
\item
  \texttt{det(x)}: Devuelve el determinante de la matriz \texttt{x}. Si
  \texttt{x} no es una matriz numérica cuadrada produce un error.
\end{itemize}

\begin{example}[]\protect\hypertarget{exm-determinante}{}\label{exm-determinante}

~

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x }\OtherTok{\textless{}{-}} \FunctionTok{matrix}\NormalTok{(}\DecValTok{1}\SpecialCharTok{:}\DecValTok{4}\NormalTok{, }\AttributeTok{ncol =} \DecValTok{2}\NormalTok{)}
\FunctionTok{det}\NormalTok{(x)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] -2
\end{verbatim}

\end{example}

\subsection{Inversa de una matriz}\label{inversa-de-una-matriz}

Para calcular la matriz inversa de una matriz numérica cuadrada se
utiliza la siguiente función:

\begin{itemize}
\tightlist
\item
  \texttt{solve(x)}: Devuelve la matriz inversa de la matriz \texttt{x}.
  Si \texttt{x} no es una matriz numérica cuadrada produce un error. Si
  la matriz no es invertible por tener determinante nulo también se
  obtiene un error.
\end{itemize}

\begin{example}[]\protect\hypertarget{exm-inversa-matriz}{}\label{exm-inversa-matriz}

~

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x }\OtherTok{\textless{}{-}} \FunctionTok{matrix}\NormalTok{(}\DecValTok{1}\SpecialCharTok{:}\DecValTok{4}\NormalTok{, }\AttributeTok{nrow =} \DecValTok{2}\NormalTok{)}
\FunctionTok{solve}\NormalTok{(x)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
     [,1] [,2]
[1,]   -2  1.5
[2,]    1 -0.5
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# El producto de una matriz por su inversa es la matriz identidad.}
\NormalTok{x }\SpecialCharTok{\%*\%} \FunctionTok{solve}\NormalTok{(x)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
     [,1] [,2]
[1,]    1    0
[2,]    0    1
\end{verbatim}

\end{example}

\subsection{Autovalores y autovectores de una
matriz}\label{autovalores-y-autovectores-de-una-matriz}

Para calcular los autovalores y los autovectores de una matriz numérica
cuadrada se utiliza la siguiente función:

\begin{itemize}
\tightlist
\item
  \texttt{eigen(x)}: Devuelve una lista con los autovalores y los
  autovectores de la matriz \texttt{x}. Para acceder a los autovalores
  se utiliza el nombre \texttt{values} y para acceder a los autovectores
  se utiliza el nombre \texttt{vectors}. Si \texttt{x} no es una matriz
  numérica cuadrada produce un error.
\end{itemize}

\begin{example}[]\protect\hypertarget{exm-autovalores-autovectores}{}\label{exm-autovalores-autovectores}

~

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x }\OtherTok{\textless{}{-}} \FunctionTok{matrix}\NormalTok{(}\DecValTok{1}\SpecialCharTok{:}\DecValTok{4}\NormalTok{, }\AttributeTok{nrow =} \DecValTok{2}\NormalTok{)}
\NormalTok{x}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
     [,1] [,2]
[1,]    1    3
[2,]    2    4
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Autovalores}
\FunctionTok{eigen}\NormalTok{(x)}\SpecialCharTok{$}\NormalTok{values}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1]  5.3722813 -0.3722813
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Autovectores}
\FunctionTok{eigen}\NormalTok{(x)}\SpecialCharTok{$}\NormalTok{vectors}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
           [,1]       [,2]
[1,] -0.5657675 -0.9093767
[2,] -0.8245648  0.4159736
\end{verbatim}

\end{example}

\section{Data frames}\label{data-frames}

Un \emph{data frame} es una estructura bidimensional cuyos elementos se
organizan por filas y columnas de manera similar a una matriz. La
principal diferencia con las matrices es que sus columnas están formadas
por vectores, pero pueden tener tipos de datos distintos. Un data frame
es un caso particular de lista formada por vectores del mismo tamaño con
nombre.

Los data frames son las estructuras de datos más utilizadas en R para
almacenar los datos en los análisis estadísticos.

\subsection{Creación de un data
frame}\label{creaciuxf3n-de-un-data-frame}

Para crear un data frame se utiliza la siguiente función:

\begin{itemize}
\tightlist
\item
  \texttt{data.frame(nombrex\ =\ x,\ nombrey\ =\ y,\ ...)}: Devuelve el
  data frame con columnas los vectores \texttt{x}, \texttt{y}, etc. y
  nombres de columna \texttt{nombrex}, \texttt{nombrey}, etc.
\end{itemize}

\begin{example}[]\protect\hypertarget{exm-creacion-data-frames}{}\label{exm-creacion-data-frames}

~

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df }\OtherTok{\textless{}{-}} \FunctionTok{data.frame}\NormalTok{(}\AttributeTok{asignatura =} \FunctionTok{c}\NormalTok{(}\StringTok{"Matemáticas"}\NormalTok{, }\StringTok{"Física"}\NormalTok{, }\StringTok{"Economía"}\NormalTok{), }\AttributeTok{nota =} \FunctionTok{c}\NormalTok{(}\FloatTok{8.5}\NormalTok{, }\DecValTok{7}\NormalTok{, }\FloatTok{4.5}\NormalTok{))}
\NormalTok{df}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
   asignatura nota
1 Matemáticas  8.5
2      Física  7.0
3    Economía  4.5
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{str}\NormalTok{(df)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
'data.frame':   3 obs. of  2 variables:
 $ asignatura: chr  "Matemáticas" "Física" "Economía"
 $ nota      : num  8.5 7 4.5
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Data frame vacío}
\FunctionTok{data.frame}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
data frame with 0 columns and 0 rows
\end{verbatim}

\end{example}

Para grandes conjuntos de datos es más común crear un data frame a
partir de un
\href{https://es.wikipedia.org/wiki/Valores_separados_por_comas}{fichero
en formato csv} mediante la siguiente función:

\begin{itemize}
\tightlist
\item
  \texttt{read.csv(f)}: Devuelve el data frame que se genera a partir de
  los datos del fichero csv \texttt{f}. Cada fila del fichero csv se
  corresponde con una fila del data frame y por defecto utiliza la coma
  \texttt{,} parara separar los datos de las columnas y punto \texttt{.}
  como separador de decimales de los datos numéricos. Los nombres de las
  columnas se obtienen automáticamente a partir de la primera fila del
  fichero.
\item
  \texttt{read.csv2(f)}: Funciona igual que la función anterior pero
  utiliza como separador de columnas el punto y coma \texttt{;} y como
  separador de decimales la coma \texttt{,}.
\end{itemize}

\begin{example}[]\protect\hypertarget{exm-creacion-data-frame-csv}{}\label{exm-creacion-data-frame-csv}

~

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df }\OtherTok{\textless{}{-}} \FunctionTok{read.csv}\NormalTok{(}\StringTok{\textquotesingle{}https://raw.githubusercontent.com/asalber/manual{-}r/master/datos/colesterol.csv\textquotesingle{}}\NormalTok{)}
\NormalTok{df}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
                            nombre edad sexo peso altura colesterol
1     José Luis Martínez Izquierdo   18    H   85   1.79        182
2                   Rosa Díaz Díaz   32    M   65   1.73        232
3            Javier García Sánchez   24    H   NA   1.81        191
4              Carmen López Pinzón   35    M   65   1.70        200
5             Marisa López Collado   46    M   51   1.58        148
6                Antonio Ruiz Cruz   68    H   66   1.74        249
7          Antonio Fernández Ocaña   51    H   62   1.72        276
8            Pilar Martín González   22    M   60   1.66         NA
9             Pedro Gálvez Tenorio   35    H   90   1.94        241
10         Santiago Reillo Manzano   46    H   75   1.85        280
11           Macarena Álvarez Luna   53    M   55   1.62        262
12      José María de la Guía Sanz   58    H   78   1.87        198
13 Miguel Angel Cuadrado Gutiérrez   27    H  109   1.98        210
14           Carolina Rubio Moreno   20    M   61   1.77        194
\end{verbatim}

\end{example}

\subsection{Coerción de otras estructuras de datos a data
frames}\label{coerciuxf3n-de-otras-estructuras-de-datos-a-data-frames}

Para convertir otras estructuras de datos en data frames, se utiliza la
siguiente función:

\begin{itemize}
\tightlist
\item
  \texttt{as.data.frame(x)}: Devuelve el data frame que se obtiene a
  partir la estructura de datos \texttt{x} a plicanco las siguientes
  reglas de coerción:

  \begin{itemize}
  \tightlist
  \item
    Si \texttt{x} es un vector se obtiene un data frame con una sola
    columna.
  \item
    Si \texttt{x} es una lista se obtiene un data frame con tantas
    columnas como elementos tenga la lista. Si los elementos de la lista
    tienen tamaños distintos se obtiene un error.
  \item
    Si \texttt{x} es una matriz se obtiene un data frame con el mismo
    número de columnas y filas que la matriz.
  \end{itemize}
\end{itemize}

\subsection{Acceso a los elementos de un data
frame}\label{acceso-a-los-elementos-de-un-data-frame}

Puesto que un data frame es una lista, se puede acceder a sus elementos
como se accede a los elementos de una lista utilizando índices. Con
corchetes simples \texttt{{[}\ {]}} se obtiene siempre un data frame,
mientras que con corchetes dobles \texttt{{[}{[}\ {]}{]}} o \texttt{\$}
se obtiene un vector. Pero también se puede acceder a los elementos de
un data frame como si fuese una matriz, indicando un par de índices para
las filas y las columnas respectivamente.

\begin{example}[]\protect\hypertarget{exm-acceso-data-frame}{}\label{exm-acceso-data-frame}

~

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df }\OtherTok{\textless{}{-}} \FunctionTok{data.frame}\NormalTok{(}\AttributeTok{asignatura =} \FunctionTok{c}\NormalTok{(}\StringTok{"Matemáticas"}\NormalTok{, }\StringTok{"Física"}\NormalTok{, }\StringTok{"Economía"}\NormalTok{), }\AttributeTok{nota =} \FunctionTok{c}\NormalTok{(}\FloatTok{8.5}\NormalTok{, }\DecValTok{7}\NormalTok{, }\FloatTok{4.5}\NormalTok{))}
\NormalTok{df}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
   asignatura nota
1 Matemáticas  8.5
2      Física  7.0
3    Economía  4.5
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Acceso como lista}
\NormalTok{df[}\StringTok{"asignatura"}\NormalTok{]}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
   asignatura
1 Matemáticas
2      Física
3    Economía
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df}\SpecialCharTok{$}\NormalTok{asignatura}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] "Matemáticas" "Física"      "Economía"   
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Acceso como matriz}
\NormalTok{df[}\DecValTok{2}\SpecialCharTok{:}\DecValTok{3}\NormalTok{, }\StringTok{"nota"}\NormalTok{]}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 7.0 4.5
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df[df}\SpecialCharTok{$}\NormalTok{nota }\SpecialCharTok{\textgreater{}=} \DecValTok{5}\NormalTok{, ]}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
   asignatura nota
1 Matemáticas  8.5
2      Física  7.0
\end{verbatim}

\end{example}

Obsérvese en el último ejemplo anterior cómo se pueden utilizar
condiciones lógicas para filtrar un data frame.

Para acceder a las primeras o últimas filas de un data frame se pueden
utilizar las siguientes funciones:

\begin{itemize}
\item
  \texttt{head(df,\ n)}: Devuelve un data frame con las \texttt{n}
  primeras filas del data frame \texttt{df}.
\item
  \texttt{tail(df,\ n)}: Devuelve un data frame con las \texttt{n}
  últimas filas del data frame \texttt{df}.
\end{itemize}

Estas funciones son útiles para darse una idea del contenido de un data
frame con muchas filas.

\begin{example}[]\protect\hypertarget{exm-acceso-primeras-ultimas-filas-data-frame}{}\label{exm-acceso-primeras-ultimas-filas-data-frame}

~

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df }\OtherTok{\textless{}{-}} \FunctionTok{data.frame}\NormalTok{(}\AttributeTok{x =} \DecValTok{1}\SpecialCharTok{:}\DecValTok{26}\NormalTok{, }\AttributeTok{y =}\NormalTok{ letters) }\CommentTok{\# letters es un vector predefinido con las letras del abecedario.}
\FunctionTok{head}\NormalTok{(df, }\DecValTok{3}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
  x y
1 1 a
2 2 b
3 3 c
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{tail}\NormalTok{(df, }\DecValTok{2}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
    x y
25 25 y
26 26 z
\end{verbatim}

\end{example}

\subsection{Modificación de los elementos de un data
frame}\label{modificaciuxf3n-de-los-elementos-de-un-data-frame}

Para modificar uno o varios elementos de un data frame basta con acceder
a esos elementos y usar el operador de asignación para asignar nuevos
valores.

\begin{example}[]\protect\hypertarget{exm-modificacion-data-frames}{}\label{exm-modificacion-data-frames}

~

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df }\OtherTok{\textless{}{-}} \FunctionTok{data.frame}\NormalTok{(}\AttributeTok{asignatura =} \FunctionTok{c}\NormalTok{(}\StringTok{"Matemáticas"}\NormalTok{, }\StringTok{"Física"}\NormalTok{, }\StringTok{"Economía"}\NormalTok{), }\AttributeTok{nota =} \FunctionTok{c}\NormalTok{(}\FloatTok{8.5}\NormalTok{, }\DecValTok{7}\NormalTok{, }\FloatTok{4.5}\NormalTok{))}
\NormalTok{df}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
   asignatura nota
1 Matemáticas  8.5
2      Física  7.0
3    Economía  4.5
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df[}\DecValTok{3}\NormalTok{, }\StringTok{"nota"}\NormalTok{] }\OtherTok{\textless{}{-}} \DecValTok{5}
\NormalTok{df}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
   asignatura nota
1 Matemáticas  8.5
2      Física  7.0
3    Economía  5.0
\end{verbatim}

\end{example}

\subsection{Añadir elementos a un data
frame}\label{auxf1adir-elementos-a-un-data-frame}

Para añadir nuevas filas o columnas a una data frame se utilizan las
mismas funciones que para matrices:

\begin{itemize}
\item
  \texttt{rbind(df,\ x)}: Devuelve el data frame que resulta de añadir
  nuevas filas al data frame \texttt{df} con los elementos de la lista
  \texttt{x}.
\item
  \texttt{cbind(df,\ nombrex\ =\ x)}: Devuelve el data frame que resulta
  de añadir nuevas columnas al data frame \texttt{df} con los elementos
  del vector \texttt{x} con nombre \texttt{nombrex}.
\end{itemize}

\begin{example}[]\protect\hypertarget{exm-añadir-filas-columnas-data-frame}{}\label{exm-añadir-filas-columnas-data-frame}

~

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df }\OtherTok{\textless{}{-}} \FunctionTok{data.frame}\NormalTok{(}\AttributeTok{asignatura =} \FunctionTok{c}\NormalTok{(}\StringTok{"Matemáticas"}\NormalTok{, }\StringTok{"Física"}\NormalTok{, }\StringTok{"Economía"}\NormalTok{), }\AttributeTok{nota =} \FunctionTok{c}\NormalTok{(}\FloatTok{8.5}\NormalTok{, }\DecValTok{7}\NormalTok{, }\FloatTok{4.5}\NormalTok{))}
\NormalTok{df}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
   asignatura nota
1 Matemáticas  8.5
2      Física  7.0
3    Economía  4.5
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Añadir una nueva fila}
\FunctionTok{rbind}\NormalTok{(df, }\FunctionTok{list}\NormalTok{(}\StringTok{"Programación"}\NormalTok{ , }\DecValTok{10}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
    asignatura nota
1  Matemáticas  8.5
2       Física  7.0
3     Economía  4.5
4 Programación 10.0
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Añadir una nueva columna}
\FunctionTok{cbind}\NormalTok{(df, créditos }\OtherTok{=} \FunctionTok{c}\NormalTok{(}\DecValTok{6}\NormalTok{, }\DecValTok{4}\NormalTok{, }\DecValTok{3}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
   asignatura nota créditos
1 Matemáticas  8.5        6
2      Física  7.0        4
3    Economía  4.5        3
\end{verbatim}

\end{example}

\subsection{Eliminar filas y columnas de un data
frame}\label{eliminar-filas-y-columnas-de-un-data-frame}

Para eliminar una columna de un data frame basta con acceder a la
columna y asignarle el valor \texttt{NULL}, mientras que para eliminar
una fila basta con acceder a la fila con índice negativo.

\begin{example}[]\protect\hypertarget{exm-eliminacion-filas-columnas-data-frame}{}\label{exm-eliminacion-filas-columnas-data-frame}

~

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df }\OtherTok{\textless{}{-}} \FunctionTok{data.frame}\NormalTok{(}\AttributeTok{asignatura =} \FunctionTok{c}\NormalTok{(}\StringTok{"Matemáticas"}\NormalTok{, }\StringTok{"Física"}\NormalTok{, }\StringTok{"Economía"}\NormalTok{), }\AttributeTok{nota =} \FunctionTok{c}\NormalTok{(}\FloatTok{8.5}\NormalTok{, }\DecValTok{7}\NormalTok{, }\FloatTok{4.5}\NormalTok{), créditos }\OtherTok{=} \FunctionTok{c}\NormalTok{(}\DecValTok{6}\NormalTok{, }\DecValTok{4}\NormalTok{, }\DecValTok{3}\NormalTok{))}
\NormalTok{df}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
   asignatura nota créditos
1 Matemáticas  8.5        6
2      Física  7.0        4
3    Economía  4.5        3
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Eliminar una columna}
\NormalTok{df}\SpecialCharTok{$}\NormalTok{nota }\OtherTok{\textless{}{-}} \ConstantTok{NULL}
\NormalTok{df}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
   asignatura créditos
1 Matemáticas        6
2      Física        4
3    Economía        3
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Eliminar una fila}
\NormalTok{df[}\SpecialCharTok{{-}}\DecValTok{2}\NormalTok{, ]}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
   asignatura créditos
1 Matemáticas        6
3    Economía        3
\end{verbatim}

\end{example}

\section{Ejercicios}\label{ejercicios-1}

\begin{exercise}[]\protect\hypertarget{exr-datos-estructurados-1}{}\label{exr-datos-estructurados-1}

La siguiente tabla recoge las notas de los alumnos de un curso con dos
asignaturas.

\begin{longtable}[]{@{}lccc@{}}
\toprule\noalign{}
Alumno & Sexo & Física & Química \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
Carlos & H & 6.7 & 8.1 \\
María & M & 7.2 & 9.5 \\
Carmen & M & 5.5 & 5 \\
Pedro & H & & 4.5 \\
Luis & H & 3.5 & 5 \\
Sara & M & 6.2 & 4 \\
\end{longtable}

\begin{enumerate}
\def\labelenumi{\alph{enumi}.}
\item
  Definir cuatro vectores con el nombre, el sexo y las notas de Física y
  Química.

  \begin{tcolorbox}[enhanced jigsaw, opacitybacktitle=0.6, toptitle=1mm, opacityback=0, bottomrule=.15mm, colbacktitle=quarto-callout-note-color!10!white, leftrule=.75mm, toprule=.15mm, title=\textcolor{quarto-callout-note-color}{\faInfo}\hspace{0.5em}{Solución}, colframe=quarto-callout-note-color-frame, titlerule=0mm, colback=white, arc=.35mm, rightrule=.15mm, coltitle=black, left=2mm, breakable, bottomtitle=1mm]

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{nombre }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(}\StringTok{"Carlos"}\NormalTok{, }\StringTok{"María"}\NormalTok{, }\StringTok{"Carmen"}\NormalTok{, }\StringTok{"Pedro"}\NormalTok{, }\StringTok{"Luis"}\NormalTok{, }\StringTok{"Sara"}\NormalTok{)}
\NormalTok{sexo }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(}\StringTok{"H"}\NormalTok{, }\StringTok{"M"}\NormalTok{, }\StringTok{"M"}\NormalTok{, }\StringTok{"H"}\NormalTok{, }\StringTok{"H"}\NormalTok{, }\StringTok{"M"}\NormalTok{)}
\NormalTok{fisica }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(}\FloatTok{6.7}\NormalTok{, }\FloatTok{7.2}\NormalTok{, }\FloatTok{5.5}\NormalTok{, }\ConstantTok{NA}\NormalTok{, }\FloatTok{3.5}\NormalTok{, }\FloatTok{6.2}\NormalTok{)}
\NormalTok{quimica }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(}\FloatTok{8.1}\NormalTok{, }\FloatTok{9.5}\NormalTok{, }\DecValTok{5}\NormalTok{, }\FloatTok{4.5}\NormalTok{, }\DecValTok{5}\NormalTok{, }\DecValTok{4}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

  \end{tcolorbox}
\item
  Convertir el sexo en un factor y mostrar sus niveles.

  \begin{tcolorbox}[enhanced jigsaw, opacitybacktitle=0.6, toptitle=1mm, opacityback=0, bottomrule=.15mm, colbacktitle=quarto-callout-note-color!10!white, leftrule=.75mm, toprule=.15mm, title=\textcolor{quarto-callout-note-color}{\faInfo}\hspace{0.5em}{Solución}, colframe=quarto-callout-note-color-frame, titlerule=0mm, colback=white, arc=.35mm, rightrule=.15mm, coltitle=black, left=2mm, breakable, bottomtitle=1mm]

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{sexo }\OtherTok{\textless{}{-}} \FunctionTok{factor}\NormalTok{(sexo)}
\FunctionTok{levels}\NormalTok{(sexo)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] "H" "M"
\end{verbatim}

  \end{tcolorbox}
\item
  Crear un nuevo vector con la nota media de Física y Química.

  \begin{tcolorbox}[enhanced jigsaw, opacitybacktitle=0.6, toptitle=1mm, opacityback=0, bottomrule=.15mm, colbacktitle=quarto-callout-note-color!10!white, leftrule=.75mm, toprule=.15mm, title=\textcolor{quarto-callout-note-color}{\faInfo}\hspace{0.5em}{Solución}, colframe=quarto-callout-note-color-frame, titlerule=0mm, colback=white, arc=.35mm, rightrule=.15mm, coltitle=black, left=2mm, breakable, bottomtitle=1mm]

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{media }\OtherTok{\textless{}{-}}\NormalTok{ (fisica }\SpecialCharTok{+}\NormalTok{ quimica) }\SpecialCharTok{/} \DecValTok{2}
\NormalTok{media}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 7.40 8.35 5.25   NA 4.25 5.10
\end{verbatim}

  \end{tcolorbox}
\item
  Crear la variable booleana \texttt{aprobado} que tenga el valor
  \texttt{TRUE} si la media es mayor o igual que 5 y \texttt{FALSE} en
  caso contrario.

  \begin{tcolorbox}[enhanced jigsaw, opacitybacktitle=0.6, toptitle=1mm, opacityback=0, bottomrule=.15mm, colbacktitle=quarto-callout-note-color!10!white, leftrule=.75mm, toprule=.15mm, title=\textcolor{quarto-callout-note-color}{\faInfo}\hspace{0.5em}{Solución}, colframe=quarto-callout-note-color-frame, titlerule=0mm, colback=white, arc=.35mm, rightrule=.15mm, coltitle=black, left=2mm, breakable, bottomtitle=1mm]

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{aprobado }\OtherTok{\textless{}{-}}\NormalTok{ media }\SpecialCharTok{\textgreater{}=} \DecValTok{5}
\NormalTok{aprobado}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1]  TRUE  TRUE  TRUE    NA FALSE  TRUE
\end{verbatim}

  \end{tcolorbox}
\item
  Aplicar un filtro al vector de nombres para quedarse con los nombres
  de los alumnos que han aprobado.

  \begin{tcolorbox}[enhanced jigsaw, opacitybacktitle=0.6, toptitle=1mm, opacityback=0, bottomrule=.15mm, colbacktitle=quarto-callout-note-color!10!white, leftrule=.75mm, toprule=.15mm, title=\textcolor{quarto-callout-note-color}{\faInfo}\hspace{0.5em}{Solución}, colframe=quarto-callout-note-color-frame, titlerule=0mm, colback=white, arc=.35mm, rightrule=.15mm, coltitle=black, left=2mm, breakable, bottomtitle=1mm]

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{nombre[aprobado }\SpecialCharTok{\&} \SpecialCharTok{!}\FunctionTok{is.na}\NormalTok{(aprobado)]}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] "Carlos" "María"  "Carmen" "Sara"  
\end{verbatim}

  \end{tcolorbox}
\item
  Crear un data frame con el nombre, sexo y las notas de Física y
  Química.

  \begin{tcolorbox}[enhanced jigsaw, opacitybacktitle=0.6, toptitle=1mm, opacityback=0, bottomrule=.15mm, colbacktitle=quarto-callout-note-color!10!white, leftrule=.75mm, toprule=.15mm, title=\textcolor{quarto-callout-note-color}{\faInfo}\hspace{0.5em}{Solución}, colframe=quarto-callout-note-color-frame, titlerule=0mm, colback=white, arc=.35mm, rightrule=.15mm, coltitle=black, left=2mm, breakable, bottomtitle=1mm]

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df }\OtherTok{\textless{}{-}} \FunctionTok{data.frame}\NormalTok{(nombre, sexo, fisica, quimica)}
\NormalTok{df}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
  nombre sexo fisica quimica
1 Carlos    H    6.7     8.1
2  María    M    7.2     9.5
3 Carmen    M    5.5     5.0
4  Pedro    H     NA     4.5
5   Luis    H    3.5     5.0
6   Sara    M    6.2     4.0
\end{verbatim}

  \end{tcolorbox}
\item
  Añadir el vector con la media al data frame.

  \begin{tcolorbox}[enhanced jigsaw, opacitybacktitle=0.6, toptitle=1mm, opacityback=0, bottomrule=.15mm, colbacktitle=quarto-callout-note-color!10!white, leftrule=.75mm, toprule=.15mm, title=\textcolor{quarto-callout-note-color}{\faInfo}\hspace{0.5em}{Solución}, colframe=quarto-callout-note-color-frame, titlerule=0mm, colback=white, arc=.35mm, rightrule=.15mm, coltitle=black, left=2mm, breakable, bottomtitle=1mm]

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df}\SpecialCharTok{$}\NormalTok{media }\OtherTok{\textless{}{-}}\NormalTok{ media}
\NormalTok{df}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
  nombre sexo fisica quimica media
1 Carlos    H    6.7     8.1  7.40
2  María    M    7.2     9.5  8.35
3 Carmen    M    5.5     5.0  5.25
4  Pedro    H     NA     4.5    NA
5   Luis    H    3.5     5.0  4.25
6   Sara    M    6.2     4.0  5.10
\end{verbatim}

  \end{tcolorbox}
\item
  Filtrar el data frame para quedarse con el nombre y la media de las
  mujeres que han aprobado.

  \begin{tcolorbox}[enhanced jigsaw, opacitybacktitle=0.6, toptitle=1mm, opacityback=0, bottomrule=.15mm, colbacktitle=quarto-callout-note-color!10!white, leftrule=.75mm, toprule=.15mm, title=\textcolor{quarto-callout-note-color}{\faInfo}\hspace{0.5em}{Solución}, colframe=quarto-callout-note-color-frame, titlerule=0mm, colback=white, arc=.35mm, rightrule=.15mm, coltitle=black, left=2mm, breakable, bottomtitle=1mm]

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df[sexo }\SpecialCharTok{==} \StringTok{"M"} \SpecialCharTok{\&}\NormalTok{ media }\SpecialCharTok{\textgreater{}=} \DecValTok{5}\NormalTok{, }\FunctionTok{c}\NormalTok{(}\StringTok{"nombre"}\NormalTok{, }\StringTok{"media"}\NormalTok{)]}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
  nombre media
2  María  8.35
3 Carmen  5.25
6   Sara  5.10
\end{verbatim}

  \end{tcolorbox}
\end{enumerate}

\end{exercise}

\bookmarksetup{startatroot}

\chapter{Estructuras de control}\label{estructuras-de-control}

Como en otros lenguajes de programación, en R existen instrucciones para
controlar el flujo de ejecución de un programa. Básicamente existen dos
tipos:

\begin{itemize}
\tightlist
\item
  Condicionales: Son instrucciones que bifurcan el flujo del programa en
  función de si se cumple o no una condición.
\item
  Bucles: Son instrucciones que repiten un bloque de código un numero
  determinado de veces o hasta que se cumple una condición.
\end{itemize}

\section{Estructuras condicionales}\label{estructuras-condicionales}

Las estructuras condicionales permiten evaluar el estado del programa y
tomar decisiones sobre qué código ejecutar en función del mismo.

\subsection{\texorpdfstring{Condicionales
(\texttt{if})}{Condicionales (if)}}\label{condicionales-if}

La principal estructura condicional comienza con la palabra reservada
\texttt{if}, lleva asociada expresión de tipo lógico o booleano y
permite ejecutar un bloque de código dependiendo de si la evaluación de
esa expresión es \texttt{TRUE} o \texttt{FALSE}.

\begin{quote}
\texttt{if\ (}\emph{\texttt{\textless{}exp\textgreater{}}}\texttt{)\ \{}\strut \\
  \emph{\texttt{\textless{}código\textgreater{}}}\\
\texttt{\}}
\end{quote}

Si el resultado de evaluar la expresión
\texttt{\textless{}exp\textgreater{}} es \texttt{TRUE} entonces se
ejecuta el código \texttt{\textless{}código\textgreater{}}, mientras que
si es \texttt{FALSE} no.

\begin{figure}[H]

{\centering \pandocbounded{\includegraphics[keepaspectratio]{img/04-estructuras-control/condicional-simple.png}}

}

\caption{Diagrama de flujo de la estructura condicional simple}

\end{figure}%

\begin{figure}[H]

{\centering \includegraphics[width=0.7\linewidth,height=\textheight,keepaspectratio]{img/04-estructuras-control/condicional-simple.png}

}

\caption{Diagrama de flujo de la estructura condicional simple}

\end{figure}%

\begin{example}[]\protect\hypertarget{exm-condicional-simple}{}\label{exm-condicional-simple}

~

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x }\OtherTok{\textless{}{-}} \DecValTok{1}
\NormalTok{y }\OtherTok{\textless{}{-}} \DecValTok{0}
\ControlFlowTok{if}\NormalTok{ (y }\SpecialCharTok{!=} \DecValTok{0}\NormalTok{)\{}
  \FunctionTok{print}\NormalTok{(x }\SpecialCharTok{/}\NormalTok{ y)}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\end{example}

Si se desea ejecutar un bloque de código alternativo cuando no se cumpla
la condición se puede añadir a continuación con la palabra reservada
\texttt{else}.

\begin{quote}
\texttt{if\ (}\emph{\texttt{\textless{}exp\textgreater{}}}\texttt{)\ \{}\strut \\
  \emph{\texttt{\textless{}código\ 1\textgreater{}}}\\
\texttt{\}\ else\ \{}\strut \\
  \emph{\texttt{\textless{}código\ 2\textgreater{}}}\\
\texttt{\}}
\end{quote}

En este caso, si la evaluación de la condición es \texttt{TRUE} se
ejecuta el código \texttt{\textless{}código\ 1\textgreater{}} y si es
\texttt{FALSE} se ejecuta el código
\texttt{\textless{}código\ 2\textgreater{}}.

\begin{figure}[H]

{\centering \pandocbounded{\includegraphics[keepaspectratio]{img/04-estructuras-control/condicional-doble.png}}

}

\caption{Diagrama de flujo de la estructura condicional doble}

\end{figure}%

\begin{example}[]\protect\hypertarget{exm-condicional-doble}{}\label{exm-condicional-doble}

~

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{nota }\OtherTok{\textless{}{-}} \FloatTok{8.5}
\ControlFlowTok{if}\NormalTok{ (nota }\SpecialCharTok{\textless{}} \DecValTok{5}\NormalTok{)\{}
  \FunctionTok{print}\NormalTok{(}\StringTok{"Suspenso"}\NormalTok{)}
\NormalTok{\} }\ControlFlowTok{else}\NormalTok{ \{}
  \FunctionTok{print}\NormalTok{(}\StringTok{"Aprobado"}\NormalTok{)}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] "Aprobado"
\end{verbatim}

\end{example}

Se puede comprobar más de una condición encadenando otra instrucción
\texttt{if} tras las instrucción \texttt{else}.

\begin{quote}
\texttt{if\ (}\emph{\texttt{\textless{}exp\ 1\textgreater{}}}\texttt{)\ \{}\strut \\
  \emph{\texttt{\textless{}código\ 1\textgreater{}}}\\
\texttt{\}\ else\ if\ (}\emph{\texttt{\textless{}exp\ 2\textgreater{}}}\texttt{)\ \{}\strut \\
  \emph{\texttt{\textless{}código\ 2\textgreater{}}}\\
\ldots{}\\
\texttt{\}\ else\ \{}\strut \\
  \emph{\texttt{\textless{}código\ n\textgreater{}}}\\
\texttt{\}}
\end{quote}

Cuando se encadenan múltiples condiciones de esta forma, solamente se
ejecuta el bloque de código asociado a la primera condición cuya
evaluación sea \texttt{TRUE}. El último bloque de código solamente se
ejecuta si todas las condiciones son falsas.

\begin{figure}[H]

{\centering \pandocbounded{\includegraphics[keepaspectratio]{img/04-estructuras-control/condicional-multiple.png}}

}

\caption{Diagrama de flujo de la estructura condicional múltiple}

\end{figure}%

\begin{example}[]\protect\hypertarget{exm-condicional-multiple}{}\label{exm-condicional-multiple}

~

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{nota }\OtherTok{\textless{}{-}} \FloatTok{8.5}
\ControlFlowTok{if}\NormalTok{ (nota }\SpecialCharTok{\textless{}} \DecValTok{5}\NormalTok{)\{}
  \FunctionTok{print}\NormalTok{(}\StringTok{"Suspenso"}\NormalTok{)}
\NormalTok{\} }\ControlFlowTok{else} \ControlFlowTok{if}\NormalTok{ (nota }\SpecialCharTok{\textless{}} \DecValTok{7}\NormalTok{) \{}
  \FunctionTok{print}\NormalTok{(}\StringTok{"Aprobado"}\NormalTok{)}
\NormalTok{\} }\ControlFlowTok{else} \ControlFlowTok{if}\NormalTok{ (nota }\SpecialCharTok{\textless{}} \DecValTok{9}\NormalTok{) \{}
  \FunctionTok{print}\NormalTok{(}\StringTok{"Notable"}\NormalTok{)}
\NormalTok{\} }\ControlFlowTok{else}\NormalTok{ \{}
  \FunctionTok{print}\NormalTok{(}\StringTok{"Sobresaliente"}\NormalTok{)}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] "Notable"
\end{verbatim}

\end{example}

\subsection{\texorpdfstring{La función
\texttt{switch()}}{La función switch()}}\label{la-funciuxf3n-switch}

Otra forma de tomar decisiones sobre el código a ejecutar es la función
\texttt{switch}.

\begin{itemize}
\tightlist
\item
  \texttt{switch(x,\ l)}: Ejecuta el código del valor de la lista
  \texttt{l} cuyo nombre asociado coincide con el resultado de evaluar
  la expresión \texttt{x}. Si el resultado de evaluar \texttt{x} no es
  ningún nombre de los elementos de la lista devuelve \texttt{NULL}.
\end{itemize}

\begin{example}[]\protect\hypertarget{exm-condicional-switch}{}\label{exm-condicional-switch}

~

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{tipo.iva }\OtherTok{\textless{}{-}} \StringTok{"reducido"}
\NormalTok{precio }\OtherTok{\textless{}{-}} \DecValTok{1000}
\NormalTok{iva }\OtherTok{\textless{}{-}}\NormalTok{ precio }\SpecialCharTok{*} \ControlFlowTok{switch}\NormalTok{(tipo.iva, }\StringTok{"superreducido"} \OtherTok{=} \DecValTok{4}\NormalTok{, }\StringTok{"reducido"} \OtherTok{=} \DecValTok{10}\NormalTok{, }\StringTok{"normal"} \OtherTok{=} \DecValTok{21}\NormalTok{) }\SpecialCharTok{/} \DecValTok{100}
\NormalTok{iva}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 100
\end{verbatim}

\end{example}

\section{Bucles}\label{bucles}

Un bucle es una estructura que permite la repetición de un bloque de
código. En R existen dos tipos de bucles, los \emph{bucles iterativos} y
los \emph{bucles condicionales}.

\subsection{\texorpdfstring{Bucles iterativos
(\texttt{for})}{Bucles iterativos (for)}}\label{bucles-iterativos-for}

Lo bucles iterativos repiten un bloque de código un número determinado
de veces. Comienzan por la palabra reservada \texttt{for} y llevan
asociado un \emph{iterador}, que es una variable que recorre una
secuencia de un tipo de datos compuesto, normalmente un vector o una
lista. El bloque de código se ejecuta tantas veces como elementos tenga
la secuencia, y en cada repetición el iterador toma como valor un
elemento distinto de la secuencia.

\begin{quote}
\texttt{for\ (}\emph{\texttt{i}} \texttt{in}
\emph{\texttt{\textless{}secuencia\textgreater{}}}\texttt{)\ \{}\strut \\
  \emph{\texttt{\textless{}código\textgreater{}}}\\
\texttt{\}}
\end{quote}

\begin{figure}[H]

{\centering \pandocbounded{\includegraphics[keepaspectratio]{img/04-estructuras-control/bucle-for.png}}

}

\caption{Diagrama de flujo de un bucle iterativo}

\end{figure}%

\begin{example}[]\protect\hypertarget{exm-bucle-iterarivo}{}\label{exm-bucle-iterarivo}

A continuación se muestra varios ejemplos de uso del bucle \texttt{for}.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{asignaturas }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(}\StringTok{"Matemáticas"}\NormalTok{, }\StringTok{"Física"}\NormalTok{, }\StringTok{"Programación"}\NormalTok{)}
\ControlFlowTok{for}\NormalTok{ (i }\ControlFlowTok{in}\NormalTok{ asignaturas) \{}
  \FunctionTok{print}\NormalTok{(i)}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] "Matemáticas"
[1] "Física"
[1] "Programación"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\ControlFlowTok{for}\NormalTok{ (i }\ControlFlowTok{in} \DecValTok{1}\SpecialCharTok{:}\DecValTok{5}\NormalTok{) \{}
  \FunctionTok{print}\NormalTok{(}\FunctionTok{paste}\NormalTok{(}\StringTok{"El cuadrado de "}\NormalTok{, i, }\StringTok{" es "}\NormalTok{, i}\SpecialCharTok{\^{}}\DecValTok{2}\NormalTok{))}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] "El cuadrado de  1  es  1"
[1] "El cuadrado de  2  es  4"
[1] "El cuadrado de  3  es  9"
[1] "El cuadrado de  4  es  16"
[1] "El cuadrado de  5  es  25"
\end{verbatim}

\end{example}

También es posible recorrer los elementos de la secuencia por posición
ayudándonos de la siguiente función:

\begin{itemize}
\tightlist
\item
  \texttt{seq\_along(x)}: que devuelve un vector con los enteros desde 1
  hasta el número de elementos de la secuencia \texttt{x}.
\end{itemize}

\begin{example}[]\protect\hypertarget{exm-bucle-iterativo-posicion}{}\label{exm-bucle-iterativo-posicion}

~

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{asignaturas }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(}\StringTok{"Matemáticas"}\NormalTok{, }\StringTok{"Física"}\NormalTok{, }\StringTok{"Programación"}\NormalTok{)}
\ControlFlowTok{for}\NormalTok{ (i }\ControlFlowTok{in} \FunctionTok{seq\_along}\NormalTok{(asignaturas))\{}
  \FunctionTok{print}\NormalTok{(}\FunctionTok{paste}\NormalTok{(}\StringTok{"Asignatura "}\NormalTok{, i, }\StringTok{":"}\NormalTok{, asignaturas[i]))}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] "Asignatura  1 : Matemáticas"
[1] "Asignatura  2 : Física"
[1] "Asignatura  3 : Programación"
\end{verbatim}

\end{example}

Los bucles iterativos se utilizan habitualmente para recorrer
estructuras de una dimensión como los vectores y las listas, donde se
sabe de antemano el número de elementos que contiene y, por tanto, el
número de iteraciones del bucle. No obstante, también se pueden recorrer
estructuras de más de una dimensión, como por ejemplo matrices,
utilizando varios bucles \texttt{for} anidados.

\begin{example}[]\protect\hypertarget{exm-bucles-anidados}{}\label{exm-bucles-anidados}

A continuación se muestra un ejemplo de dos bucles \texttt{for} anidados
para recorrer los elementos de una matriz.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x }\OtherTok{\textless{}{-}} \FunctionTok{matrix}\NormalTok{(}\DecValTok{1}\SpecialCharTok{:}\DecValTok{6}\NormalTok{, }\DecValTok{2}\NormalTok{, }\DecValTok{3}\NormalTok{)}
\ControlFlowTok{for}\NormalTok{ (i }\ControlFlowTok{in} \DecValTok{1}\SpecialCharTok{:}\FunctionTok{nrow}\NormalTok{(x)) \{}
  \ControlFlowTok{for}\NormalTok{ (j }\ControlFlowTok{in} \DecValTok{1}\SpecialCharTok{:}\FunctionTok{ncol}\NormalTok{(x))\{}
    \FunctionTok{print}\NormalTok{(x[i,j])}
\NormalTok{  \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 1
[1] 3
[1] 5
[1] 2
[1] 4
[1] 6
\end{verbatim}

\end{example}

\subsection{\texorpdfstring{Bucles condicionales
(\texttt{while})}{Bucles condicionales (while)}}\label{bucles-condicionales-while}

Los bucles condicionales repiten un bloque de código mientras se cumpla
una condición. Comienzan con la palabra reservada \texttt{while} y
llevan asociada una expresión lógica, de manera que mientras la
evaluación de la expresión lógica sea \texttt{TRUE} se repite la
ejecución del bloque de código que contiene.

\begin{quote}
\texttt{while\ (}\emph{\texttt{\textless{}condición\textgreater{}}}\texttt{)\ \{}\strut \\
  \emph{\texttt{\textless{}código\textgreater{}}}\\
\texttt{\}}
\end{quote}

La expresión lógica \texttt{\textless{}condición\textgreater{}} se
evalúa antes de ejecutar el bloque de código y solo se ejecuta el
\texttt{\textless{}código\textgreater{}} si el resultado de la
evaluación es \texttt{TRUE}. Obsérvese que cuando el flujo de ejecución
del programa llega al bucle \texttt{while} si la condición no es cierta,
el código no se ejecuta ni tan siquiera una vez.

\begin{figure}[H]

{\centering \pandocbounded{\includegraphics[keepaspectratio]{img/04-estructuras-control/bucle-while.png}}

}

\caption{Diagrama de flujo de un bucle condicional}

\end{figure}%

\begin{example}[]\protect\hypertarget{exm-bucle-condicional}{}\label{exm-bucle-condicional}

~

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{i }\OtherTok{\textless{}{-}} \DecValTok{5}
\ControlFlowTok{while}\NormalTok{ (i }\SpecialCharTok{\textgreater{}=} \DecValTok{0}\NormalTok{) \{}
  \FunctionTok{print}\NormalTok{(i)}
\NormalTok{  i }\OtherTok{\textless{}{-}}\NormalTok{ i }\SpecialCharTok{{-}} \DecValTok{1}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 5
[1] 4
[1] 3
[1] 2
[1] 1
[1] 0
\end{verbatim}

\end{example}

\subsection{\texorpdfstring{La instrucción
\texttt{break}}{La instrucción break}}\label{la-instrucciuxf3n-break}

La instrucción \texttt{break} se utiliza para detener un bucle y salir
de él, tanto en bucles iterativos como en bucles condicionales.
Normalmente se suele utilizar esta instrucción cuando se cumple una
determinada condición en bloque de código del bucle y se decide parar su
ejecución y salir del bucle.

\begin{example}[]\protect\hypertarget{exm-salida-bucle-break}{}\label{exm-salida-bucle-break}

~

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Bucle que recorre los números enteros del {-}2 al 2 pero termina al llegar al 0.}
\ControlFlowTok{for}\NormalTok{ (i }\ControlFlowTok{in} \SpecialCharTok{{-}}\DecValTok{2}\SpecialCharTok{:}\DecValTok{2}\NormalTok{) \{}
  \ControlFlowTok{if}\NormalTok{ (i }\SpecialCharTok{==} \DecValTok{0}\NormalTok{) \{}
    \ControlFlowTok{break}
\NormalTok{  \} }
  \FunctionTok{print}\NormalTok{(i)}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] -2
[1] -1
\end{verbatim}

\end{example}

\subsection{\texorpdfstring{La instrucción
\texttt{next}}{La instrucción next}}\label{la-instrucciuxf3n-next}

La instrucción \texttt{next} se utiliza para interrumpir la ejecución
del bloque de código de un bucle, pero en lugar de salir del bucle pasa
a la siguiente iteración. Si se trata de un bucle iterativo el iterador
pasa al siguiente elemento de la secuencia de iteración y si se trata de
un bucle condicional se pasa evaluar de nuevo la condición de
repetición.

\begin{example}[]\protect\hypertarget{exm-continuacion-bucle-next}{}\label{exm-continuacion-bucle-next}

~

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Bucle que recorre los enteros del 1 al 10 pero solo imprime los números pares.}
\ControlFlowTok{for}\NormalTok{ (i }\ControlFlowTok{in} \DecValTok{1}\SpecialCharTok{:}\DecValTok{10}\NormalTok{) \{}
  \ControlFlowTok{if}\NormalTok{ (i }\SpecialCharTok{\%\%} \DecValTok{2}\NormalTok{) \{}
    \ControlFlowTok{next}
\NormalTok{  \}}
  \FunctionTok{print}\NormalTok{(i)}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 2
[1] 4
[1] 6
[1] 8
[1] 10
\end{verbatim}

\end{example}

\section{Ejercicios}\label{ejercicios-2}

\begin{exercise}[]\protect\hypertarget{exr-estructuras-control-1}{}\label{exr-estructuras-control-1}

Considérese el data frame creado en el
Ejercicio~\ref{exr-datos-estructurados-1}.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{nombre }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(}\StringTok{"Carlos"}\NormalTok{, }\StringTok{"María"}\NormalTok{, }\StringTok{"Carmen"}\NormalTok{, }\StringTok{"Pedro"}\NormalTok{, }\StringTok{"Luis"}\NormalTok{, }\StringTok{"Sara"}\NormalTok{)}
\NormalTok{sexo }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(}\StringTok{"H"}\NormalTok{, }\StringTok{"M"}\NormalTok{, }\StringTok{"M"}\NormalTok{, }\StringTok{"H"}\NormalTok{, }\StringTok{"H"}\NormalTok{, }\StringTok{"M"}\NormalTok{)}
\NormalTok{fisica }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(}\FloatTok{6.7}\NormalTok{, }\FloatTok{7.2}\NormalTok{, }\FloatTok{5.5}\NormalTok{, }\ConstantTok{NA}\NormalTok{, }\FloatTok{3.5}\NormalTok{, }\FloatTok{6.2}\NormalTok{)}
\NormalTok{quimica }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(}\FloatTok{8.1}\NormalTok{, }\FloatTok{9.5}\NormalTok{, }\DecValTok{5}\NormalTok{, }\FloatTok{4.5}\NormalTok{, }\DecValTok{5}\NormalTok{, }\DecValTok{4}\NormalTok{)}
\NormalTok{df }\OtherTok{\textless{}{-}} \FunctionTok{data.frame}\NormalTok{(nombre, sexo, fisica, quimica)}
\end{Highlighting}
\end{Shaded}

\begin{enumerate}
\def\labelenumi{\alph{enumi}.}
\item
  Calcular la media de las notas de Química.

  \begin{tcolorbox}[enhanced jigsaw, opacitybacktitle=0.6, toptitle=1mm, opacityback=0, bottomrule=.15mm, colbacktitle=quarto-callout-note-color!10!white, leftrule=.75mm, toprule=.15mm, title=\textcolor{quarto-callout-note-color}{\faInfo}\hspace{0.5em}{Solución}, colframe=quarto-callout-note-color-frame, titlerule=0mm, colback=white, arc=.35mm, rightrule=.15mm, coltitle=black, left=2mm, breakable, bottomtitle=1mm]

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{suma }\OtherTok{\textless{}{-}} \DecValTok{0}
\ControlFlowTok{for}\NormalTok{ (i }\ControlFlowTok{in}\NormalTok{ quimica)\{}
\NormalTok{  suma }\OtherTok{\textless{}{-}}\NormalTok{ suma }\SpecialCharTok{+}\NormalTok{ i}
\NormalTok{\}}
\NormalTok{media }\OtherTok{\textless{}{-}}\NormalTok{ suma }\SpecialCharTok{/} \FunctionTok{length}\NormalTok{(quimica)}
\NormalTok{media}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 6.016667
\end{verbatim}

  \end{tcolorbox}
\item
  Calcular la media de las notas de Física.

  \begin{tcolorbox}[enhanced jigsaw, opacitybacktitle=0.6, toptitle=1mm, opacityback=0, bottomrule=.15mm, colbacktitle=quarto-callout-note-color!10!white, leftrule=.75mm, toprule=.15mm, title=\textcolor{quarto-callout-note-color}{\faInfo}\hspace{0.5em}{Solución}, colframe=quarto-callout-note-color-frame, titlerule=0mm, colback=white, arc=.35mm, rightrule=.15mm, coltitle=black, left=2mm, breakable, bottomtitle=1mm]

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{suma }\OtherTok{\textless{}{-}} \DecValTok{0}
\NormalTok{n }\OtherTok{\textless{}{-}} \DecValTok{0}
\ControlFlowTok{for}\NormalTok{ (i }\ControlFlowTok{in}\NormalTok{ fisica)\{}
  \ControlFlowTok{if}\NormalTok{ (}\SpecialCharTok{!}\FunctionTok{is.na}\NormalTok{(i))\{}
\NormalTok{    suma }\OtherTok{\textless{}{-}}\NormalTok{ suma }\SpecialCharTok{+}\NormalTok{ i}
\NormalTok{    n }\OtherTok{\textless{}{-}}\NormalTok{ n }\SpecialCharTok{+} \DecValTok{1} 
\NormalTok{  \}}
\NormalTok{\}}
\NormalTok{media }\OtherTok{\textless{}{-}}\NormalTok{ suma }\SpecialCharTok{/}\NormalTok{ n}
\NormalTok{media}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 5.82
\end{verbatim}

  \end{tcolorbox}
\item
  Construir un vector con las medias de las columnas numéricas del data
  frame.

  \begin{tcolorbox}[enhanced jigsaw, opacitybacktitle=0.6, toptitle=1mm, opacityback=0, bottomrule=.15mm, colbacktitle=quarto-callout-note-color!10!white, leftrule=.75mm, toprule=.15mm, title=\textcolor{quarto-callout-note-color}{\faInfo}\hspace{0.5em}{Solución}, colframe=quarto-callout-note-color-frame, titlerule=0mm, colback=white, arc=.35mm, rightrule=.15mm, coltitle=black, left=2mm, breakable, bottomtitle=1mm]

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{medias }\OtherTok{\textless{}{-}} \ConstantTok{NULL}
\ControlFlowTok{for}\NormalTok{ (j }\ControlFlowTok{in} \DecValTok{3}\SpecialCharTok{:}\DecValTok{4}\NormalTok{)\{}
\NormalTok{  suma }\OtherTok{\textless{}{-}} \DecValTok{0}
\NormalTok{  n }\OtherTok{\textless{}{-}} \DecValTok{0}
  \ControlFlowTok{for}\NormalTok{ (i }\ControlFlowTok{in}\NormalTok{ df[[j]])\{}
    \ControlFlowTok{if}\NormalTok{ (}\SpecialCharTok{!}\FunctionTok{is.na}\NormalTok{(i))\{}
\NormalTok{      suma }\OtherTok{\textless{}{-}}\NormalTok{ suma }\SpecialCharTok{+}\NormalTok{ i}
\NormalTok{      n }\OtherTok{\textless{}{-}}\NormalTok{ n }\SpecialCharTok{+} \DecValTok{1} 
\NormalTok{    \}}
\NormalTok{  \}}
\NormalTok{  medias }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(medias, suma }\SpecialCharTok{/}\NormalTok{ n)}
\NormalTok{\}}
\NormalTok{medias}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 5.820000 6.016667
\end{verbatim}

  \end{tcolorbox}
\item
  Añadir al data frame nueva columnas con la calificaciones (suspenso,
  aprobado, notable, sobresaliente) de las notas de Física y Química.

  \begin{tcolorbox}[enhanced jigsaw, opacitybacktitle=0.6, toptitle=1mm, opacityback=0, bottomrule=.15mm, colbacktitle=quarto-callout-note-color!10!white, leftrule=.75mm, toprule=.15mm, title=\textcolor{quarto-callout-note-color}{\faInfo}\hspace{0.5em}{Solución}, colframe=quarto-callout-note-color-frame, titlerule=0mm, colback=white, arc=.35mm, rightrule=.15mm, coltitle=black, left=2mm, breakable, bottomtitle=1mm]

\begin{Shaded}
\begin{Highlighting}[]
\ControlFlowTok{for}\NormalTok{ (j }\ControlFlowTok{in} \DecValTok{3}\SpecialCharTok{:}\DecValTok{4}\NormalTok{)\{}
\NormalTok{  calificaciones }\OtherTok{\textless{}{-}} \ConstantTok{NULL}
  \ControlFlowTok{for}\NormalTok{ (i }\ControlFlowTok{in}\NormalTok{ df[[j]]) \{}
    \ControlFlowTok{if}\NormalTok{ (}\FunctionTok{is.na}\NormalTok{(i))\{}
\NormalTok{      calificacion }\OtherTok{\textless{}{-}} \ConstantTok{NA} 
\NormalTok{    \} }\ControlFlowTok{else} \ControlFlowTok{if}\NormalTok{ (i }\SpecialCharTok{\textless{}} \DecValTok{5}\NormalTok{) \{}
\NormalTok{      calificacion }\OtherTok{\textless{}{-}} \StringTok{"SS"}
\NormalTok{    \} }\ControlFlowTok{else} \ControlFlowTok{if}\NormalTok{ (i }\SpecialCharTok{\textless{}} \DecValTok{7}\NormalTok{) \{}
\NormalTok{      calificacion }\OtherTok{\textless{}{-}} \StringTok{"AP"}
\NormalTok{    \} }\ControlFlowTok{else} \ControlFlowTok{if}\NormalTok{ (i }\SpecialCharTok{\textless{}} \DecValTok{9}\NormalTok{) \{}
\NormalTok{      calificacion }\OtherTok{\textless{}{-}} \StringTok{"NT"}
\NormalTok{    \} }\ControlFlowTok{else}\NormalTok{ \{}
\NormalTok{      calificacion }\OtherTok{\textless{}{-}} \StringTok{"SB"}
\NormalTok{    \}}
\NormalTok{    calificaciones }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(calificaciones, calificacion)}
\NormalTok{  \}}
\NormalTok{  df[[}\FunctionTok{paste}\NormalTok{(}\StringTok{"calificacion"}\NormalTok{, }\FunctionTok{colnames}\NormalTok{(df)[j])]] }\OtherTok{\textless{}{-}}\NormalTok{ calificaciones}
\NormalTok{\}}
\NormalTok{df}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
  nombre sexo fisica quimica calificacion fisica calificacion quimica
1 Carlos    H    6.7     8.1                  AP                   NT
2  María    M    7.2     9.5                  NT                   SB
3 Carmen    M    5.5     5.0                  AP                   AP
4  Pedro    H     NA     4.5                <NA>                   SS
5   Luis    H    3.5     5.0                  SS                   AP
6   Sara    M    6.2     4.0                  AP                   SS
\end{verbatim}

  \end{tcolorbox}
\end{enumerate}

\end{exercise}

\bookmarksetup{startatroot}

\chapter{Funciones}\label{funciones}

Una función es un bloque de código que tiene asociado un nombre, de
manera que cada vez que se quiera ejecutar el bloque de código basta con
invocar el nombre de la función. Las funciones permite dividir el código
en unidades lógicas que resultan más fáciles de manejar y mantener.

En R las funciones son objetos en sí mimas y pueden usarse como
cualquier otro dato. El tipo de dato de las funciones es
\texttt{function}.

\section{Definición y llamada a
funciones}\label{definiciuxf3n-y-llamada-a-funciones}

Para definir una función se utiliza la siguiente estructura de código:

\begin{quote}
\emph{\texttt{nombre.funcion}}
\texttt{\textless{}-\ function\ (}\emph{\texttt{parámetros}}\texttt{)\ \{}\strut \\
  \emph{\texttt{\textless{}código\textgreater{}}}\\
\texttt{\}}
\end{quote}

El código que va entre llaves se conoce como \emph{cuerpo de la
función}.

Para llamar a la función y que se ejecute el código de su cuerpo hay que
utilizar el nombre de la función y a continuación los valores pasados a
sus parámetros entre paréntesis.

\begin{example}[]\protect\hypertarget{exm-creacion-funcion}{}\label{exm-creacion-funcion}

~

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Definición de la función}
\NormalTok{saludo }\OtherTok{\textless{}{-}} \ControlFlowTok{function}\NormalTok{() \{}
  \FunctionTok{print}\NormalTok{(}\StringTok{"¡Hola!"}\NormalTok{)}
\NormalTok{\}}
\FunctionTok{class}\NormalTok{(saludo)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] "function"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Llamada a la función}
\FunctionTok{saludo}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] "¡Hola!"
\end{verbatim}

\end{example}

\section{Parámetros y argumentos de una
función}\label{paruxe1metros-y-argumentos-de-una-funciuxf3n}

Una función puede recibir valores cuando se invoca a través de unas
variables conocidas como \emph{parámetros} que se definen entre
paréntesis en la declaración de la función. En el cuerpo de la función
se pueden usar estos parámetros como si fuesen variables.

Los valores que se pasan a la función en una llamada o invocación
concreta de ella se conocen como \emph{argumentos} y se asocian a los
parámetros de la declaración de la función.

\begin{example}[]\protect\hypertarget{exm-funcion-con-parametros}{}\label{exm-funcion-con-parametros}

~

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Función con un parámetro}
\NormalTok{saludo }\OtherTok{\textless{}{-}} \ControlFlowTok{function}\NormalTok{(nombre) \{}
  \FunctionTok{print}\NormalTok{(}\FunctionTok{paste}\NormalTok{(}\StringTok{"¡Hola "}\NormalTok{, nombre, }\StringTok{"!"}\NormalTok{, }\AttributeTok{sep =} \StringTok{""}\NormalTok{))}
\NormalTok{\}}
\CommentTok{\# Llamada a la función con un argumento}
\FunctionTok{saludo}\NormalTok{(}\StringTok{"Alf"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] "¡Hola Alf!"
\end{verbatim}

En este ejemplo la función \texttt{saludo} tiene un parámetro
\texttt{nombre}. En la llamada a la función se pasa la cadena
\texttt{Alf} como argumento que se asocia al parámetro \texttt{nombre}
en el cuerpo de la función.

\end{example}

\subsection{Paso de argumentos a una
función}\label{paso-de-argumentos-a-una-funciuxf3n}

Los argumentos de una función pueden pasarse de dos formas:

\begin{itemize}
\tightlist
\item
  \textbf{Argumentos posicionales}: Se asocian a los parámetros de la
  función en el mismo orden que aparecen en la definición de la función.
\item
  \textbf{Argumentos nominales}: Se indica explícitamente el nombre del
  parámetro al que se asocia un argumento de la forma
  \texttt{parametro\ =\ argumento}. En este caso el orden de los
  argumentos no importa.
\end{itemize}

\begin{example}[]\protect\hypertarget{exm-paso-parametros-funcion}{}\label{exm-paso-parametros-funcion}

~

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Función con un argumento por defecto}
\NormalTok{area.triangulo }\OtherTok{\textless{}{-}} \ControlFlowTok{function}\NormalTok{(base, altura) \{}
\NormalTok{  base }\SpecialCharTok{*}\NormalTok{ altura }\SpecialCharTok{/} \DecValTok{2}
\NormalTok{\}}
\CommentTok{\# Cálculo del área de un triángulo de base 4 y altura 3}
\CommentTok{\# Paso de argumentos por posición. }
\FunctionTok{area.triangulo}\NormalTok{(}\DecValTok{4}\NormalTok{, }\DecValTok{3}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 6
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Paso de argumentos por nombre}
\FunctionTok{area.triangulo}\NormalTok{(}\AttributeTok{altura =} \DecValTok{3}\NormalTok{, }\AttributeTok{base =} \DecValTok{4}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 6
\end{verbatim}

\end{example}

\subsection{Argumentos por defecto}\label{argumentos-por-defecto}

En la definición de una función se puede asignar a cada parámetro un
argumento por defecto, de manera que si se invoca la función sin
proporcionar ningún argumento para ese parámetro, se utiliza el
argumento por defecto.

\begin{example}[]\protect\hypertarget{exm-argumento-defecto-funcion}{}\label{exm-argumento-defecto-funcion}

~

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{saludo }\OtherTok{\textless{}{-}} \ControlFlowTok{function}\NormalTok{(nombre, }\AttributeTok{lenguaje =} \StringTok{"R"}\NormalTok{) \{}
  \FunctionTok{print}\NormalTok{(}\FunctionTok{paste}\NormalTok{(}\StringTok{"¡Hola "}\NormalTok{, nombre, }\StringTok{"! ¡Bienvenido a "}\NormalTok{, lenguaje, }\StringTok{"!"}\NormalTok{, }\AttributeTok{sep =} \StringTok{""}\NormalTok{))}
\NormalTok{\}}
\CommentTok{\# Llamada a la función con un argumento}
\FunctionTok{saludo}\NormalTok{(}\StringTok{"Alf"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] "¡Hola Alf! ¡Bienvenido a R!"
\end{verbatim}

\end{example}

\section{Retorno de una función}\label{retorno-de-una-funciuxf3n}

Una función puede devolver un objeto de cualquier tipo tras su
invocación. Para ello se utiliza la función \texttt{return()}, indicando
entre paréntesis el valor que devuelve la función. El retorno suele
realizarse al final del cuerpo de la función, porque con él finaliza la
ejecución de la función y se devuelve el control de la ejecución al
punto desde donde se llamó a la función, de manera que cualquier
instrucción de cuerpo que vaya después no se ejecutará. Si no se indica
ningún objeto, la función devolverá el valor de la última expresión
calculada en el cuerpo de la función.

\begin{example}[]\protect\hypertarget{exm-retorno-funciones}{}\label{exm-retorno-funciones}

~

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Función que devuelve el area de un triángulo}
\NormalTok{area.triangulo }\OtherTok{\textless{}{-}} \ControlFlowTok{function}\NormalTok{(base, altura) \{}
  \FunctionTok{return}\NormalTok{(base }\SpecialCharTok{*}\NormalTok{ altura }\SpecialCharTok{/} \DecValTok{2}\NormalTok{)}
\NormalTok{\}}
\FunctionTok{area.triangulo}\NormalTok{(}\DecValTok{4}\NormalTok{, }\DecValTok{3}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 6
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Función que devuelve el valor absoluto de un número}
\NormalTok{valor.absoluto }\OtherTok{\textless{}{-}} \ControlFlowTok{function}\NormalTok{(x) \{}
  \ControlFlowTok{if}\NormalTok{ (x }\SpecialCharTok{\textless{}} \DecValTok{0}\NormalTok{)}
    \FunctionTok{return}\NormalTok{(x }\SpecialCharTok{*} \SpecialCharTok{{-}}\DecValTok{1}\NormalTok{)}
  \ControlFlowTok{else}
    \FunctionTok{return}\NormalTok{(x)}
\NormalTok{\}}
\FunctionTok{valor.absoluto}\NormalTok{(}\SpecialCharTok{{-}}\DecValTok{1}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 1
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{valor.absoluto}\NormalTok{(}\DecValTok{2}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 2
\end{verbatim}

\end{example}

Para devolver más de un valor se pueden utilizar estructuras de datos
como vectores, listas, matrices o data frames.

\begin{example}[]\protect\hypertarget{exm-retorno-funcion-lista}{}\label{exm-retorno-funcion-lista}

~

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{circulo }\OtherTok{\textless{}{-}} \ControlFlowTok{function}\NormalTok{(radio) \{}
  \FunctionTok{return}\NormalTok{(}\FunctionTok{list}\NormalTok{(}\AttributeTok{perimetro =} \DecValTok{2} \SpecialCharTok{*}\NormalTok{ pi }\SpecialCharTok{*}\NormalTok{ radio, }\AttributeTok{area =}\NormalTok{ pi }\SpecialCharTok{*}\NormalTok{ radio }\SpecialCharTok{\^{}} \DecValTok{2}\NormalTok{))}
\NormalTok{\}}
\FunctionTok{circulo}\NormalTok{(}\DecValTok{5}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
$perimetro
[1] 31.41593

$area
[1] 78.53982
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{circulo}\NormalTok{(}\DecValTok{5}\NormalTok{)}\SpecialCharTok{$}\NormalTok{perimetro}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 31.41593
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{circulo}\NormalTok{(}\DecValTok{5}\NormalTok{)}\SpecialCharTok{$}\NormalTok{area}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 78.53982
\end{verbatim}

\end{example}

\section{Entorno y ámbito de las
variables}\label{entorno-y-uxe1mbito-de-las-variables}

El entorno de un programa en R es el conjunto de todos los objetos
(funciones, variables, etc.) creados durante la ejecución del programa.
Cuando se ejecuta el interprete de R siempre se crea un primer entorno
\texttt{R\_GlobalEnv} conocido como entorno global. Es posible referirse
a él en cualquier momento con la constante \texttt{.GlobalEnv}.

Para ver el entorno activo en cada momento de la ejecución y el
contenido del mismo se utiliza la siguiente función:

\begin{itemize}
\tightlist
\item
  \texttt{environment()}: Devuelve el nombre del entorno actual.
\item
  \texttt{ls()}: Devuelve un vector con los nombres de las objetos
  (variables, funciones, etc.) que contiene el entorno global.
\end{itemize}

\begin{example}[]\protect\hypertarget{exm-acceso-entorno-global}{}\label{exm-acceso-entorno-global}

~

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x }\OtherTok{\textless{}{-}} \DecValTok{4}
\NormalTok{y }\OtherTok{\textless{}{-}} \DecValTok{3}
\NormalTok{area.triangulo }\OtherTok{\textless{}{-}} \ControlFlowTok{function}\NormalTok{(base, altura) \{}
\NormalTok{  base }\SpecialCharTok{*}\NormalTok{ altura }\SpecialCharTok{/} \DecValTok{2}
\NormalTok{\}}
\FunctionTok{environment}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
<environment: R_GlobalEnv>
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{ls}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] "area.triangulo" "x"              "y"             
\end{verbatim}

\end{example}

Como se puede observar en el ejemplo anterior, los parámetros de la
función \texttt{base} y \texttt{altura} no aparecen en el entorno
global. En R, cuando se ejecuta una función se crea un nuevo entorno
hijo dentro del entorno al que pertenece la función. Durante la
ejecución de la función este pasa a ser el entorno activo y cuando
termina la ejecución de la función deja de serlo y vuelve a activarse el
entorno padre desde donde se llamó a la función.

\begin{example}[]\protect\hypertarget{exm-activacion-entorno-funcion}{}\label{exm-activacion-entorno-funcion}

~

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x }\OtherTok{\textless{}{-}} \DecValTok{4}
\NormalTok{y }\OtherTok{\textless{}{-}} \DecValTok{3}
\NormalTok{area.triangulo }\OtherTok{\textless{}{-}} \ControlFlowTok{function}\NormalTok{(base, altura) \{}
  \FunctionTok{print}\NormalTok{(}\StringTok{"Entorno de la función area.triangulo"}\NormalTok{) }
  \FunctionTok{print}\NormalTok{(}\FunctionTok{environment}\NormalTok{())}
  \FunctionTok{print}\NormalTok{(}\FunctionTok{ls}\NormalTok{())}
  \FunctionTok{return}\NormalTok{(base }\SpecialCharTok{*}\NormalTok{ altura }\SpecialCharTok{/} \DecValTok{2}\NormalTok{)}
\NormalTok{\}}
\FunctionTok{print}\NormalTok{(}\StringTok{"Entorno fuera de la función"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] "Entorno fuera de la función"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{environment}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
<environment: R_GlobalEnv>
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{ls}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] "area.triangulo" "x"              "y"             
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{area.triangulo}\NormalTok{(x, y)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] "Entorno de la función area.triangulo"
<environment: 0x562e9fd1f6d8>
[1] "altura" "base"  
\end{verbatim}

\begin{verbatim}
[1] 6
\end{verbatim}

\end{example}

Los parámetros y los objetos (funciones, variables, etc.) definidos
dentro de una función son de \emph{ámbito local}, mientras que los
objetos definidos fuera de ella en alguno de los entornos ancestros son
de \emph{ámbito global}.

Tanto los parámetros como las variables del ámbito local de una función
sólo están accesibles durante la ejecución de la función, es decir,
cuando termina la ejecución de la función estas variables desaparecen y
no son accesibles desde fuera de la función.

Cuando una función declara un objeto (función, variable, etc.) que ya
existe en alguno de los entornos ancestros con ámbito global, durante la
ejecución de la función el objeto global queda eclipsado por el local y
no es accesible hasta que finaliza la ejecución de la función.

\begin{example}[]\protect\hypertarget{exm-eclise-variables-globales-por-locales}{}\label{exm-eclise-variables-globales-por-locales}

~

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{lenguaje }\OtherTok{=} \StringTok{"Python"}
\NormalTok{saludo }\OtherTok{\textless{}{-}} \ControlFlowTok{function}\NormalTok{(lenguaje) \{}
  \FunctionTok{print}\NormalTok{(}\FunctionTok{paste}\NormalTok{(}\StringTok{"Bienvenido a"}\NormalTok{, lenguaje))  }
\NormalTok{\}}
\FunctionTok{saludo}\NormalTok{(}\StringTok{"R"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] "Bienvenido a R"
\end{verbatim}

Obsérvese cómo al ejecutar la función anterior, la variable
\texttt{lenguaje} queda inaccesible al tener la función un parámetro con
el mismo nombre.

\end{example}

Las variables globales están accesibles siempre que no sean eclipsadas
por otras con el mismo nombre de ámbito local. Si embargo, cuando se
intenta asignar un valor a una variable global en el ámbito local, se
crea una nueva variable local. Para asignar valores a variables globales
en el ámbito local se tiene que utilizar el operador de superasignación
\texttt{\textless{}\textless{}-}. Cuando se utiliza este operador para
asignar un valor a una variable, R busca la variable entorno padre, y si
no existe continua con la búsqueda en los entornos ancestros hasta
llegar a entorno global. Si la búsqueda tiene éxito, asigna el nuevo
valor a la variable global, mientras que si no tiene éxito se crea una
nueva variable de ámbito local y se le asigna el valor.

\begin{example}[]\protect\hypertarget{exm-superasignacion}{}\label{exm-superasignacion}

~

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{saludo }\OtherTok{\textless{}{-}} \ControlFlowTok{function}\NormalTok{() \{}
\NormalTok{  lenguaje }\OtherTok{\textless{}\textless{}{-}} \StringTok{"R"}
  \FunctionTok{return}\NormalTok{(}\FunctionTok{paste}\NormalTok{(}\StringTok{"Bienvenido a"}\NormalTok{, lenguaje))}
\NormalTok{\}}
\NormalTok{lenguaje}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] "Python"
\end{verbatim}

\end{example}

\section{Componentes de una
función}\label{componentes-de-una-funciuxf3n}

Los tres componentes de una función son:

\begin{itemize}
\tightlist
\item
  \textbf{Cuerpo}: Es el código dentro de la función.
\item
  \textbf{Parámetros}: Es la lista de parámetros que requiere la
  función.
\item
  \textbf{Entorno}: Es donde se ubican las variables de la función.
\end{itemize}

Para acceder a estos componentes se pueden utilizar las siguientes
funciones:

\begin{itemize}
\tightlist
\item
  \texttt{body(f)}: Devuelve el cuerpo de la función \texttt{f}.
\item
  \texttt{formals(f)}: Devuelve la lista de parámetros de la función
  \texttt{f}.
\item
  \texttt{environment(f)}: Devuelve el entorno de la función \texttt{f}.
\end{itemize}

\begin{example}[]\protect\hypertarget{exm-componentes-funcion}{}\label{exm-componentes-funcion}

~

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Definición de la función}
\NormalTok{area.triangulo }\OtherTok{\textless{}{-}} \ControlFlowTok{function}\NormalTok{(base, altura) \{}
\NormalTok{  base }\SpecialCharTok{*}\NormalTok{ altura }\SpecialCharTok{/} \DecValTok{2}
\NormalTok{\}}
\FunctionTok{body}\NormalTok{(area.triangulo)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
{
    base * altura/2
}
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{formals}\NormalTok{(area.triangulo)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
$base


$altura
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{environment}\NormalTok{(saludo)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
<environment: R_GlobalEnv>
\end{verbatim}

\end{example}

\section{Funciones recursivas}\label{funciones-recursivas}

Una función recursiva es una función que en su cuerpo contiene una llama
a sí misma.

La recursión es una práctica común en la mayoría de los lenguajes de
programación ya que permite resolver las tareas recursivas de manera más
natural.

Para garantizar el final de una función recursiva, las sucesivas
llamadas tienen que reducir el grado de complejidad del problema, hasta
que este pueda resolverse directamente sin necesidad de volver a llamar
a la función. De lo contrario la recursión no tendría fin y nunca
terminaría la ejecución de la función.

\begin{example}[]\protect\hypertarget{exm-funcion-recursiva}{}\label{exm-funcion-recursiva}

~

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{factorial }\OtherTok{\textless{}{-}} \ControlFlowTok{function}\NormalTok{(n) \{}
  \ControlFlowTok{if}\NormalTok{ (n }\SpecialCharTok{\textless{}=} \DecValTok{1}\NormalTok{) }\FunctionTok{return}\NormalTok{(n)}
  \ControlFlowTok{else} \FunctionTok{return}\NormalTok{(n }\SpecialCharTok{*} \FunctionTok{factorial}\NormalTok{(n }\SpecialCharTok{{-}} \DecValTok{1}\NormalTok{))}
\NormalTok{\}}
\FunctionTok{factorial}\NormalTok{(}\DecValTok{4}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 24
\end{verbatim}

\end{example}

\section{Paquetes}\label{paquetes}

Para facilitar la reutilización código y datos R permite la creación de
paquetes que pueden importarse desde otros programas. Un paquete es una
colección de código, funciones y datos que se almacenan en un fichero
dentro de un directorio llamado \texttt{library} en el entorno de R.
Para ver la ubicación de este directorio dentro del sistema de archivos
local se puede utilizar la función \texttt{.libPaths()}.

\begin{example}[]\protect\hypertarget{exm-ubiacion-biblioteca-paquetes}{}\label{exm-ubiacion-biblioteca-paquetes}

~

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{.libPaths}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] "/home/alf/R/x86_64-pc-linux-gnu-library/4.2"
[2] "/usr/lib/R/library"                         
\end{verbatim}

\end{example}

Durante la instalación de R también se instalan varios paquetes básicos
que están disponibles en cualquier sesión de trabajo con R. Pero añadir
nuevas funciones o procedimientos es necesario instalar el paquete que
los contiene y después cargarlo en la sesión de trabajo.

Para ver los paquetes instalados en un ordenador se utiliza la función
\texttt{library()}.

\subsection{Instalación de paquetes}\label{instalaciuxf3n-de-paquetes}

La mayor parte de los paquetes para R están disponibles en el
repositorio oficial
\href{Comprehensive\%20R\%20Archive\%20Network}{CRAN} (Comprehensive R
Archive Network), aunque cualquier persona puede desarrollar un paquete
y ponerlo a disposición de la comunidad en cualquier otro repositorio.

Existen distintas formas de instalar un paquete en R:

\begin{itemize}
\tightlist
\item
  Directamente desde el repositorio oficial CRAN
\item
  Desde otros repositorios no oficiales (por ejemplo Github)
\item
  Descargando el paquete e instalándolo manualmente.
\end{itemize}

\subsubsection{Instalación de paquetes desde el repositorio
CRAN}\label{instalaciuxf3n-de-paquetes-desde-el-repositorio-cran}

Para instalar un paquete desde el repositorio oficial CRAN se utiliza la
siguiente función:

\begin{itemize}
\tightlist
\item
  \texttt{install.packages(x)}: Obtiene el paquete con el nombre
  \texttt{x} desde un servidor con el repositorio CRAN y lo instala
  localmente en el directorio \texttt{library} del entorno de R. Se
  puede instalar más de un paquete a la vez pasando un vector con los
  nombres de los paquetes.
\end{itemize}

\begin{example}[]\protect\hypertarget{exm-instalacion-paquetes}{}\label{exm-instalacion-paquetes}

~

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{install.packages}\NormalTok{(}\StringTok{"remotes"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\end{example}

\subsubsection{Instalación desde otros repositorios (GitHub, GitLab,
etc.)}\label{instalaciuxf3n-desde-otros-repositorios-github-gitlab-etc.}

El paquete \texttt{remotes} incorpora funciones para instalar paquetes
alojados en otros repositorios habituales para el desarrollo de software
como \href{https://github.com/}{GitHub},
\href{httpsb://gitlab.com/}{GitLab}, etc.

\begin{example}[]\protect\hypertarget{exm-instalacion-paquetes-github}{}\label{exm-instalacion-paquetes-github}

~

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{install.packages}\NormalTok{(}\StringTok{"remotes"}\NormalTok{)}
\NormalTok{remotes}\SpecialCharTok{::}\FunctionTok{install\_github}\NormalTok{(}\StringTok{"rkward{-}community/rk.Teaching"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\end{example}

\subsubsection{Instalación desde
Bioconductor}\label{instalaciuxf3n-desde-bioconductor}

\href{https://bioconductor.org/}{Bioconductor} es un repositorio de
paquetes especializados en Bioinformática.

Bioconductor utiliza sus propio gestor de paquetes \texttt{BiocManager},
pero la instalación de paquetes es igualmente sencilla.

\begin{example}[]\protect\hypertarget{exm-instalacion-paquetes-bioconductor}{}\label{exm-instalacion-paquetes-bioconductor}

~

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{install.packages}\NormalTok{(}\StringTok{"BiocManager"}\NormalTok{)}
\NormalTok{BiocManager}\SpecialCharTok{::}\FunctionTok{install}\NormalTok{(}\StringTok{"edgeR"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\end{example}

\subsubsection{Instalación manual}\label{instalaciuxf3n-manual}

Finalmente es posible instalar un paquete manualmente a partir de su
código fuente. Para ello hay previamente hay que descargar el código
fuente del paquete en un fichero comprimido en formato zip y después
utilizar la siguiente función:

\begin{itemize}
\tightlist
\item
  \texttt{install.packages(x,\ repos\ =\ NULL,\ type\ =\ "source")}:
  Instala el paquete ubicado en la ruta \texttt{x} del sistema de
  archivos local en la librería \texttt{library}.
\end{itemize}

Una vez instalado un paquete ya está disponible para cargarlo en
cualquier sesión de trabajo de R y no es necesario volver a instalarlo.

\subsection{Carga de un paquete}\label{carga-de-un-paquete}

Una vez instalado un paquete, para poder ejecutar su contenido es
necesario cargarlo en el entorno de trabajo de R. Para ello se utiliza
la siguiente función:

\begin{itemize}
\tightlist
\item
  \texttt{library(x)}: Ejecuta el código del paquete \texttt{x} en la
  sesión de trabajo activa.
\end{itemize}

\begin{example}[]\protect\hypertarget{exm-carga-paquetes}{}\label{exm-carga-paquetes}

~

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(}\StringTok{"remotes"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\end{example}

\subsection{Paquetes habituales}\label{paquetes-habituales}

A continuación se presenta una lista ordenada alfabéticamente (no por
importancia) de los paquetes más populares para el análisis de datos:

\begin{itemize}
\tightlist
\item
  \href{https://topepo.github.io/caret/index.html}{\texttt{caret}} es un
  paquete para la creación de modelos de clasificación y regresión
  mediante aprendizaje automático.
\item
  \href{https://www.rdocumentation.org/packages/data.table/}{\texttt{data.table}}
  es un paquete para la manipulación de grandes conjuntos de datos (de
  hasta 100GB) de manera rápida y eficiente.
\item
  \href{https://www.rdocumentation.org/packages/devtools/}{\texttt{devtools}}
  es un paquete con herramientas para el desarrollo de paquetes en R.
\item
  \href{https://www.r-project.org/nosvn/pandoc/knitr.html}{\texttt{knitr}}
  es un paquete que proporciona un motor para la generación de informes
  dinámicos que permite la integración de código en R con los lenguajes
  de procesamiento de textos LaTeX, HTML, Markdown, AsciiDoc o
  reStructuredText.
\item
  \href{https://mlr3.mlr-org.com/}{\texttt{mlr3}} es un paquete que
  proporciona funciones para las principales técnicas de aprendizaje
  automático.
\item
  \href{https://plotly.com/r/}{\texttt{plotly}} es un paquete para la
  creación de gráficos interactivos.
\item
  \href{https://rmarkdown.rstudio.com/}{\texttt{rmarkdown}} es un
  paquete que facilita el uso del paquete \texttt{knitr} para la
  elaboración de documentos en múltiples formatos (HTML, pdf, Word y
  otros) permitiendo la integración de código R en el lenguaje Markdown.
\item
  \href{https://shiny.rstudio.com/}{\texttt{shiny}} es un paquete para
  la construcción de aplicaciones web interactivas.
\item
  \href{https://www.tidymodels.org/}{\texttt{tidymodels}} es una
  colección de paquetes para la construcción y evalucación de modelos
  con técnicas de aprendizaje automático.
\item
  \href{https://www.tidyverse.org/}{\texttt{tidyverse}} es una colección
  de paquetes para la Ciencia de Datos que incluye paquetes para la
  carga, limpieza, manipulación y representación gráfica de datos.
\end{itemize}

\section{Ejercicios}\label{ejercicios-3}

\begin{exercise}[]\protect\hypertarget{exr-funciones-1}{}\label{exr-funciones-1}

Crear una función para calcular la media de un vector numérico y usarla
para calcular la media del vector \texttt{(1,\ 2,\ NA,\ 3,\ 4)}.

\begin{tcolorbox}[enhanced jigsaw, opacitybacktitle=0.6, toptitle=1mm, opacityback=0, bottomrule=.15mm, colbacktitle=quarto-callout-note-color!10!white, leftrule=.75mm, toprule=.15mm, title=\textcolor{quarto-callout-note-color}{\faInfo}\hspace{0.5em}{Solución}, colframe=quarto-callout-note-color-frame, titlerule=0mm, colback=white, arc=.35mm, rightrule=.15mm, coltitle=black, left=2mm, breakable, bottomtitle=1mm]

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{media }\OtherTok{\textless{}{-}} \ControlFlowTok{function}\NormalTok{(x)\{}
\NormalTok{  suma }\OtherTok{\textless{}{-}} \DecValTok{0}
\NormalTok{  n }\OtherTok{\textless{}{-}} \DecValTok{0}
  \ControlFlowTok{for}\NormalTok{ (i }\ControlFlowTok{in}\NormalTok{ x)\{}
    \ControlFlowTok{if}\NormalTok{ (}\SpecialCharTok{!}\FunctionTok{is.na}\NormalTok{(i))\{}
\NormalTok{      suma }\OtherTok{\textless{}{-}}\NormalTok{ suma }\SpecialCharTok{+}\NormalTok{ i}
\NormalTok{      n }\OtherTok{\textless{}{-}}\NormalTok{ n }\SpecialCharTok{+} \DecValTok{1}
\NormalTok{    \}}
\NormalTok{  \}}
  \FunctionTok{return}\NormalTok{(suma }\SpecialCharTok{/}\NormalTok{ n)}
\NormalTok{\}}
\FunctionTok{media}\NormalTok{(}\FunctionTok{c}\NormalTok{(}\DecValTok{1}\NormalTok{, }\DecValTok{2}\NormalTok{, }\ConstantTok{NA}\NormalTok{, }\DecValTok{3}\NormalTok{, }\DecValTok{4}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 2.5
\end{verbatim}

\end{tcolorbox}

\end{exercise}

\begin{exercise}[]\protect\hypertarget{exr-funciones-2}{}\label{exr-funciones-2}

Usar la función anterior para crear otra función para calcular las
medias de las columnas de un data frame numérico. La función debe
devolver un vector con las medias de las columnas. Usarla para calcular
el data frame formado por los vectores \texttt{(1,\ 2,\ NA,\ 3,\ 4)} y
\texttt{(-1,\ 0,\ -2,\ 0,\ NA)}.

\begin{tcolorbox}[enhanced jigsaw, opacitybacktitle=0.6, toptitle=1mm, opacityback=0, bottomrule=.15mm, colbacktitle=quarto-callout-note-color!10!white, leftrule=.75mm, toprule=.15mm, title=\textcolor{quarto-callout-note-color}{\faInfo}\hspace{0.5em}{Solución}, colframe=quarto-callout-note-color-frame, titlerule=0mm, colback=white, arc=.35mm, rightrule=.15mm, coltitle=black, left=2mm, breakable, bottomtitle=1mm]

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{medias }\OtherTok{\textless{}{-}} \ControlFlowTok{function}\NormalTok{(df)\{}
\NormalTok{medias }\OtherTok{\textless{}{-}} \ConstantTok{NULL}
\ControlFlowTok{for}\NormalTok{ (i }\ControlFlowTok{in} \FunctionTok{colnames}\NormalTok{(df))\{}
\NormalTok{  medias }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(medias, }\FunctionTok{media}\NormalTok{(df[[i]]))}
\NormalTok{\}}
\FunctionTok{return}\NormalTok{(medias)}
\NormalTok{\}}

\NormalTok{df }\OtherTok{\textless{}{-}} \FunctionTok{data.frame}\NormalTok{(}\AttributeTok{x =} \FunctionTok{c}\NormalTok{(}\DecValTok{1}\NormalTok{, }\DecValTok{2}\NormalTok{, }\ConstantTok{NA}\NormalTok{, }\DecValTok{3}\NormalTok{, }\DecValTok{4}\NormalTok{), }\AttributeTok{y =} \FunctionTok{c}\NormalTok{(}\SpecialCharTok{{-}}\DecValTok{1}\NormalTok{, }\DecValTok{0}\NormalTok{, }\SpecialCharTok{{-}}\DecValTok{2}\NormalTok{, }\DecValTok{0}\NormalTok{, }\ConstantTok{NA}\NormalTok{))}
\FunctionTok{medias}\NormalTok{(df)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1]  2.50 -0.75
\end{verbatim}

\end{tcolorbox}

\end{exercise}

\bookmarksetup{startatroot}

\chapter{Preprocesamiento de datos}\label{preprocesamiento-de-datos}

Cualquier análisis de datos comienza con la carga de datos en un
\emph{data frame}. Normalmente los datos brutos deben limpiarse y
prepararse para su análisis. Este proceso se conoce como
preprocesamiento de datos y suele incluir las siguientes tareas:

\begin{itemize}
\tightlist
\item
  Reestructuración del data frame.
\item
  Selección de las variables (columnas) de interés.
\item
  Filtrado de los casos (filas) de interés.
\item
  Cálculo de nuevas variables a partir de las existentes.
\item
  Ordenación de datos.
\item
  Agrupación de datos.
\item
  Tratamiento de datos no disponibles (\texttt{NA}, \texttt{NaN}).
\end{itemize}

Estas tareas pueden realizarse con las funciones básicas de R pero
actualmente existen paquetes que facilitan mucho su realización como por
ejemplo la colección de paquetes \texttt{tidyverse}.

\section{\texorpdfstring{La colección de paquetes
\texttt{tidyverse}}{La colección de paquetes tidyverse}}\label{la-colecciuxf3n-de-paquetes-tidyverse}

\href{https://www.tidyverse.org/}{\texttt{tidyverse}} es una colección
de paquetes para la Ciencia de Datos. Incluye los siguientes paquetes:

\begin{itemize}
\tightlist
\item
  \texttt{tibble}: Define la estructura de datos \texttt{tibble} que es
  una versión mejorada de los \texttt{data\ frames}.
\item
  \texttt{readr}: Proporciona funciones para la lectura y escritura de
  tablas de datos en formato plano \texttt{csv} y \texttt{tsv}.
\item
  \texttt{tidyr}: Proporciona funciones para la limpieza y preparación
  de los datos de manera consistente.
\item
  \texttt{dplyr}: Proporciona una gramática de funciones para la
  manipulación de datos y las tareas más habituales de preprocesamiento.
\item
  \texttt{stringr}: Proporciona funciones especializadas en la
  manipulación de cadenas.
\item
  \texttt{forcats}: Proporciona funciones especializadas en la
  manipulación de factores.
\item
  \texttt{purrr}: Proporciona funciones para la programación funcional
  que mejoran las ya existentes en R.
\item
  \texttt{ggplot2}: Proporciona una gramática de funciones para la
  realización de gráficos.
\end{itemize}

Estos paquetes están diseñados bajo una misma filosofía por lo
interactúan y se complementan a la perfección.

\section{Tibbles}\label{tibbles}

El paquete \texttt{tibble} define la estructura de datos \emph{tibble}
que es similiar a los data frames, pero optimizada, ya que realiza una
carga en memoria y evaluación perezosa, lo que hace más eficiente el
manejo de grandes volúmenes de datos estructurados en forma de tabla.
Los tibbles, además, suelen dar más información sobre el contenido y la
estructura de los datos, así como de incoherencias en los datos.

Los tibbles nunca cambian el tipo de los datos (por ejemplo de cadenas a
factores), nunca cambian los nombres de las variables, ni crean nombres
de filas, como suelen hacer los data frames.

Aunque los paquetes de \texttt{tidyverse} trabajan perfectamente con
data frames, están optimizados para trabajar con tibbles.

Para convertir un data frame en un tibble se utiliza la función

\begin{itemize}
\tightlist
\item
  \texttt{as\_tibble(df)}: Convierte el data frame \texttt{df} en un
  tibble.
\end{itemize}

\begin{example}[]\protect\hypertarget{exm-creacion-tibble}{}\label{exm-creacion-tibble}

~

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(tibble)}
\NormalTok{df }\OtherTok{\textless{}{-}} \FunctionTok{data.frame}\NormalTok{(}\AttributeTok{asignatura =} \FunctionTok{c}\NormalTok{(}\StringTok{"Matemáticas"}\NormalTok{, }\StringTok{"Física"}\NormalTok{, }\StringTok{"Economía"}\NormalTok{), }\AttributeTok{nota =} \FunctionTok{c}\NormalTok{(}\FloatTok{8.5}\NormalTok{, }\DecValTok{7}\NormalTok{, }\FloatTok{4.5}\NormalTok{))}
\NormalTok{df}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
   asignatura nota
1 Matemáticas  8.5
2      Física  7.0
3    Economía  4.5
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{as\_tibble}\NormalTok{(df)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
# A tibble: 3 x 2
  asignatura   nota
  <chr>       <dbl>
1 Matemáticas   8.5
2 Física        7  
3 Economía      4.5
\end{verbatim}

\end{example}

Al igual que los data frames, las columnas de los tibbles son vectores
cuyos elementos son del mismo tipo, de manera que suelen representar
variables en los estudios estadísticos, mientras que las filas
representan individuos, aunque no siempre es así.

\section{Conjuntos de datos
ordenados}\label{conjuntos-de-datos-ordenados}

Existen dos formas habituales de disponer los datos de un estudio en un
data frame o un tibble: formato ancho y formato largo.

\begin{figure}[H]

{\centering \pandocbounded{\includegraphics[keepaspectratio]{img/05-preprocesamiento/formatos-dataframe.png}}

}

\caption{Formatos de un data frame}

\end{figure}%

La mayoría de los paquetes de \texttt{tidyverse} asumen que los datos
del data frame o tibble están en formado largo, lo que significa que las
columnas del data frame representan variables y las filas observaciones,
de manera que cada dato pertenece a una variable y una observación
única. Las variables (columnas) contienen valores que miden la misma
característica o atributo (edad, estatura, etc.) en cada unidad
experimental. Una observación (fila) contiene los valores medidos en la
misma unidad experimental (una persona, un día, etc.) en todos atributos
estudiados. En resumen, un data frame o tibble esta ordenado
(\emph{tidy}) si

\begin{itemize}
\tightlist
\item
  Cada columna es una variable
\item
  Cada fila es una observación
\item
  Cada casilla es un valor
\end{itemize}

A menudo los conjuntos de datos no están ordenados y violan alguna de de
estas condiciones. Lo más común es encontrarnos

\begin{itemize}
\tightlist
\item
  Encabezados de columnas que son valores en lugar de variables.
\item
  Una misma columna contiene varias variables.
\item
  Variables que están almacenadas tanto en filas como en columnas.
\end{itemize}

Para facilitar el preprocesamiento y posterior análisis de los datos es
recomendable ordenar el data frame. Para ello el paquete \texttt{tidyr}
proporciona dos funciones que permiten pivotar un data frame:

\begin{itemize}
\item
  \texttt{pivot\_longer(df,\ columnas,\ names\_to\ =\ columna-nombres,\ values\_to\ =\ columna-valores)}:
  Devuelve el tibble que resulta de convertir las columnas indicadas en
  el parámetro \texttt{columnas} del data frame \texttt{df} a formato
  largo, es decir, las columnas se reestructuran en dos nuevas columnas
  con nombres \texttt{columna-nombres} y \texttt{columna-valores} que
  contienen los nombres de las columnas originales y sus valores,
  respectivamente.
\item
  \texttt{pivot\_wider(df,\ names\_from\ =\ columna-nombres,\ values\_from\ =\ columna-valores)}:
  Devuelve el tibble que resulta de convertir el data frame \texttt{df}
  a formato ancho, es decir, se crean tantas columnas como nombres
  distintos haya en la columna \texttt{columna-nombres}, usando estos
  nombres como los nombres de las columnas, mientras que los valores se
  toman de la columna \texttt{columna-valores}.
\end{itemize}

\begin{example}[]\protect\hypertarget{exm-pivotar-formato-ancho-a-largo}{}\label{exm-pivotar-formato-ancho-a-largo}

~

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(tidyr)}
\NormalTok{df }\OtherTok{\textless{}{-}} \FunctionTok{data.frame}\NormalTok{(}\AttributeTok{nombre =} \FunctionTok{c}\NormalTok{(}\StringTok{\textquotesingle{}María\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}Luis\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}Carmen\textquotesingle{}}\NormalTok{), }
\AttributeTok{edad =} \FunctionTok{c}\NormalTok{(}\DecValTok{18}\NormalTok{, }\DecValTok{22}\NormalTok{, }\DecValTok{20}\NormalTok{), }
\NormalTok{Matemáticas }\OtherTok{=} \FunctionTok{c}\NormalTok{(}\FloatTok{8.5}\NormalTok{, }\DecValTok{7}\NormalTok{, }\FloatTok{3.5}\NormalTok{),}
\NormalTok{Economía }\OtherTok{=} \FunctionTok{c}\NormalTok{(}\DecValTok{8}\NormalTok{, }\FloatTok{6.5}\NormalTok{, }\DecValTok{5}\NormalTok{),}
\NormalTok{Programación }\OtherTok{=} \FunctionTok{c}\NormalTok{(}\FloatTok{6.5}\NormalTok{, }\DecValTok{4}\NormalTok{, }\DecValTok{9}\NormalTok{))}
\NormalTok{df}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
  nombre edad Matemáticas Economía Programación
1  María   18         8.5      8.0          6.5
2   Luis   22         7.0      6.5          4.0
3 Carmen   20         3.5      5.0          9.0
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Pivotar de formato ancho a formato largo}
\NormalTok{df\_largo }\OtherTok{\textless{}{-}} \FunctionTok{pivot\_longer}\NormalTok{(df, Matemáticas}\SpecialCharTok{:}\NormalTok{Programación, }\AttributeTok{names\_to =} \StringTok{"Asignatura"}\NormalTok{, }\AttributeTok{values\_to =} \StringTok{"Nota"}\NormalTok{)}
\NormalTok{df\_largo}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
# A tibble: 9 x 4
  nombre  edad Asignatura    Nota
  <chr>  <dbl> <chr>        <dbl>
1 María     18 Matemáticas    8.5
2 María     18 Economía       8  
3 María     18 Programación   6.5
4 Luis      22 Matemáticas    7  
5 Luis      22 Economía       6.5
6 Luis      22 Programación   4  
7 Carmen    20 Matemáticas    3.5
8 Carmen    20 Economía       5  
9 Carmen    20 Programación   9  
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Pivotar de formato largo a formato ancho}
\NormalTok{df\_ancho }\OtherTok{\textless{}{-}} \FunctionTok{pivot\_wider}\NormalTok{(df\_largo, }\AttributeTok{names\_from =}\NormalTok{ Asignatura, }\AttributeTok{values\_from =}\NormalTok{ Nota)}
\NormalTok{df\_ancho}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
# A tibble: 3 x 5
  nombre  edad Matemáticas Economía Programación
  <chr>  <dbl>       <dbl>    <dbl>        <dbl>
1 María     18         8.5      8            6.5
2 Luis      22         7        6.5          4  
3 Carmen    20         3.5      5            9  
\end{verbatim}

\end{example}

\section{\texorpdfstring{El paquete
\texttt{dplyr}}{El paquete dplyr}}\label{el-paquete-dplyr}

El paquete \texttt{dplyr} proporciona una gramática para el
preprocesamiento de data frames o tibbles, de manera que cada acción
sobre data frame se corresponde con un verbo y las funciones que
realizan esa acción tienen como nombre el verbo correspondiente. Las
funciones de preprocesamiento más habituales incluidas en el paquete
\texttt{dplyr} son:

\begin{itemize}
\tightlist
\item
  \texttt{count}: Cuenta el número de observaciones de un data frame.
\item
  \texttt{select}: Selecciona un subconjunto de columnas de un data
  frame.
\item
  \texttt{filter}: Selecciona un subconjunto de filas de un data frame.
\item
  \texttt{arrange}: Reordena las filas de un data frame.
\item
  \texttt{rename}: Renombra las columnas de un data frame.
\item
  \texttt{mutate}: Añade nuevas columnas a un data frame o transforma
  las existentes.
\item
  \texttt{summarise}: Genera resúmenes estadísticos de las columnas de
  un data frame.
\item
  \texttt{group\_by}: Divide las filas de un data frame en grupos de
  acuerdo a una columna categórica.
\end{itemize}

\section{Conteo del número de
observaciones}\label{conteo-del-nuxfamero-de-observaciones}

Para contar el número de observaciones (filas) de un data frame se
utiliza la función

\begin{itemize}
\tightlist
\item
  \texttt{count(df,\ columnas)}: Devuelve el número de filas del data
  frame \texttt{df} para cada posible combinación de los valores de las
  columnas indicadas en el parámetro \texttt{columnas}.
\end{itemize}

Esta función se utiliza habitualmente para calcular tamaños muestrales.

\begin{example}[]\protect\hypertarget{exm-count-1}{}\label{exm-count-1}

~

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(dplyr)}
\NormalTok{df }\OtherTok{\textless{}{-}} \FunctionTok{read.csv}\NormalTok{(}\StringTok{\textquotesingle{}https://raw.githubusercontent.com/asalber/manual{-}r/master/datos/colesterol.csv\textquotesingle{}}\NormalTok{)}
\CommentTok{\# Contar las filas del data frame}
\FunctionTok{count}\NormalTok{(df)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
   n
1 14
\end{verbatim}

\end{example}

\begin{example}[]\protect\hypertarget{exm-count-2}{}\label{exm-count-2}

~

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(dplyr)}
\NormalTok{df }\OtherTok{\textless{}{-}} \FunctionTok{read.csv}\NormalTok{(}\StringTok{\textquotesingle{}https://raw.githubusercontent.com/asalber/manual{-}r/master/datos/colesterol.csv\textquotesingle{}}\NormalTok{)}
\CommentTok{\# Contar las filas del data frame}
\FunctionTok{count}\NormalTok{(df, sexo)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
  sexo n
1    H 8
2    M 6
\end{verbatim}

\end{example}

\section{Selección de variables}\label{selecciuxf3n-de-variables}

Para seleccionar un subconjunto de variables de un data frame se utiliza
la función

\begin{itemize}
\tightlist
\item
  \texttt{select(df,\ columnas)}: Devuelve un tibble con las columnas
  indicadas en el parámetro \texttt{columnas} del data frame
  \texttt{df}.
\end{itemize}

\begin{example}[]\protect\hypertarget{exm-select}{}\label{exm-select}

~

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(dplyr)}
\NormalTok{df }\OtherTok{\textless{}{-}} \FunctionTok{read.csv}\NormalTok{(}\StringTok{\textquotesingle{}https://raw.githubusercontent.com/asalber/manual{-}r/master/datos/colesterol.csv\textquotesingle{}}\NormalTok{)}
\CommentTok{\# Seleccionar las columnas nombre, sexo y edad}
\FunctionTok{select}\NormalTok{(df, nombre, sexo, edad)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
                            nombre sexo edad
1     José Luis Martínez Izquierdo    H   18
2                   Rosa Díaz Díaz    M   32
3            Javier García Sánchez    H   24
4              Carmen López Pinzón    M   35
5             Marisa López Collado    M   46
6                Antonio Ruiz Cruz    H   68
7          Antonio Fernández Ocaña    H   51
8            Pilar Martín González    M   22
9             Pedro Gálvez Tenorio    H   35
10         Santiago Reillo Manzano    H   46
11           Macarena Álvarez Luna    M   53
12      José María de la Guía Sanz    H   58
13 Miguel Angel Cuadrado Gutiérrez    H   27
14           Carolina Rubio Moreno    M   20
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Seleccionar la primera y tercera columnas}
\FunctionTok{select}\NormalTok{(df, }\DecValTok{1}\NormalTok{, }\DecValTok{3}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
                            nombre sexo
1     José Luis Martínez Izquierdo    H
2                   Rosa Díaz Díaz    M
3            Javier García Sánchez    H
4              Carmen López Pinzón    M
5             Marisa López Collado    M
6                Antonio Ruiz Cruz    H
7          Antonio Fernández Ocaña    H
8            Pilar Martín González    M
9             Pedro Gálvez Tenorio    H
10         Santiago Reillo Manzano    H
11           Macarena Álvarez Luna    M
12      José María de la Guía Sanz    H
13 Miguel Angel Cuadrado Gutiérrez    H
14           Carolina Rubio Moreno    M
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Seleccionar las columnas desde el peso hasta el colesterol}
\FunctionTok{select}\NormalTok{(df, peso}\SpecialCharTok{:}\NormalTok{colesterol)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
   peso altura colesterol
1    85   1.79        182
2    65   1.73        232
3    NA   1.81        191
4    65   1.70        200
5    51   1.58        148
6    66   1.74        249
7    62   1.72        276
8    60   1.66         NA
9    90   1.94        241
10   75   1.85        280
11   55   1.62        262
12   78   1.87        198
13  109   1.98        210
14   61   1.77        194
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Seleccionar todas las columnas menos la edad}
\FunctionTok{select}\NormalTok{(df, }\SpecialCharTok{{-}}\NormalTok{edad)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
                            nombre sexo peso altura colesterol
1     José Luis Martínez Izquierdo    H   85   1.79        182
2                   Rosa Díaz Díaz    M   65   1.73        232
3            Javier García Sánchez    H   NA   1.81        191
4              Carmen López Pinzón    M   65   1.70        200
5             Marisa López Collado    M   51   1.58        148
6                Antonio Ruiz Cruz    H   66   1.74        249
7          Antonio Fernández Ocaña    H   62   1.72        276
8            Pilar Martín González    M   60   1.66         NA
9             Pedro Gálvez Tenorio    H   90   1.94        241
10         Santiago Reillo Manzano    H   75   1.85        280
11           Macarena Álvarez Luna    M   55   1.62        262
12      José María de la Guía Sanz    H   78   1.87        198
13 Miguel Angel Cuadrado Gutiérrez    H  109   1.98        210
14           Carolina Rubio Moreno    M   61   1.77        194
\end{verbatim}

\end{example}

\section{Filtrado de datos}\label{filtrado-de-datos}

Para filtrar un data frame y quedarse con las filas que cumplen una
condición se usa la función

\begin{itemize}
\tightlist
\item
  \texttt{filter(df,\ condicion)}: Devuelve el tibble con las filas del
  data frame \texttt{df} que cumplen la condición indicada en el
  parámetro \texttt{condición}.
\end{itemize}

\begin{example}[]\protect\hypertarget{exm-filter}{}\label{exm-filter}

~

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(dplyr)}
\NormalTok{df }\OtherTok{\textless{}{-}} \FunctionTok{read.csv}\NormalTok{(}\StringTok{\textquotesingle{}https://raw.githubusercontent.com/asalber/manual{-}r/master/datos/colesterol.csv\textquotesingle{}}\NormalTok{)}
\CommentTok{\# Filtrar las mujeres}
\FunctionTok{filter}\NormalTok{(df, sexo }\SpecialCharTok{==} \StringTok{"M"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
                 nombre edad sexo peso altura colesterol
1        Rosa Díaz Díaz   32    M   65   1.73        232
2   Carmen López Pinzón   35    M   65   1.70        200
3  Marisa López Collado   46    M   51   1.58        148
4 Pilar Martín González   22    M   60   1.66         NA
5 Macarena Álvarez Luna   53    M   55   1.62        262
6 Carolina Rubio Moreno   20    M   61   1.77        194
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Filtrar los hombres mayores de 30 }
\FunctionTok{filter}\NormalTok{(df, sexo }\SpecialCharTok{==} \StringTok{"H"} \SpecialCharTok{\&}\NormalTok{ edad }\SpecialCharTok{\textgreater{}} \DecValTok{30}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
                      nombre edad sexo peso altura colesterol
1          Antonio Ruiz Cruz   68    H   66   1.74        249
2    Antonio Fernández Ocaña   51    H   62   1.72        276
3       Pedro Gálvez Tenorio   35    H   90   1.94        241
4    Santiago Reillo Manzano   46    H   75   1.85        280
5 José María de la Guía Sanz   58    H   78   1.87        198
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Filtrar las filas con valores de colesterol}
\FunctionTok{filter}\NormalTok{(df, }\SpecialCharTok{!}\FunctionTok{is.na}\NormalTok{(colesterol))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
                            nombre edad sexo peso altura colesterol
1     José Luis Martínez Izquierdo   18    H   85   1.79        182
2                   Rosa Díaz Díaz   32    M   65   1.73        232
3            Javier García Sánchez   24    H   NA   1.81        191
4              Carmen López Pinzón   35    M   65   1.70        200
5             Marisa López Collado   46    M   51   1.58        148
6                Antonio Ruiz Cruz   68    H   66   1.74        249
7          Antonio Fernández Ocaña   51    H   62   1.72        276
8             Pedro Gálvez Tenorio   35    H   90   1.94        241
9          Santiago Reillo Manzano   46    H   75   1.85        280
10           Macarena Álvarez Luna   53    M   55   1.62        262
11      José María de la Guía Sanz   58    H   78   1.87        198
12 Miguel Angel Cuadrado Gutiérrez   27    H  109   1.98        210
13           Carolina Rubio Moreno   20    M   61   1.77        194
\end{verbatim}

\end{example}

Existe un filtro bastante habitual que consiste en eliminar las filas de
un data frame que contienen algún dado no disponible (\texttt{NA}). Para
ello \texttt{dplyr} dispone de la función

\begin{itemize}
\tightlist
\item
  \texttt{na.omit(df)}: Devuelve el tibble que resulta de eliminar las
  filas del data frame \texttt{df} con algún valor \texttt{NA}.
\end{itemize}

\begin{example}[]\protect\hypertarget{exm-filter-na}{}\label{exm-filter-na}

~

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{na.omit}\NormalTok{(df)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
                            nombre edad sexo peso altura colesterol
1     José Luis Martínez Izquierdo   18    H   85   1.79        182
2                   Rosa Díaz Díaz   32    M   65   1.73        232
4              Carmen López Pinzón   35    M   65   1.70        200
5             Marisa López Collado   46    M   51   1.58        148
6                Antonio Ruiz Cruz   68    H   66   1.74        249
7          Antonio Fernández Ocaña   51    H   62   1.72        276
9             Pedro Gálvez Tenorio   35    H   90   1.94        241
10         Santiago Reillo Manzano   46    H   75   1.85        280
11           Macarena Álvarez Luna   53    M   55   1.62        262
12      José María de la Guía Sanz   58    H   78   1.87        198
13 Miguel Angel Cuadrado Gutiérrez   27    H  109   1.98        210
14           Carolina Rubio Moreno   20    M   61   1.77        194
\end{verbatim}

\end{example}

\section{Reordenación de datos}\label{reordenaciuxf3n-de-datos}

Para reordenar las filas de un data frame se utiliza la función

\begin{itemize}
\tightlist
\item
  \texttt{arrange(df,\ columnas)}: Devuelve un tibble con las mismas
  filas del data frame \texttt{df} pero ordenadas de acuerdo a los
  valores de las columnas indicadas en el parámetro \texttt{columnas}.
  Por defecto, la ordenación es ascendente, para hacerla descendente,
  hay que aplicar la función \texttt{desc()} a la columna con respecto
  se quiere ordenar descendentemente.
\end{itemize}

\begin{example}[]\protect\hypertarget{exm-arrange}{}\label{exm-arrange}

~

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(dplyr)}
\NormalTok{df }\OtherTok{\textless{}{-}} \FunctionTok{read.csv}\NormalTok{(}\StringTok{\textquotesingle{}https://raw.githubusercontent.com/asalber/manual{-}r/master/datos/colesterol.csv\textquotesingle{}}\NormalTok{)}
\CommentTok{\# Ordenar según alfabéticamente por nombre}
\FunctionTok{arrange}\NormalTok{(df, nombre)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
                            nombre edad sexo peso altura colesterol
1          Antonio Fernández Ocaña   51    H   62   1.72        276
2                Antonio Ruiz Cruz   68    H   66   1.74        249
3              Carmen López Pinzón   35    M   65   1.70        200
4            Carolina Rubio Moreno   20    M   61   1.77        194
5            Javier García Sánchez   24    H   NA   1.81        191
6     José Luis Martínez Izquierdo   18    H   85   1.79        182
7       José María de la Guía Sanz   58    H   78   1.87        198
8            Macarena Álvarez Luna   53    M   55   1.62        262
9             Marisa López Collado   46    M   51   1.58        148
10 Miguel Angel Cuadrado Gutiérrez   27    H  109   1.98        210
11            Pedro Gálvez Tenorio   35    H   90   1.94        241
12           Pilar Martín González   22    M   60   1.66         NA
13                  Rosa Díaz Díaz   32    M   65   1.73        232
14         Santiago Reillo Manzano   46    H   75   1.85        280
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Ordenar según sexo y edad}
\FunctionTok{arrange}\NormalTok{(df, sexo, edad)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
                            nombre edad sexo peso altura colesterol
1     José Luis Martínez Izquierdo   18    H   85   1.79        182
2            Javier García Sánchez   24    H   NA   1.81        191
3  Miguel Angel Cuadrado Gutiérrez   27    H  109   1.98        210
4             Pedro Gálvez Tenorio   35    H   90   1.94        241
5          Santiago Reillo Manzano   46    H   75   1.85        280
6          Antonio Fernández Ocaña   51    H   62   1.72        276
7       José María de la Guía Sanz   58    H   78   1.87        198
8                Antonio Ruiz Cruz   68    H   66   1.74        249
9            Carolina Rubio Moreno   20    M   61   1.77        194
10           Pilar Martín González   22    M   60   1.66         NA
11                  Rosa Díaz Díaz   32    M   65   1.73        232
12             Carmen López Pinzón   35    M   65   1.70        200
13            Marisa López Collado   46    M   51   1.58        148
14           Macarena Álvarez Luna   53    M   55   1.62        262
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Ordenar ascendentemente por sexo y descendentemente por colesterol}
\FunctionTok{arrange}\NormalTok{(df, sexo, }\FunctionTok{desc}\NormalTok{(colesterol))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
                            nombre edad sexo peso altura colesterol
1          Santiago Reillo Manzano   46    H   75   1.85        280
2          Antonio Fernández Ocaña   51    H   62   1.72        276
3                Antonio Ruiz Cruz   68    H   66   1.74        249
4             Pedro Gálvez Tenorio   35    H   90   1.94        241
5  Miguel Angel Cuadrado Gutiérrez   27    H  109   1.98        210
6       José María de la Guía Sanz   58    H   78   1.87        198
7            Javier García Sánchez   24    H   NA   1.81        191
8     José Luis Martínez Izquierdo   18    H   85   1.79        182
9            Macarena Álvarez Luna   53    M   55   1.62        262
10                  Rosa Díaz Díaz   32    M   65   1.73        232
11             Carmen López Pinzón   35    M   65   1.70        200
12           Carolina Rubio Moreno   20    M   61   1.77        194
13            Marisa López Collado   46    M   51   1.58        148
14           Pilar Martín González   22    M   60   1.66         NA
\end{verbatim}

\end{example}

\section{Renombrado de columnas}\label{renombrado-de-columnas}

Para cambiar el nombre de las columnas se utiliza la función

\begin{itemize}
\tightlist
\item
  \texttt{rename(df,\ nuevo-nombre\ =\ columna)}: Devuelve un tibble con
  los mismos datos del data frame \texttt{df} pero cambiando el nombre
  de la columna de nombre \texttt{columna} por \texttt{nuevo-nombre}.
\end{itemize}

\begin{example}[]\protect\hypertarget{exm-rename}{}\label{exm-rename}

~

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(dplyr)}
\NormalTok{df }\OtherTok{\textless{}{-}} \FunctionTok{read.csv}\NormalTok{(}\StringTok{\textquotesingle{}https://raw.githubusercontent.com/asalber/manual{-}r/master/datos/colesterol.csv\textquotesingle{}}\NormalTok{)}
\CommentTok{\# Ordenar según alfabéticamente por nombre}
\FunctionTok{rename}\NormalTok{(df, }\AttributeTok{estatura =}\NormalTok{ altura)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
                            nombre edad sexo peso estatura colesterol
1     José Luis Martínez Izquierdo   18    H   85     1.79        182
2                   Rosa Díaz Díaz   32    M   65     1.73        232
3            Javier García Sánchez   24    H   NA     1.81        191
4              Carmen López Pinzón   35    M   65     1.70        200
5             Marisa López Collado   46    M   51     1.58        148
6                Antonio Ruiz Cruz   68    H   66     1.74        249
7          Antonio Fernández Ocaña   51    H   62     1.72        276
8            Pilar Martín González   22    M   60     1.66         NA
9             Pedro Gálvez Tenorio   35    H   90     1.94        241
10         Santiago Reillo Manzano   46    H   75     1.85        280
11           Macarena Álvarez Luna   53    M   55     1.62        262
12      José María de la Guía Sanz   58    H   78     1.87        198
13 Miguel Angel Cuadrado Gutiérrez   27    H  109     1.98        210
14           Carolina Rubio Moreno   20    M   61     1.77        194
\end{verbatim}

\end{example}

\section{Creación de nuevas columnas o transformación de las
existentes}\label{creaciuxf3n-de-nuevas-columnas-o-transformaciuxf3n-de-las-existentes}

Para crear una nueva columna a partir de otras columnas del data frame
se utiliza la función

\begin{itemize}
\tightlist
\item
  \texttt{mutate(df,\ columna\ =\ formula)}: Devuelve el tibble que
  resulta de añadir una nueva columna al data frame \texttt{df} con el
  resultado de aplicar el procedimiento indicado por \texttt{formula} y
  con el nombre indicado en \texttt{columna}. Si \texttt{columna} es el
  nombre de una columna ya existente, entonces esa columna se reescribe
  con los resultados de aplicar la \texttt{formula}.
\end{itemize}

\begin{example}[]\protect\hypertarget{exm-mutate}{}\label{exm-mutate}

~

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(dplyr)}
\NormalTok{df }\OtherTok{\textless{}{-}} \FunctionTok{read.csv}\NormalTok{(}\StringTok{\textquotesingle{}https://raw.githubusercontent.com/asalber/manual{-}r/master/datos/colesterol.csv\textquotesingle{}}\NormalTok{)}
\CommentTok{\# Cambiar las unidades de la altura a centímetros}
\FunctionTok{mutate}\NormalTok{(df, }\AttributeTok{altura =}\NormalTok{ altura}\SpecialCharTok{*}\DecValTok{100}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
                            nombre edad sexo peso altura colesterol
1     José Luis Martínez Izquierdo   18    H   85    179        182
2                   Rosa Díaz Díaz   32    M   65    173        232
3            Javier García Sánchez   24    H   NA    181        191
4              Carmen López Pinzón   35    M   65    170        200
5             Marisa López Collado   46    M   51    158        148
6                Antonio Ruiz Cruz   68    H   66    174        249
7          Antonio Fernández Ocaña   51    H   62    172        276
8            Pilar Martín González   22    M   60    166         NA
9             Pedro Gálvez Tenorio   35    H   90    194        241
10         Santiago Reillo Manzano   46    H   75    185        280
11           Macarena Álvarez Luna   53    M   55    162        262
12      José María de la Guía Sanz   58    H   78    187        198
13 Miguel Angel Cuadrado Gutiérrez   27    H  109    198        210
14           Carolina Rubio Moreno   20    M   61    177        194
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Calcular el índice de masa corporal}
\FunctionTok{mutate}\NormalTok{(df, }\AttributeTok{imc =} \FunctionTok{round}\NormalTok{(peso}\SpecialCharTok{/}\NormalTok{altura}\SpecialCharTok{\^{}}\DecValTok{2}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
                            nombre edad sexo peso altura colesterol imc
1     José Luis Martínez Izquierdo   18    H   85   1.79        182  27
2                   Rosa Díaz Díaz   32    M   65   1.73        232  22
3            Javier García Sánchez   24    H   NA   1.81        191  NA
4              Carmen López Pinzón   35    M   65   1.70        200  22
5             Marisa López Collado   46    M   51   1.58        148  20
6                Antonio Ruiz Cruz   68    H   66   1.74        249  22
7          Antonio Fernández Ocaña   51    H   62   1.72        276  21
8            Pilar Martín González   22    M   60   1.66         NA  22
9             Pedro Gálvez Tenorio   35    H   90   1.94        241  24
10         Santiago Reillo Manzano   46    H   75   1.85        280  22
11           Macarena Álvarez Luna   53    M   55   1.62        262  21
12      José María de la Guía Sanz   58    H   78   1.87        198  22
13 Miguel Angel Cuadrado Gutiérrez   27    H  109   1.98        210  28
14           Carolina Rubio Moreno   20    M   61   1.77        194  19
\end{verbatim}

\end{example}

\section{Resumen de datos}\label{resumen-de-datos}

Para aplicar una función resumen a una o varias columnas de un data
frame se utiliza la función

\begin{itemize}
\tightlist
\item
  \texttt{sumarise(df,\ nombre-columna\ =\ funcion-resumen(columnas))}:
  Devuelve el tibble con la columna de nombre \texttt{nombre-columna} y
  el valor que resulta de aplicar la función indicada en
  \texttt{funcion-resumen} a las columnas del data frame \texttt{df}
  indicadas en \texttt{columnas}.
\end{itemize}

\begin{example}[]\protect\hypertarget{exm-sumarise}{}\label{exm-sumarise}

~

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(dplyr)}
\NormalTok{df }\OtherTok{\textless{}{-}} \FunctionTok{read.csv}\NormalTok{(}\StringTok{\textquotesingle{}https://raw.githubusercontent.com/asalber/manual{-}r/master/datos/colesterol.csv\textquotesingle{}}\NormalTok{)}
\CommentTok{\# Calcular la media de la edad}
\FunctionTok{summarise}\NormalTok{(df, }\AttributeTok{edad\_media =} \FunctionTok{mean}\NormalTok{(edad))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
  edad_media
1   38.21429
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Calcular la media y la desviación típica del colesterol}
\FunctionTok{summarise}\NormalTok{(df, }\AttributeTok{media =} \FunctionTok{mean}\NormalTok{(colesterol, }\AttributeTok{na.rm=}\NormalTok{T), }\AttributeTok{sd =} \FunctionTok{sd}\NormalTok{(colesterol, }\AttributeTok{na.rm=}\NormalTok{T))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
     media       sd
1 220.2308 39.84795
\end{verbatim}

\end{example}

\section{Resúmenes por grupos}\label{resuxfamenes-por-grupos}

La función \texttt{summarise} suele combinarse con la siguiente función
para obtener resúmenes estratificados por grupos.

\begin{itemize}
\tightlist
\item
  \texttt{group\_by(df,\ columnas)}: Devuelve un tibble estratificado de
  acuerdo a las categorías de las columnas indicadas en
  \texttt{columnas}. En combinación con la función \texttt{summarise}
  permite hacer resúmenes estadísticos por grupos.
\end{itemize}

\begin{example}[]\protect\hypertarget{exm-group_by}{}\label{exm-group_by}

~

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(dplyr)}
\NormalTok{df }\OtherTok{\textless{}{-}} \FunctionTok{read.csv}\NormalTok{(}\StringTok{\textquotesingle{}https://raw.githubusercontent.com/asalber/manual{-}r/master/datos/colesterol.csv\textquotesingle{}}\NormalTok{)}
\CommentTok{\# Estratificar por sexo }
\NormalTok{df.sexo }\OtherTok{\textless{}{-}} \FunctionTok{group\_by}\NormalTok{(df, sexo)}
\CommentTok{\# Edades medias por sexo}
\FunctionTok{summarise}\NormalTok{(df.sexo, }\AttributeTok{edad\_media =} \FunctionTok{mean}\NormalTok{(edad))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
# A tibble: 2 x 2
  sexo  edad_media
  <chr>      <dbl>
1 H           40.9
2 M           34.7
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Media y desviación típica del colesterol por sexo}
\FunctionTok{summarise}\NormalTok{(df.sexo, }\AttributeTok{media =} \FunctionTok{mean}\NormalTok{(colesterol, }\AttributeTok{na.rm=}\NormalTok{T), }\AttributeTok{sd =} \FunctionTok{sd}\NormalTok{(colesterol, }\AttributeTok{na.rm=}\NormalTok{T))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
# A tibble: 2 x 3
  sexo  media    sd
  <chr> <dbl> <dbl>
1 H      228.  38.4
2 M      207.  42.9
\end{verbatim}

\end{example}

\section{Composición de operaciones mediante
tuberías}\label{composiciuxf3n-de-operaciones-mediante-tuberuxedas}

\texttt{dplyr} permite componer varias operaciones sobre un data frame
mediante el operador \texttt{\%\textgreater{}\%} (\emph{pipe}), de
manera que el data frame que resulta de aplicar una operación se
convierte en el data frame de entrada para otra, siguiendo el esquema

\texttt{df\ \%\textgreater{}\%\ operación-1\ \%\textgreater{}\%\ operación-2\ \%\textgreater{}\%\ ...}

Cuando se utilizan tuberías para componer operaciones de esta forma, no
es necesario indicar el data frame como parámetro de la función que
define la acción ya que automáticamente se toma el data frame que
resulta de la operación anterior.

\begin{example}[]\protect\hypertarget{exm-tuberías-1}{}\label{exm-tuberías-1}

~

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(dplyr)}
\NormalTok{df }\OtherTok{\textless{}{-}} \FunctionTok{read.csv}\NormalTok{(}\StringTok{\textquotesingle{}https://raw.githubusercontent.com/asalber/manual{-}r/master/datos/colesterol.csv\textquotesingle{}}\NormalTok{)}
\CommentTok{\# Inicio de la tubería}
\NormalTok{df }\SpecialCharTok{\%\textgreater{}\%} 
    \CommentTok{\# Seleccionar sexo, edad y colesterol}
    \FunctionTok{select}\NormalTok{(sexo, edad, colesterol) }\SpecialCharTok{\%\textgreater{}\%}
    \CommentTok{\# Filtrar mayores de 30 años}
    \FunctionTok{filter}\NormalTok{(edad }\SpecialCharTok{\textgreater{}} \DecValTok{30}\NormalTok{) }\SpecialCharTok{\%\textgreater{}\%}
    \CommentTok{\# Estratificar por sexo}
    \FunctionTok{group\_by}\NormalTok{(sexo) }\SpecialCharTok{\%\textgreater{}\%}
    \CommentTok{\# Calcular la media del colesterol}
    \FunctionTok{summarise}\NormalTok{(}\AttributeTok{media\_colesterol =} \FunctionTok{mean}\NormalTok{(colesterol))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
# A tibble: 2 x 2
  sexo  media_colesterol
  <chr>            <dbl>
1 H                 249.
2 M                 210.
\end{verbatim}

\end{example}

\section{Ejercicios}\label{ejercicios-4}

\begin{exercise}[]\protect\hypertarget{exr-preprocesamiento-1}{}\label{exr-preprocesamiento-1}

El fichero
\href{https://raw.githubusercontent.com/asalber/manual-r/master/datos/genetica.csv}{\texttt{genetica}},
contiene información de la análitica fisiológica, microbiológica y
bioquímica, de una muestra de ratas tratadas con distintos tratamientos.

\begin{enumerate}
\def\labelenumi{\alph{enumi}.}
\item
  Crear un tibble con los datos del fichero.

  \begin{tcolorbox}[enhanced jigsaw, opacitybacktitle=0.6, toptitle=1mm, opacityback=0, bottomrule=.15mm, colbacktitle=quarto-callout-note-color!10!white, leftrule=.75mm, toprule=.15mm, title=\textcolor{quarto-callout-note-color}{\faInfo}\hspace{0.5em}{Solución}, colframe=quarto-callout-note-color-frame, titlerule=0mm, colback=white, arc=.35mm, rightrule=.15mm, coltitle=black, left=2mm, breakable, bottomtitle=1mm]

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(tidyverse)}
\NormalTok{df }\OtherTok{\textless{}{-}} \FunctionTok{read\_csv}\NormalTok{(}\StringTok{\textquotesingle{}https://raw.githubusercontent.com/asalber/manual{-}r/master/datos/genetica.csv\textquotesingle{}}\NormalTok{)}
\NormalTok{df}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
# A tibble: 21 x 20
   `código muestra` Tratamiento  `mas cor (g)`    IHS     IES     ITS     IAS
   <chr>            <chr>                <dbl>  <dbl>   <dbl>   <dbl>   <dbl>
 1 Ct-A1            Control               236  0.0433 0.00198 0.00178 0.00043
 2 Ct-A2            Control               202. 0.044  0.002   0.0017  0.0008 
 3 Ct-B1            Control               246. 0.042  0.002   0.0015  0.0005 
 4 Ct-B2            Control               237. 0.0475 0.00238 0.00203 0.00041
 5 Ct-B3            Control               231. 0.0499 0.002   0.0011  0.0005 
 6 Ct-C1            Control               235. 0.05   0.0021  0.0033  0.0014 
 7 Ct-C2            Control               228. 0.05   0.0018  0.0031  0.00059
 8 Dx-1             Dexametasona          181. 0.061  0.00155 0.0005  0.00012
 9 Dx-2             Dexametasona          198. 0.063  0.00191 0.0011  0.0002 
10 Dx-3             Dexametasona          201. 0.0577 0.0017  0.0001  0.0001 
# i 11 more rows
# i 13 more variables: `glucog(mg/g)` <dbl>, `pbmc(cel/mL)` <dbl>,
#   `CD4(cel/µL)` <dbl>, `monoc(cel/mL)` <dbl>, `IHQ: linfB(cel/mm2)` <dbl>,
#   `pulp.blan(Tx1)` <dbl>, `microorg(log nº/g)` <dbl>, `AI2(absorb)` <dbl>,
#   `gluc(mmol/L)` <dbl>, `TAG(mmol/L)` <dbl>, `col(mmol/L)` <dbl>,
#   `HDL(mmol/L)` <dbl>, `ins(pmol/L)` <dbl>
\end{verbatim}

  \end{tcolorbox}
\item
  Convertir el tratamiento en un factor.

  \begin{tcolorbox}[enhanced jigsaw, opacitybacktitle=0.6, toptitle=1mm, opacityback=0, bottomrule=.15mm, colbacktitle=quarto-callout-note-color!10!white, leftrule=.75mm, toprule=.15mm, title=\textcolor{quarto-callout-note-color}{\faInfo}\hspace{0.5em}{Solución}, colframe=quarto-callout-note-color-frame, titlerule=0mm, colback=white, arc=.35mm, rightrule=.15mm, coltitle=black, left=2mm, breakable, bottomtitle=1mm]

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df }\OtherTok{\textless{}{-}} \FunctionTok{mutate}\NormalTok{(df, }\AttributeTok{Tratamiento =} \FunctionTok{factor}\NormalTok{(Tratamiento))}
\end{Highlighting}
\end{Shaded}

  \end{tcolorbox}
\item
  Calcular el tamaño muestral de cada grupo de tratamiento

  \begin{tcolorbox}[enhanced jigsaw, opacitybacktitle=0.6, toptitle=1mm, opacityback=0, bottomrule=.15mm, colbacktitle=quarto-callout-note-color!10!white, leftrule=.75mm, toprule=.15mm, title=\textcolor{quarto-callout-note-color}{\faInfo}\hspace{0.5em}{Solución}, colframe=quarto-callout-note-color-frame, titlerule=0mm, colback=white, arc=.35mm, rightrule=.15mm, coltitle=black, left=2mm, breakable, bottomtitle=1mm]

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{count}\NormalTok{(df, Tratamiento)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
# A tibble: 3 x 2
  Tratamiento      n
  <fct>        <int>
1 Control          7
2 Dexametasona     7
3 Kanamicina       7
\end{verbatim}

  \end{tcolorbox}
\item
  Filtrar las ratas de grupo control con una masa corporal
  (\texttt{mas\ cor\ (g)}) mayor de 230 g.

  \begin{tcolorbox}[enhanced jigsaw, opacitybacktitle=0.6, toptitle=1mm, opacityback=0, bottomrule=.15mm, colbacktitle=quarto-callout-note-color!10!white, leftrule=.75mm, toprule=.15mm, title=\textcolor{quarto-callout-note-color}{\faInfo}\hspace{0.5em}{Solución}, colframe=quarto-callout-note-color-frame, titlerule=0mm, colback=white, arc=.35mm, rightrule=.15mm, coltitle=black, left=2mm, breakable, bottomtitle=1mm]

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{filter}\NormalTok{(df, Tratamiento }\SpecialCharTok{==} \StringTok{"Control"} \SpecialCharTok{\&} \StringTok{\textasciigrave{}}\AttributeTok{mas cor (g)}\StringTok{\textasciigrave{}} \SpecialCharTok{\textgreater{}} \DecValTok{230}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
# A tibble: 5 x 20
  `código muestra` Tratamiento `mas cor (g)`    IHS     IES     ITS     IAS
  <chr>            <fct>               <dbl>  <dbl>   <dbl>   <dbl>   <dbl>
1 Ct-A1            Control              236  0.0433 0.00198 0.00178 0.00043
2 Ct-B1            Control              246. 0.042  0.002   0.0015  0.0005 
3 Ct-B2            Control              237. 0.0475 0.00238 0.00203 0.00041
4 Ct-B3            Control              231. 0.0499 0.002   0.0011  0.0005 
5 Ct-C1            Control              235. 0.05   0.0021  0.0033  0.0014 
# i 13 more variables: `glucog(mg/g)` <dbl>, `pbmc(cel/mL)` <dbl>,
#   `CD4(cel/µL)` <dbl>, `monoc(cel/mL)` <dbl>, `IHQ: linfB(cel/mm2)` <dbl>,
#   `pulp.blan(Tx1)` <dbl>, `microorg(log nº/g)` <dbl>, `AI2(absorb)` <dbl>,
#   `gluc(mmol/L)` <dbl>, `TAG(mmol/L)` <dbl>, `col(mmol/L)` <dbl>,
#   `HDL(mmol/L)` <dbl>, `ins(pmol/L)` <dbl>
\end{verbatim}

  \end{tcolorbox}
\item
  Calcular la media y la desviación típica de la masa corporal
  (\texttt{mas\ cor\ (g)}) para cada tratamiento.

  \begin{tcolorbox}[enhanced jigsaw, opacitybacktitle=0.6, toptitle=1mm, opacityback=0, bottomrule=.15mm, colbacktitle=quarto-callout-note-color!10!white, leftrule=.75mm, toprule=.15mm, title=\textcolor{quarto-callout-note-color}{\faInfo}\hspace{0.5em}{Solución}, colframe=quarto-callout-note-color-frame, titlerule=0mm, colback=white, arc=.35mm, rightrule=.15mm, coltitle=black, left=2mm, breakable, bottomtitle=1mm]

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df }\SpecialCharTok{\%\textgreater{}\%}
    \FunctionTok{group\_by}\NormalTok{(Tratamiento) }\SpecialCharTok{\%\textgreater{}\%}
    \FunctionTok{summarise}\NormalTok{(}\AttributeTok{media =} \FunctionTok{mean}\NormalTok{(}\StringTok{\textasciigrave{}}\AttributeTok{mas cor (g)}\StringTok{\textasciigrave{}}\NormalTok{), }\AttributeTok{desv.est =} \FunctionTok{sd}\NormalTok{(}\StringTok{\textasciigrave{}}\AttributeTok{mas cor (g)}\StringTok{\textasciigrave{}}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
# A tibble: 3 x 3
  Tratamiento  media desv.est
  <fct>        <dbl>    <dbl>
1 Control       231.     13.6
2 Dexametasona  191.     14.2
3 Kanamicina    229.     13.9
\end{verbatim}

  \end{tcolorbox}
\item
  Calcular la media y la desviación típica de todas las variables para
  cada tratamiento.

  \begin{tcolorbox}[enhanced jigsaw, opacitybacktitle=0.6, toptitle=1mm, opacityback=0, bottomrule=.15mm, colbacktitle=quarto-callout-note-color!10!white, leftrule=.75mm, toprule=.15mm, title=\textcolor{quarto-callout-note-color}{\faInfo}\hspace{0.5em}{Solución}, colframe=quarto-callout-note-color-frame, titlerule=0mm, colback=white, arc=.35mm, rightrule=.15mm, coltitle=black, left=2mm, breakable, bottomtitle=1mm]

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df }\SpecialCharTok{\%\textgreater{}\%}
    \FunctionTok{pivot\_longer}\NormalTok{(}\SpecialCharTok{{-}}\FunctionTok{c}\NormalTok{(}\StringTok{\textasciigrave{}}\AttributeTok{código muestra}\StringTok{\textasciigrave{}}\NormalTok{, Tratamiento), }\AttributeTok{names\_to =} \StringTok{"Variable"}\NormalTok{, }\AttributeTok{values\_to =} \StringTok{"Valor"}\NormalTok{) }\SpecialCharTok{\%\textgreater{}\%}
    \FunctionTok{group\_by}\NormalTok{(Variable) }\SpecialCharTok{\%\textgreater{}\%}
    \FunctionTok{summarise}\NormalTok{(}\AttributeTok{media =} \FunctionTok{mean}\NormalTok{(Valor), }\AttributeTok{desv.est =} \FunctionTok{sd}\NormalTok{(Valor))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
# A tibble: 18 x 3
   Variable              media desv.est
   <chr>                 <dbl>    <dbl>
 1 AI2(absorb)         2.86e-1  1.63e-1
 2 CD4(cel/µL)         1.05e+3  1.50e+3
 3 HDL(mmol/L)         1.49e+0  6.20e-1
 4 IAS                 5.26e-4  3.92e-4
 5 IES                 1.96e-3  1.96e-4
 6 IHQ: linfB(cel/mm2) 7.95e+1  7.62e+1
 7 IHS                 5.14e-2  7.12e-3
 8 ITS                 1.80e-3  8.63e-4
 9 TAG(mmol/L)         3.98e+0  2.09e+0
10 col(mmol/L)         2.44e+0  1.29e+0
11 gluc(mmol/L)        3.57e+1  1.88e+1
12 glucog(mg/g)        7.83e+1  3.81e+1
13 ins(pmol/L)         1.91e+2  1.05e+2
14 mas cor (g)         2.17e+2  2.28e+1
15 microorg(log nº/g)  2.35e+0  1.61e+0
16 monoc(cel/mL)       1.32e+4  4.68e+3
17 pbmc(cel/mL)        1.27e+7  2.10e+7
18 pulp.blan(Tx1)      2.75e-1  1.12e-1
\end{verbatim}

  \end{tcolorbox}
\end{enumerate}

\end{exercise}

\bookmarksetup{startatroot}

\chapter{Gráficos y visualización de
datos}\label{gruxe1ficos-y-visualizaciuxf3n-de-datos}

R incorpora funciones para realizar gráficos de distintos tipos, pero
actualmente existen paquetes especializados para la visualización de
datos como \texttt{ggplot2} que permiten realizar multitud de gráficos
de manera más estructurada.

\section{\texorpdfstring{Gramática de gráficos y el paquete
\texttt{ggplot2}}{Gramática de gráficos y el paquete ggplot2}}\label{gramuxe1tica-de-gruxe1ficos-y-el-paquete-ggplot2}

El paquete \href{https://ggplot2.tidyverse.org/}{\texttt{ggplot2}} forma
parte de la colección de paquetes \texttt{tidyverse} que ya se introdujo
en la sección anterior.

Este paquete implementa la
\href{https://www.academia.edu/54823545/The_grammar_of_graphics}{gramática
de gráficos} descrita por Leland Wilkinson, que proporciona un sistema
formal para representar distintas variables mediante distintos atributos
gráficos (aesthetics) como la forma, el tamaño o el color de objetos
geométricos como puntos, líneas o barras. Esto hace que la creación de
gráficos con este paquete sea, en general, más intuitiva una vez se
entiende la lógica de la gramática.

En general, para definir un gráfico con \texttt{ggplot2} se suelen
definir los siguientes elementos:

\begin{itemize}
\tightlist
\item
  \textbf{Datos}. Los datos deben estar contenidos en un data frame o
  tibble en formato ordenado (\emph{tidy}).
\item
  \textbf{Atributos (\emph{aesthetics})}. Las variables que quieren
  representarse en el gráfico deben asociarse a atributos gráficos como
  los ejes x, y, z, el color, el tamaño, la forma de los objetos
  geométricos.
\item
  \textbf{Capas de objetos geométricos (\emph{geoms})}. Están formadas
  por elementos geométricos (puntos, líneas, barras, etc.) cuya
  posición, forma, tamaño y color, depende de los atributos.
\item
  \textbf{Escalas}. Definen la escala para los ejes del diagrama así
  como las leyendas para el resto de atributos.
\item
  \textbf{Sistema de coordenadas}. Describe el sistema de coordenadas
  utilizado para representar los objetos geométricos en el plano o en el
  espacio (normalmente el sistema cartesiano).
\item
  \textbf{Facetas}. Permite descomponer un gráfico en múltiples gráficos
  para distintos subconjuntos del conjunto de datos.
\item
  \textbf{Tema}. Permite cambiar elementos secundarios del gráfico como
  el tipo de letra de las etiquetas y leyendas, el tamaño de la fuente,
  el color de fondo, aspecto final del los gráficos.
\end{itemize}

\begin{figure}[H]

{\centering \pandocbounded{\includegraphics[keepaspectratio]{img/graficos/ggplot-grammar-of-graphics.png}}

}

\caption{Gramática de gráficos de ggplot2}

\end{figure}%

Estos elementos se suelen añadir por capas al gráfico mediante el
operador \texttt{+}.

\section{Inicialización de un
gráfico}\label{inicializaciuxf3n-de-un-gruxe1fico}

Para dibujar un gráfico con \texttt{ggplot2} debemos comenzar por la
siguiente función

\begin{itemize}
\tightlist
\item
  \texttt{ggplot(df,\ aes(atributo1\ =\ var1,\ atributo2\ =\ var2,\ ...))}:
  Inicializa un gráfico con las variables \texttt{var1}, \texttt{var2},
  etc. del data frame \texttt{df} asociadas a los atributos
  \texttt{atributo1}, \texttt{atributo2}, etc. respectivamente. Los
  atributos pueden más comunes son:

  \begin{itemize}
  \tightlist
  \item
    x: Posición en el eje x del objeto geométrico.
  \item
    y: Posición en el eje y del objeto geométrico.
  \item
    z: Posición en el eje z del objeto geométrico.
  \item
    shape: Forma del punto.
  \item
    size: Tamaño del punto.
  \item
    linetype: Forma de la línea.
  \item
    linewidth: Anchura de la línea.
  \item
    colour: Color del objeto geométrico.
  \item
    fill: Color de relleno del objeto geométrico.
  \end{itemize}
\end{itemize}

\begin{tcolorbox}[enhanced jigsaw, opacitybacktitle=0.6, toptitle=1mm, opacityback=0, bottomrule=.15mm, colbacktitle=quarto-callout-important-color!10!white, leftrule=.75mm, toprule=.15mm, title=\textcolor{quarto-callout-important-color}{\faExclamation}\hspace{0.5em}{Importante}, colframe=quarto-callout-important-color-frame, titlerule=0mm, colback=white, arc=.35mm, rightrule=.15mm, coltitle=black, left=2mm, breakable, bottomtitle=1mm]

Todos los atributos se indican dentro de la función \texttt{aes()}.

\end{tcolorbox}

\section{Diagramas de puntos}\label{diagramas-de-puntos}

Para dibujar un diagrama de puntos se utiliza la capa de objetos
geométricos

\begin{itemize}
\tightlist
\item
  \texttt{geom\_point()}: Dibuja un diagrama de líneas que unen los
  puntos con coordenadas dadas por los pares de valores de las variables
  asociadas a los atributos \texttt{x} e \texttt{y}.
\end{itemize}

Esta capa es ideal para representar diagramas de dispersión.

\begin{example}[]\protect\hypertarget{exm-puntos-1}{}\label{exm-puntos-1}

~

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(dplyr)}
\FunctionTok{library}\NormalTok{(ggplot2)}
\NormalTok{df }\OtherTok{\textless{}{-}} \FunctionTok{read.csv}\NormalTok{(}\StringTok{\textquotesingle{}https://raw.githubusercontent.com/asalber/manual{-}r/master/datos/temperaturas.csv\textquotesingle{}}\NormalTok{) }\SpecialCharTok{\%\textgreater{}\%}
    \FunctionTok{mutate}\NormalTok{(Día }\OtherTok{=} \FunctionTok{factor}\NormalTok{(Día, }\AttributeTok{levels =} \FunctionTok{c}\NormalTok{(}\StringTok{"L"}\NormalTok{, }\StringTok{"M"}\NormalTok{, }\StringTok{"X"}\NormalTok{, }\StringTok{"J"}\NormalTok{, }\StringTok{"V"}\NormalTok{, }\StringTok{"S"}\NormalTok{, }\StringTok{"D"}\NormalTok{)))}
\CommentTok{\# Filtrar los datos de Madrid}
\NormalTok{df.madrid }\OtherTok{=} \FunctionTok{filter}\NormalTok{(df, Ciudad }\SpecialCharTok{==} \StringTok{"Madrid"}\NormalTok{)}
\CommentTok{\# Inicializar el gráfico con el día en el atributo x y la temperatura en el atributo y.}
\FunctionTok{ggplot}\NormalTok{(df.madrid, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ Día, }\AttributeTok{y =}\NormalTok{ Temperatura)) }\SpecialCharTok{+}
\CommentTok{\# Añadir la capa de los puntos.}
    \FunctionTok{geom\_point}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\pandocbounded{\includegraphics[keepaspectratio]{07-graficos_files/figure-pdf/unnamed-chunk-1-1.pdf}}

\end{example}

\begin{example}[]\protect\hypertarget{exm-puntos-2}{}\label{exm-puntos-2}

~

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Inicializar el gráfico con el día en el atributo x, la temperatura en el atributo y, y la ciudad en el atributo shape.}
\FunctionTok{ggplot}\NormalTok{(df, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ Día, }\AttributeTok{y =}\NormalTok{ Temperatura, }\AttributeTok{shape =}\NormalTok{ Ciudad)) }\SpecialCharTok{+}
\CommentTok{\# Añadir la capa de los puntos.}
    \FunctionTok{geom\_point}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\pandocbounded{\includegraphics[keepaspectratio]{07-graficos_files/figure-pdf/unnamed-chunk-2-1.pdf}}

\end{example}

\begin{example}[]\protect\hypertarget{exm-puntos-3}{}\label{exm-puntos-3}

~

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Inicializar el gráfico con el día en el atributo x, la temperatura en el atributo y, y la ciudad en el atributo colour.}
\FunctionTok{ggplot}\NormalTok{(df, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ Día, }\AttributeTok{y =}\NormalTok{ Temperatura, }\AttributeTok{colour =}\NormalTok{ Ciudad)) }\SpecialCharTok{+}
\CommentTok{\# Añadir la capa de los puntos.}
    \FunctionTok{geom\_point}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\pandocbounded{\includegraphics[keepaspectratio]{07-graficos_files/figure-pdf/unnamed-chunk-3-1.pdf}}

\end{example}

\begin{example}[]\protect\hypertarget{exm-puntos-4}{}\label{exm-puntos-4}

~

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(ggplot2)}
\NormalTok{df }\OtherTok{\textless{}{-}} \FunctionTok{read.csv}\NormalTok{(}\StringTok{\textquotesingle{}https://raw.githubusercontent.com/asalber/manual{-}r/master/datos/colesterol.csv\textquotesingle{}}\NormalTok{)}
\CommentTok{\# Inicializar el gráfico con la altura en el atributo x y el peso en el atributo y.}
\FunctionTok{ggplot}\NormalTok{(df, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ altura, }\AttributeTok{y =}\NormalTok{ peso)) }\SpecialCharTok{+}
\CommentTok{\# Añadir la capa de los puntos.}
    \FunctionTok{geom\_point}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
Warning: Removed 1 row containing missing values or values outside the scale range
(`geom_point()`).
\end{verbatim}

\pandocbounded{\includegraphics[keepaspectratio]{07-graficos_files/figure-pdf/unnamed-chunk-4-1.pdf}}

\end{example}

\begin{example}[]\protect\hypertarget{exm-puntos-5}{}\label{exm-puntos-5}

~

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Inicializar el gráfico con la altura en el atributo x, el peso en el atributo y, y el sexo en el atributo colour.}
\FunctionTok{ggplot}\NormalTok{(df, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ altura, }\AttributeTok{y =}\NormalTok{ peso, }\AttributeTok{colour =}\NormalTok{ sexo)) }\SpecialCharTok{+}
\CommentTok{\# Añadir la capa de los puntos.}
    \FunctionTok{geom\_point}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
Warning: Removed 1 row containing missing values or values outside the scale range
(`geom_point()`).
\end{verbatim}

\pandocbounded{\includegraphics[keepaspectratio]{07-graficos_files/figure-pdf/unnamed-chunk-5-1.pdf}}

\end{example}

\href{https://ggplot2.tidyverse.org/reference/geom_point.html}{Más
información sobre \texttt{geom\_point}}.

\section{Diagramas de líneas}\label{diagramas-de-luxedneas}

Para dibujar un diagrama de líneas se utiliza la capa de objetos
geométricos

\begin{itemize}
\tightlist
\item
  \texttt{geom\_line()}: Dibuja un diagrama de líneas que unen los
  puntos con coordenadas dadas por los pares de valores de las variables
  asociadas a los atributos \texttt{x} e \texttt{y}. Cuando la variable
  asociada al atributo \texttt{x} es un factor, debe asociarse también
  una variable al atributo \texttt{group} para determina los grupos que
  se unirán mediante líneas. Si solo hay un grupo debe indicarse
  \texttt{group\ =\ 1}.
\end{itemize}

Esta capa es ideal para representar series temporales.

\begin{example}[]\protect\hypertarget{exm-lineas-1}{}\label{exm-lineas-1}

~

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(dplyr)}
\FunctionTok{library}\NormalTok{(ggplot2)}
\NormalTok{df }\OtherTok{\textless{}{-}} \FunctionTok{read.csv}\NormalTok{(}\StringTok{\textquotesingle{}https://raw.githubusercontent.com/asalber/manual{-}r/master/datos/temperaturas.csv\textquotesingle{}}\NormalTok{) }\SpecialCharTok{\%\textgreater{}\%}
    \FunctionTok{mutate}\NormalTok{(Día }\OtherTok{=} \FunctionTok{factor}\NormalTok{(Día, }\AttributeTok{levels =} \FunctionTok{c}\NormalTok{(}\StringTok{"L"}\NormalTok{, }\StringTok{"M"}\NormalTok{, }\StringTok{"X"}\NormalTok{, }\StringTok{"J"}\NormalTok{, }\StringTok{"V"}\NormalTok{, }\StringTok{"S"}\NormalTok{, }\StringTok{"D"}\NormalTok{)))}
\CommentTok{\# Filtrar los datos de Madrid}
\NormalTok{df.madrid }\OtherTok{=} \FunctionTok{filter}\NormalTok{(df, Ciudad }\SpecialCharTok{==} \StringTok{"Madrid"}\NormalTok{)}
\CommentTok{\# Inicializar el gráfico con el día en el atributo x y la temperatura en el atributo y. }
\FunctionTok{ggplot}\NormalTok{(df.madrid, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ Día, }\AttributeTok{y =}\NormalTok{ Temperatura, }\AttributeTok{group =} \DecValTok{1}\NormalTok{)) }\SpecialCharTok{+}
\CommentTok{\# Añadir la capa de las lineas.}
    \FunctionTok{geom\_line}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\pandocbounded{\includegraphics[keepaspectratio]{07-graficos_files/figure-pdf/unnamed-chunk-6-1.pdf}}

\end{example}

\begin{example}[]\protect\hypertarget{exm-lineas-2}{}\label{exm-lineas-2}

~

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Inicializar el gráfico con el día en el atributo x, la temperatura en el atributo y, y la ciudad en los atributos group y linetype.}
\FunctionTok{ggplot}\NormalTok{(df, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ Día, }\AttributeTok{y =}\NormalTok{ Temperatura, }\AttributeTok{group =}\NormalTok{ Ciudad, }\AttributeTok{linetype =}\NormalTok{ Ciudad)) }\SpecialCharTok{+}
\CommentTok{\# Añadir la capa de las lineas.}
    \FunctionTok{geom\_line}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\pandocbounded{\includegraphics[keepaspectratio]{07-graficos_files/figure-pdf/unnamed-chunk-7-1.pdf}}

\end{example}

\begin{example}[]\protect\hypertarget{exm-lineas-3}{}\label{exm-lineas-3}

~

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Inicializar el gráfico con el día en el atributo x, la temperatura en el atributo y, y la ciudad en los atributos group y colour.}
\FunctionTok{ggplot}\NormalTok{(df, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ Día, }\AttributeTok{y =}\NormalTok{ Temperatura, }\AttributeTok{group =}\NormalTok{ Ciudad, }\AttributeTok{colour =}\NormalTok{ Ciudad)) }\SpecialCharTok{+}
\CommentTok{\# Añadir la capa de las lineas.}
    \FunctionTok{geom\_line}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\pandocbounded{\includegraphics[keepaspectratio]{07-graficos_files/figure-pdf/unnamed-chunk-8-1.pdf}}

\end{example}

\href{https://ggplot2.tidyverse.org/reference/geom_path.html}{Más
información sobre \texttt{geom\_line}}.

\section{Diagramas de barras}\label{diagramas-de-barras}

Para dibujar un diagrama de barras se utiliza la capa de objetos
geométricos

\begin{itemize}
\tightlist
\item
  \texttt{geom\_bar(aes(weight\ =\ var))}: Dibuja un diagrama de barras
  con la variable asociada al atributo \texttt{x} o \texttt{y} (si se
  usa el atributo \texttt{x} las barras son verticales y se usa
  \texttt{y} horizontales), donde la altura de las barras viene dada por
  la variable \texttt{var}. Si no se indica Por defecto, la altura de
  las barras representa la frecuencia absoluta de cada valor de la
  variable. Si no se indica el atributo \texttt{weight} la altura de las
  barras es la frecuencia absoluta de los valores de la variable
  asociada a los atributos \texttt{x} o \texttt{y}.
\end{itemize}

\begin{example}[]\protect\hypertarget{exm-barras-1}{}\label{exm-barras-1}

~

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(dplyr)}
\FunctionTok{library}\NormalTok{(ggplot2)}
\NormalTok{df }\OtherTok{\textless{}{-}} \FunctionTok{read.csv}\NormalTok{(}\StringTok{\textquotesingle{}https://raw.githubusercontent.com/asalber/manual{-}r/master/datos/temperaturas.csv\textquotesingle{}}\NormalTok{) }\SpecialCharTok{\%\textgreater{}\%}
    \FunctionTok{mutate}\NormalTok{(Día }\OtherTok{=} \FunctionTok{factor}\NormalTok{(Día, }\AttributeTok{levels =} \FunctionTok{c}\NormalTok{(}\StringTok{"L"}\NormalTok{, }\StringTok{"M"}\NormalTok{, }\StringTok{"X"}\NormalTok{, }\StringTok{"J"}\NormalTok{, }\StringTok{"V"}\NormalTok{, }\StringTok{"S"}\NormalTok{, }\StringTok{"D"}\NormalTok{)))}
\NormalTok{df}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
      Ciudad Día Temperatura
1     Madrid   L        28.5
2     Madrid   M        30.5
3     Madrid   X        31.0
4     Madrid   J        30.0
5     Madrid   V        28.0
6     Madrid   S        27.5
7     Madrid   D        30.5
8  Barcelona   L        24.5
9  Barcelona   M        25.5
10 Barcelona   X        26.5
11 Barcelona   J        25.0
12 Barcelona   V        26.5
13 Barcelona   S        24.5
14 Barcelona   D        25.0
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Filtrar los datos de Madrid}
\NormalTok{df.madrid }\OtherTok{=} \FunctionTok{filter}\NormalTok{(df, Ciudad }\SpecialCharTok{==} \StringTok{"Madrid"}\NormalTok{)}
\CommentTok{\# Inicializar el gráfico con el día en el atributo x.}
\FunctionTok{ggplot}\NormalTok{(df.madrid, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ Día)) }\SpecialCharTok{+}
\CommentTok{\# Añadir la capa de las barras con altura la temperatura.}
    \FunctionTok{geom\_bar}\NormalTok{(}\FunctionTok{aes}\NormalTok{(}\AttributeTok{weight =}\NormalTok{ Temperatura))}
\end{Highlighting}
\end{Shaded}

\pandocbounded{\includegraphics[keepaspectratio]{07-graficos_files/figure-pdf/unnamed-chunk-9-1.pdf}}

\end{example}

\begin{example}[]\protect\hypertarget{exm-barras-2}{}\label{exm-barras-2}

~

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Inicializar el gráfico con el día en el atributo y.}
\FunctionTok{ggplot}\NormalTok{(df.madrid, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{y =}\NormalTok{ Día)) }\SpecialCharTok{+}
\CommentTok{\# Añadir la capa de las barras con altura la temperatura.}
    \FunctionTok{geom\_bar}\NormalTok{(}\FunctionTok{aes}\NormalTok{(}\AttributeTok{weight =}\NormalTok{ Temperatura))}
\end{Highlighting}
\end{Shaded}

\pandocbounded{\includegraphics[keepaspectratio]{07-graficos_files/figure-pdf/unnamed-chunk-10-1.pdf}}

\end{example}

\begin{example}[]\protect\hypertarget{exm-barras-3}{}\label{exm-barras-3}

~

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Inicializar el gráfico con el día en el atributo x y la ciudad en el color de relleno.}
\FunctionTok{ggplot}\NormalTok{(df, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ Día, }\AttributeTok{fill =}\NormalTok{ Ciudad)) }\SpecialCharTok{+}
\CommentTok{\# Añadir la capa de las barras con altura la temperatura (por defecto barras acumuladas).}
    \FunctionTok{geom\_bar}\NormalTok{(}\FunctionTok{aes}\NormalTok{(}\AttributeTok{weight =}\NormalTok{ Temperatura))}
\end{Highlighting}
\end{Shaded}

\pandocbounded{\includegraphics[keepaspectratio]{07-graficos_files/figure-pdf/unnamed-chunk-11-1.pdf}}

\end{example}

\begin{example}[]\protect\hypertarget{exm-barras-4}{}\label{exm-barras-4}

~

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Inicializar el gráfico con el día en el atributo x y la ciudad en el color de relleno.}
\FunctionTok{ggplot}\NormalTok{(df, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ Día, }\AttributeTok{fill =}\NormalTok{ Ciudad)) }\SpecialCharTok{+}
\CommentTok{\# Añadir la capa de las barras con altura la temperatura indicando barras separadas.}
    \FunctionTok{geom\_bar}\NormalTok{(}\FunctionTok{aes}\NormalTok{(}\AttributeTok{weight =}\NormalTok{ Temperatura), }\AttributeTok{position =} \StringTok{"dodge"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\pandocbounded{\includegraphics[keepaspectratio]{07-graficos_files/figure-pdf/unnamed-chunk-12-1.pdf}}

\end{example}

\begin{example}[]\protect\hypertarget{exm-barras-5}{}\label{exm-barras-5}

~

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(ggplot2)}
\NormalTok{df }\OtherTok{\textless{}{-}} \FunctionTok{read.csv}\NormalTok{(}\StringTok{\textquotesingle{}https://raw.githubusercontent.com/asalber/manual{-}r/master/datos/colesterol.csv\textquotesingle{}}\NormalTok{)}
\CommentTok{\# Inicializar el gráfico con el sexo en el atributo x.}
\FunctionTok{ggplot}\NormalTok{(df, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ sexo)) }\SpecialCharTok{+}
\CommentTok{\# Añadir la capa de las barras.}
    \FunctionTok{geom\_bar}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\pandocbounded{\includegraphics[keepaspectratio]{07-graficos_files/figure-pdf/unnamed-chunk-13-1.pdf}}

\end{example}

\begin{example}[]\protect\hypertarget{exm-barras-6}{}\label{exm-barras-6}

~

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Inicializar el gráfico con el sexo en los atributos x y fill.}
\FunctionTok{ggplot}\NormalTok{(df, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ sexo, }\AttributeTok{fill =}\NormalTok{ sexo)) }\SpecialCharTok{+}
\CommentTok{\# Añadir la capa de las barras.}
    \FunctionTok{geom\_bar}\NormalTok{() }
\end{Highlighting}
\end{Shaded}

\pandocbounded{\includegraphics[keepaspectratio]{07-graficos_files/figure-pdf/unnamed-chunk-14-1.pdf}}

\end{example}

\begin{example}[]\protect\hypertarget{exm-barras-7}{}\label{exm-barras-7}

~

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Inicializar el gráfico con el sexo en los atributos x y fill.}
\FunctionTok{ggplot}\NormalTok{(df, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ sexo, }\AttributeTok{fill =}\NormalTok{ sexo)) }\SpecialCharTok{+}
\CommentTok{\# Añadir la capa de las barras con frecuencias relativas.}
     \FunctionTok{geom\_bar}\NormalTok{(}\FunctionTok{aes}\NormalTok{(}\AttributeTok{y =} \FunctionTok{after\_stat}\NormalTok{(count }\SpecialCharTok{/} \FunctionTok{sum}\NormalTok{(count) }\SpecialCharTok{*} \DecValTok{100}\NormalTok{))) }\SpecialCharTok{+}
\CommentTok{\# Cambiamos la etiqueta del eje y}
\FunctionTok{labs}\NormalTok{(}\AttributeTok{y =} \StringTok{"Porcentaje (\%)"}\NormalTok{) }
\end{Highlighting}
\end{Shaded}

\pandocbounded{\includegraphics[keepaspectratio]{07-graficos_files/figure-pdf/unnamed-chunk-15-1.pdf}}

\end{example}

\href{https://ggplot2.tidyverse.org/reference/geom_bar.html}{Más
información sobre \texttt{geom\_bar}}.

\section{Histogramas}\label{histogramas}

Para dibujar un histograma se utiliza la capa de objetos geométricos

\begin{itemize}
\tightlist
\item
  \texttt{geom\_histogram(bins\ =\ clases,\ binwidth\ =\ anchura)}:
  Dibuja un histograma de la variable asociada al atributo \texttt{x}
  usando el número de clases indicado por \texttt{clases} o bien clases
  de amplitud indicada por \texttt{anchura}. Si no se indica el
  parámetro \texttt{bins} o \texttt{bindwidth} se toman 30 clases por
  defecto.
\end{itemize}

\begin{example}[]\protect\hypertarget{exm-histograma-1}{}\label{exm-histograma-1}

~

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(ggplot2)}
\NormalTok{df }\OtherTok{\textless{}{-}} \FunctionTok{read.csv}\NormalTok{(}\StringTok{\textquotesingle{}https://raw.githubusercontent.com/asalber/manual{-}r/master/datos/colesterol.csv\textquotesingle{}}\NormalTok{)}
\CommentTok{\# Inicializar el gráfico con la edad en el atributo x.}
\FunctionTok{ggplot}\NormalTok{(df, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ altura)) }\SpecialCharTok{+}
\CommentTok{\# Añadir la capa del histograma.}
    \FunctionTok{geom\_histogram}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\pandocbounded{\includegraphics[keepaspectratio]{07-graficos_files/figure-pdf/unnamed-chunk-16-1.pdf}}

\end{example}

\begin{example}[]\protect\hypertarget{exm-histograma-2}{}\label{exm-histograma-2}

~

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Inicializar el gráfico con la edad en el atributo x.}
\FunctionTok{ggplot}\NormalTok{(df, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ altura)) }\SpecialCharTok{+}
\CommentTok{\# Añadir la capa del histograma con anchura de clases 5.}
    \FunctionTok{geom\_histogram}\NormalTok{(}\AttributeTok{binwidth =} \FloatTok{0.1}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\pandocbounded{\includegraphics[keepaspectratio]{07-graficos_files/figure-pdf/unnamed-chunk-17-1.pdf}}

\end{example}

\begin{example}[]\protect\hypertarget{exm-histograma-3}{}\label{exm-histograma-3}

~

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Inicializar el gráfico con la edad en el atributo x y el sexo en el atributo fill.}
\FunctionTok{ggplot}\NormalTok{(df, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ altura, }\AttributeTok{fill =}\NormalTok{ sexo)) }\SpecialCharTok{+}
\CommentTok{\# Añadir la capa del histograma con anchura de clases 10.}
    \FunctionTok{geom\_histogram}\NormalTok{(}\AttributeTok{binwidth =} \FloatTok{0.1}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\pandocbounded{\includegraphics[keepaspectratio]{07-graficos_files/figure-pdf/unnamed-chunk-18-1.pdf}}

\end{example}

\begin{example}[]\protect\hypertarget{exm-histograma-3}{}\label{exm-histograma-3}

~

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Inicializar el gráfico con la edad en el atributo x y el sexo en el atributo fill.}
\FunctionTok{ggplot}\NormalTok{(df, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ altura, }\AttributeTok{fill =}\NormalTok{ sexo)) }\SpecialCharTok{+}
\CommentTok{\# Añadir la capa del histograma con anchura de clases 10.}
    \FunctionTok{geom\_histogram}\NormalTok{(}\AttributeTok{binwidth =} \FloatTok{0.1}\NormalTok{,}\AttributeTok{alpha=}\FloatTok{0.4}\NormalTok{, }\AttributeTok{position=}\StringTok{"identity"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\pandocbounded{\includegraphics[keepaspectratio]{07-graficos_files/figure-pdf/unnamed-chunk-19-1.pdf}}

\end{example}

\href{https://ggplot2.tidyverse.org/reference/geom_histogram.html}{Más
información sobre \texttt{geom\_histogram}}.

\section{Diagramas de densidad}\label{diagramas-de-densidad}

Para dibujar un diagrama de densidad se utiliza la capa de objetos
geométricos

\begin{itemize}
\tightlist
\item
  \texttt{geom\_density()}: Dibuja un diagrama de densidad de
  probabilidad estimada de los valores de la variable asociada al
  atributo \texttt{x}.
\end{itemize}

Este diagrama es una alternativa a los histogramas para representar la
distribución de probabilidad de los valores de una variable.

\begin{example}[]\protect\hypertarget{exm-densidad-1}{}\label{exm-densidad-1}

~

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(ggplot2)}
\NormalTok{df }\OtherTok{\textless{}{-}} \FunctionTok{read.csv}\NormalTok{(}\StringTok{\textquotesingle{}https://raw.githubusercontent.com/asalber/manual{-}r/master/datos/colesterol.csv\textquotesingle{}}\NormalTok{)}
\CommentTok{\# Inicializar el gráfico con la edad en el atributo x.}
\FunctionTok{ggplot}\NormalTok{(df, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ edad)) }\SpecialCharTok{+}
\CommentTok{\# Añadir la capa de la densidad de probabilidad.}
    \FunctionTok{geom\_density}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\pandocbounded{\includegraphics[keepaspectratio]{07-graficos_files/figure-pdf/unnamed-chunk-20-1.pdf}}

\end{example}

\begin{example}[]\protect\hypertarget{exm-densidad-2}{}\label{exm-densidad-2}

~

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Inicializar el gráfico con la edad en el atributo x y el sexo en el atributo colour.}
\FunctionTok{ggplot}\NormalTok{(df, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ edad, }\AttributeTok{colour =}\NormalTok{ sexo)) }\SpecialCharTok{+}
\CommentTok{\# Añadir la capa de la densidad de probabilidad.}
    \FunctionTok{geom\_density}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\pandocbounded{\includegraphics[keepaspectratio]{07-graficos_files/figure-pdf/unnamed-chunk-21-1.pdf}}

\end{example}

\href{https://ggplot2.tidyverse.org/reference/geom_density.html}{Más
información sobre \texttt{geom\_density}}.

\section{Diagramas de cajas}\label{diagramas-de-cajas}

Para dibujar un diagrama de caja y bigotes se utiliza la capa de objetos
geométricos

\begin{itemize}
\tightlist
\item
  \texttt{geom\_boxplot()}: Dibuja un diagrama de caja y bigotes de la
  variable asociada al atributo \texttt{x} o \texttt{y}. Si se utiliza
  el atributo \texttt{x} la caja se representa horizontalmente, y si se
  utiliza el atributo \texttt{y} verticalmente.
\end{itemize}

\begin{example}[]\protect\hypertarget{exm-cajas-1}{}\label{exm-cajas-1}

~

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(ggplot2)}
\NormalTok{df }\OtherTok{\textless{}{-}} \FunctionTok{read.csv}\NormalTok{(}\StringTok{\textquotesingle{}https://raw.githubusercontent.com/asalber/manual{-}r/master/datos/colesterol.csv\textquotesingle{}}\NormalTok{)}
\CommentTok{\# Inicializar el gráfico con el colesterol en el atributo x.}
\FunctionTok{ggplot}\NormalTok{(df, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ colesterol)) }\SpecialCharTok{+}
\CommentTok{\# Añadir la capa de la caja.}
    \FunctionTok{geom\_boxplot}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
Warning: Removed 1 row containing non-finite outside the scale range
(`stat_boxplot()`).
\end{verbatim}

\pandocbounded{\includegraphics[keepaspectratio]{07-graficos_files/figure-pdf/unnamed-chunk-22-1.pdf}}

\end{example}

\begin{example}[]\protect\hypertarget{exm-cajas-2}{}\label{exm-cajas-2}

~

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Inicializar el gráfico con la altura en el atributo y y el sexo en el atributo fill.}
\FunctionTok{ggplot}\NormalTok{(df, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{y =}\NormalTok{ altura, }\AttributeTok{fill =}\NormalTok{ sexo)) }\SpecialCharTok{+}
\CommentTok{\# Añadir la capa de la caja.}
    \FunctionTok{geom\_boxplot}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\pandocbounded{\includegraphics[keepaspectratio]{07-graficos_files/figure-pdf/unnamed-chunk-23-1.pdf}}

\end{example}

\href{https://ggplot2.tidyverse.org/reference/geom_boxplot.html}{Más
información sobre \texttt{geom\_boxplot}}.

\section{Diagrama de sectores}\label{diagrama-de-sectores}

Para dibujar un diagrama de sectores se utiliza la misma capa de objetos
geométricos que para los diagramas de barras (\texttt{geom\_bar}) pero
añadiendo el sistema de coordenadas polares.

\begin{itemize}
\tightlist
\item
  \texttt{coor\_polar(theta\ =\ "x"\textbar{}"y")}: Cambia al sistema de
  coordenadas cartesianas polares, donde el ángulo viene dado por la
  variable asociada al atributo ``x'' o el atributo ``y''.
\end{itemize}

\begin{example}[]\protect\hypertarget{exm-sectores-1}{}\label{exm-sectores-1}

~

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(ggplot2)}
\NormalTok{df }\OtherTok{\textless{}{-}} \FunctionTok{read.csv}\NormalTok{(}\StringTok{\textquotesingle{}https://raw.githubusercontent.com/asalber/manual{-}r/master/datos/colesterol.csv\textquotesingle{}}\NormalTok{)}
\CommentTok{\# Inicializar el gráfico con el sexo en el atributo x.}
\FunctionTok{ggplot}\NormalTok{(df, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =} \StringTok{""}\NormalTok{, }\AttributeTok{fill =}\NormalTok{ sexo)) }\SpecialCharTok{+}
\CommentTok{\# Añadir la capa de las barras.}
    \FunctionTok{geom\_bar}\NormalTok{() }\SpecialCharTok{+}
\CommentTok{\# Añadir el sistema de coordenadas polares}
    \FunctionTok{coord\_polar}\NormalTok{(}\AttributeTok{theta =} \StringTok{"y"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\pandocbounded{\includegraphics[keepaspectratio]{07-graficos_files/figure-pdf/unnamed-chunk-24-1.pdf}}

\end{example}

\section{Interpolación y ajustes de
regresión}\label{interpolaciuxf3n-y-ajustes-de-regresiuxf3n}

Para dibujar una línea de interpolación o de ajuste de regresión se
utiliza la capa de objetos geométricos

\begin{itemize}
\tightlist
\item
  \texttt{geom\_smooth(method\ =\ ajuste,\ formula\ =\ ecuación)}:
  Dibuja una línea de ajuste para los puntos con coordenadas dadas por
  los pares de valores de las variables asociadas a los atributos
  \texttt{x} e \texttt{y}, usando el método de ajuste dado por por
  \texttt{ajuste} y la fórmula dada por \texttt{ecuación}. Los métodos
  de ajuste más habituales son:

  \begin{itemize}
  \tightlist
  \item
    \href{https://rdrr.io/r/stats/loess.html}{\texttt{"loess"}}: Ajuste
    de regresión polinomial local. Es la que se utiliza por defecto.
  \item
    \href{https://rdrr.io/r/stats/lm.html}{\texttt{"lm"}}: Ajuste de
    regresión de modelos lineal por mínimos cuadrados.
  \item
    \href{https://rdrr.io/r/stats/glm.html}{\texttt{"glm"}}: Ajuste de
    regresión modelos lineales generalizados por mínimos cuadrados. Por
    defecto se dibujan también las bandas con el error estándar del
    ajuste. Para desactivar estas bandas se debe indicar también el
    parámetro \texttt{se\ =\ FALSE}.
  \end{itemize}
\end{itemize}

Esta capa suele usarse en combinación con la capa de puntos para
diagramas de dispersión.

\begin{example}[]\protect\hypertarget{exm-ajuste-1}{}\label{exm-ajuste-1}

~

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(ggplot2)}
\NormalTok{df }\OtherTok{\textless{}{-}} \FunctionTok{read.csv}\NormalTok{(}\StringTok{\textquotesingle{}https://raw.githubusercontent.com/asalber/manual{-}r/master/datos/colesterol.csv\textquotesingle{}}\NormalTok{)}
\CommentTok{\# Inicializar el gráfico con la altura en el atributo x y el peso en el atributo y.}
\FunctionTok{ggplot}\NormalTok{(df, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ altura, }\AttributeTok{y =}\NormalTok{ peso)) }\SpecialCharTok{+}
\CommentTok{\# Añadir la capa de puntos.}
    \FunctionTok{geom\_point}\NormalTok{() }\SpecialCharTok{+}
\CommentTok{\# Añadir la capa de ajuste de regresión polinomial local loess}
    \FunctionTok{geom\_smooth}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\pandocbounded{\includegraphics[keepaspectratio]{07-graficos_files/figure-pdf/unnamed-chunk-25-1.pdf}}

\end{example}

\begin{example}[]\protect\hypertarget{exm-ajuste-2}{}\label{exm-ajuste-2}

~

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Inicializar el gráfico con la altura en el atributo x y el peso en el atributo y.}
\FunctionTok{ggplot}\NormalTok{(df, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ altura, }\AttributeTok{y =}\NormalTok{ peso)) }\SpecialCharTok{+}
\CommentTok{\# Añadir la capa de puntos.}
    \FunctionTok{geom\_point}\NormalTok{() }\SpecialCharTok{+}
\CommentTok{\# Añadir la capa de ajuste de regresión lineal por mínimos cuadrados.}
    \FunctionTok{geom\_smooth}\NormalTok{(}\AttributeTok{method =} \StringTok{"lm"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\pandocbounded{\includegraphics[keepaspectratio]{07-graficos_files/figure-pdf/unnamed-chunk-26-1.pdf}}

\end{example}

\begin{example}[]\protect\hypertarget{exm-ajuste-3}{}\label{exm-ajuste-3}

~

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Inicializar el gráfico con la altura en el atributo x, el peso en el atributo y, y el sexo en el atributo colour.}
\FunctionTok{ggplot}\NormalTok{(df, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ altura, }\AttributeTok{y =}\NormalTok{ peso, }\AttributeTok{colour =}\NormalTok{ sexo)) }\SpecialCharTok{+}
\CommentTok{\# Añadir la capa de puntos.}
    \FunctionTok{geom\_point}\NormalTok{() }\SpecialCharTok{+}
\CommentTok{\# Añadir la capa de ajuste de regresión lineal por mínimos cuadrados sin las bandas de error.}
    \FunctionTok{geom\_smooth}\NormalTok{(}\AttributeTok{method =} \StringTok{"lm"}\NormalTok{, }\AttributeTok{se =} \ConstantTok{FALSE}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\pandocbounded{\includegraphics[keepaspectratio]{07-graficos_files/figure-pdf/unnamed-chunk-27-1.pdf}}

\end{example}

\href{https://ggplot2.tidyverse.org/reference/geom_smooth.html}{Más
información sobre \texttt{geom\_smooth}}.

\section{Facetas}\label{facetas}

Las facetas permiten desagregar un gráfico según los grupos de uno o
varios factores del conjunto de datos. Para añadir facetas a un gráfico
se añade la función

\begin{itemize}
\tightlist
\item
  \texttt{facet\_wrap(vars(var1,\ var2,...),\ nrow\ =\ n,\ ncol\ =\ m)}:
  Crea un un gráfico para cada combinación de valores de las variables
  \texttt{var1}, \texttt{var2}, etc. y los coloca en una tabla de
  \texttt{n} filas y \texttt{m} columnas.
\end{itemize}

\begin{example}[]\protect\hypertarget{exm-facetas-1}{}\label{exm-facetas-1}

~

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(ggplot2)}
\NormalTok{df }\OtherTok{\textless{}{-}} \FunctionTok{read.csv}\NormalTok{(}\StringTok{\textquotesingle{}https://raw.githubusercontent.com/asalber/manual{-}r/master/datos/colesterol.csv\textquotesingle{}}\NormalTok{)}
\CommentTok{\# Inicializar el gráfico con la altura en el atributo x y el peso en el atributo y.}
\FunctionTok{ggplot}\NormalTok{(df, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ altura, }\AttributeTok{y =}\NormalTok{ peso)) }\SpecialCharTok{+}
\CommentTok{\# Añadir la capa de puntos}
    \FunctionTok{geom\_point}\NormalTok{() }\SpecialCharTok{+}
\CommentTok{\# Añadir la capa de ajuste de regresión lineal por mínimos cuadrados.}
    \FunctionTok{geom\_smooth}\NormalTok{(}\AttributeTok{method =} \StringTok{"lm"}\NormalTok{) }\SpecialCharTok{+}
\CommentTok{\# Añadir la faceta del sexo.}
    \FunctionTok{facet\_wrap}\NormalTok{(}\FunctionTok{vars}\NormalTok{(sexo))}
\end{Highlighting}
\end{Shaded}

\pandocbounded{\includegraphics[keepaspectratio]{07-graficos_files/figure-pdf/unnamed-chunk-28-1.pdf}}

\end{example}

\href{https://ggplot2.tidyverse.org/reference/facet_wrap.html?q=facet_wrap}{Más
información sobre facetas}.

\section{Personalización de
gráficos}\label{personalizaciuxf3n-de-gruxe1ficos}

\texttt{ggplot} incluye multitud de posibilidades de personalización de
gráficos. Aquí veremos solo las más habituales.

\subsection{Títulos}\label{tuxedtulos}

Para poner un título al gráfico, a los ejes o a la leyenda se añade la
función

\begin{itemize}
\tightlist
\item
  \texttt{labs(title\ =\ título,\ x\ =\ titulo-x,\ y\ =\ titulo-y,}\strut \\
  \texttt{colour\ =\ leyenda-color,\ shape\ \ =\ leyenda-forma)}
\end{itemize}

\begin{example}[]\protect\hypertarget{exm-titulos-1}{}\label{exm-titulos-1}

~

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(ggplot2)}
\NormalTok{df }\OtherTok{\textless{}{-}} \FunctionTok{read.csv}\NormalTok{(}\StringTok{\textquotesingle{}https://raw.githubusercontent.com/asalber/manual{-}r/master/datos/colesterol.csv\textquotesingle{}}\NormalTok{)}
\CommentTok{\# Inicializar el gráfico con la altura en el atributo x y el peso en el atributo y.}
\FunctionTok{ggplot}\NormalTok{(df, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ altura, }\AttributeTok{y =}\NormalTok{ peso)) }\SpecialCharTok{+}
\CommentTok{\# Añadir la capa de puntos.}
    \FunctionTok{geom\_point}\NormalTok{() }\SpecialCharTok{+}
\CommentTok{\# Añadir un título al gráfico y a los ejes.}
    \FunctionTok{labs}\NormalTok{(}\AttributeTok{title =} \StringTok{"Diagrama de dispersión"}\NormalTok{, }\AttributeTok{x =} \StringTok{"Altura (m)"}\NormalTok{, }\AttributeTok{y =} \StringTok{"Peso (kg)"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\pandocbounded{\includegraphics[keepaspectratio]{07-graficos_files/figure-pdf/unnamed-chunk-29-1.pdf}}

\end{example}

\subsection{Escalas}\label{escalas}

Para cambiar las escalas de los ejes cartesianos se añaden la funciones

\begin{itemize}
\item
  \texttt{scale\_x\_continuos(limits\ =\ rango,\ breaks\ =\ cortes,\ labels\ =\ etiquetas,\ trans\ =\ transformación)}:
  Restringe escala del eje x al rango indicado por \texttt{rango},
  incluye las marcas en eje indicadas por \texttt{cortes} con las
  etiquetas indicadas por \texttt{etiquetas} y aplica la transformación
  de escala indicada por \texttt{transformación}. Las transformaciones
  de escala más habituales son \texttt{"log2"} (logarítmo en base 2),
  \texttt{"log10"} (logarítmo en base 10) y \texttt{sqrt} (raíz
  cuadrada).
\item
  \texttt{scale\_y\_continuos(limits\ =\ rango,\ breaks\ =\ cortes,\ labels\ =\ etiquetas,\ trans\ =\ transformación)}:
  Igual que la función anterior pero para el eje y.
\end{itemize}

\begin{example}[]\protect\hypertarget{exm-escalas-1}{}\label{exm-escalas-1}

~

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(ggplot2)}
\NormalTok{df }\OtherTok{\textless{}{-}} \FunctionTok{read.csv}\NormalTok{(}\StringTok{\textquotesingle{}https://raw.githubusercontent.com/asalber/manual{-}r/master/datos/colesterol.csv\textquotesingle{}}\NormalTok{)}
\CommentTok{\# Inicializar el gráfico con la altura en el atributo x y el peso en el atributo y.}
\FunctionTok{ggplot}\NormalTok{(df, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ altura, }\AttributeTok{y =}\NormalTok{ peso)) }\SpecialCharTok{+}
\CommentTok{\# Añadir la capa de los puntos.}
    \FunctionTok{geom\_point}\NormalTok{() }\SpecialCharTok{+}
\CommentTok{\# Cambiar el rango y las marcas de la escala del eje x}
    \FunctionTok{scale\_x\_continuous}\NormalTok{(}\AttributeTok{limits =} \FunctionTok{c}\NormalTok{(}\FloatTok{1.5}\NormalTok{, }\FloatTok{2.1}\NormalTok{), }\AttributeTok{breaks =} \FunctionTok{seq}\NormalTok{(}\FloatTok{1.5}\NormalTok{, }\FloatTok{2.1}\NormalTok{, }\FloatTok{0.1}\NormalTok{)) }\SpecialCharTok{+}
\CommentTok{\# Aplicar una transformación logarítmica a la la escala del eje y}
    \FunctionTok{scale\_y\_continuous}\NormalTok{(}\AttributeTok{trans =} \StringTok{"log2"}\NormalTok{, }\AttributeTok{breaks =} \FunctionTok{seq}\NormalTok{(}\DecValTok{50}\NormalTok{, }\DecValTok{110}\NormalTok{, }\DecValTok{10}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

\pandocbounded{\includegraphics[keepaspectratio]{07-graficos_files/figure-pdf/unnamed-chunk-30-1.pdf}}

\end{example}

\subsection{Temas}\label{temas}

Finalmente se para cambiar otros aspectos del gráfico como las fuentes o
los colores de fondos se utilizan temas. Para indicar o modificar un
tema se añade la función

\begin{itemize}
\tightlist
\item
  \texttt{theme(propiedades)}: Modifica las propiedades del tema
  indicadas. La lista es demasiado grande para cubrirla en este
  tutorial, por lo que se recomienda ver todas las opciones en la
  documentación de \texttt{ggplot2}.
\end{itemize}

\begin{example}[]\protect\hypertarget{exm-temas-1}{}\label{exm-temas-1}

~

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(ggplot2)}
\NormalTok{df }\OtherTok{\textless{}{-}} \FunctionTok{read.csv}\NormalTok{(}\StringTok{\textquotesingle{}https://raw.githubusercontent.com/asalber/manual{-}r/master/datos/colesterol.csv\textquotesingle{}}\NormalTok{)}
\CommentTok{\# Inicializar el gráfico con la altura en el atributo x y el peso en el atributo y.}
\FunctionTok{ggplot}\NormalTok{(df, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ altura, }\AttributeTok{y =}\NormalTok{ peso)) }\SpecialCharTok{+}
\CommentTok{\# Añadir la capa de puntos.}
    \FunctionTok{geom\_point}\NormalTok{() }\SpecialCharTok{+}
\CommentTok{\# Añadir un título al gráfico.}
    \FunctionTok{labs}\NormalTok{(}\AttributeTok{title =} \StringTok{"Diagrama de dispersión"}\NormalTok{) }\SpecialCharTok{+}
\CommentTok{\# Cambiar el tamaño y el color de la fuente del título.}
    \FunctionTok{theme}\NormalTok{(}\AttributeTok{plot.title =} \FunctionTok{element\_text}\NormalTok{(}\AttributeTok{size =} \DecValTok{20}\NormalTok{, }\AttributeTok{colour =} \StringTok{"blue"}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

\pandocbounded{\includegraphics[keepaspectratio]{07-graficos_files/figure-pdf/unnamed-chunk-31-1.pdf}}

\end{example}

\begin{example}[]\protect\hypertarget{exm-temas-2}{}\label{exm-temas-2}

~

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Inicializar el gráfico con la altura en el atributo x, el peso en el atributo y, y el sexo al atributo colour.}
\FunctionTok{ggplot}\NormalTok{(df, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ altura, }\AttributeTok{y =}\NormalTok{ peso, }\AttributeTok{colour =}\NormalTok{ sexo)) }\SpecialCharTok{+}
\CommentTok{\# Añadir la capa de puntos.}
    \FunctionTok{geom\_point}\NormalTok{() }\SpecialCharTok{+}
\CommentTok{\# Cambiar el la posición de la leyenda}
    \FunctionTok{theme}\NormalTok{(}\AttributeTok{legend.position =} \StringTok{"top"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\pandocbounded{\includegraphics[keepaspectratio]{07-graficos_files/figure-pdf/unnamed-chunk-32-1.pdf}}

\end{example}

\href{https://ggplot2.tidyverse.org/reference/theme.html}{Más
información sobre temas}.

\texttt{ggplot2} incorpora los siguientes temas predefinidos:

\begin{verbatim}
- `theme_gray()`: Tema en escala de grises. Es el tema por defecto.
- `theme_bw()`: Tema en blanco y negro.
- `theme_light()`: Tema con las líneas de los ejes y de la rejilla delgadas y atenuadas para dar más protagonismo a los datos.
- `theme_dark()`: Similar al tema anterior pero con fondo oscuro.
- `theme_minimal()`: Tema sin fondo.
- `theme_classic()`: Tema sin rejilla.
- `theme_void()`: Tema vacío.
\end{verbatim}

\begin{example}[]\protect\hypertarget{exm-temas-3}{}\label{exm-temas-3}

~

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Inicializar el gráfico con la altura en el atributo x, el peso en el atributo y, y el sexo al atributo colour.}
\FunctionTok{ggplot}\NormalTok{(df, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ altura, }\AttributeTok{y =}\NormalTok{ peso, }\AttributeTok{colour =}\NormalTok{ sexo)) }\SpecialCharTok{+}
\CommentTok{\# Añadir la capa de puntos.}
    \FunctionTok{geom\_point}\NormalTok{() }\SpecialCharTok{+}
\CommentTok{\# Usar el tema sin rejilla}
    \FunctionTok{theme\_classic}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\pandocbounded{\includegraphics[keepaspectratio]{07-graficos_files/figure-pdf/unnamed-chunk-33-1.pdf}}

\end{example}

\section{Ejercicios}\label{ejercicios-5}

\begin{exercise}[]\protect\hypertarget{exr-graficos-1}{}\label{exr-graficos-1}

El fichero
\href{https://raw.githubusercontent.com/asalber/manual-r/master/datos/neonatos.csv}{neonatos}
contiene información sobre los recién nacidos en un hospital durante un
año.

\begin{enumerate}
\def\labelenumi{\alph{enumi}.}
\item
  Crear un tibble con los datos del fichero.

  \begin{tcolorbox}[enhanced jigsaw, opacitybacktitle=0.6, toptitle=1mm, opacityback=0, bottomrule=.15mm, colbacktitle=quarto-callout-note-color!10!white, leftrule=.75mm, toprule=.15mm, title=\textcolor{quarto-callout-note-color}{\faInfo}\hspace{0.5em}{Solución}, colframe=quarto-callout-note-color-frame, titlerule=0mm, colback=white, arc=.35mm, rightrule=.15mm, coltitle=black, left=2mm, breakable, bottomtitle=1mm]

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(tidyverse)}
\NormalTok{df }\OtherTok{\textless{}{-}} \FunctionTok{read\_csv}\NormalTok{(}\StringTok{\textquotesingle{}https://raw.githubusercontent.com/asalber/manual{-}r/master/datos/neonatos.csv\textquotesingle{}}\NormalTok{)}
\NormalTok{df}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
# A tibble: 320 x 8
    peso sexo   edad        tabaco cigarros tabaco.antes apgar1 apgar5
   <dbl> <chr>  <chr>       <chr>     <dbl> <chr>         <dbl>  <dbl>
 1  3.28 hombre mayor de 20 No            0 No                7      7
 2  3.49 hombre mayor de 20 No            0 No                7      8
 3  2.88 hombre mayor de 20 No            0 Si                5      6
 4  3.42 hombre mayor de 20 No            0 No                8      8
 5  3.31 hombre mayor de 20 No            0 No                6      7
 6  3.53 hombre mayor de 20 No            0 No                8      8
 7  3.46 hombre mayor de 20 No            0 No                7      8
 8  3.12 hombre mayor de 20 No            0 No                7      7
 9  2.77 hombre mayor de 20 No            0 No                5      5
10  3.31 hombre mayor de 20 No            0 No                7      8
# i 310 more rows
\end{verbatim}

  \end{tcolorbox}
\item
  Convertir las variables \texttt{sexo}, \texttt{edad}, \texttt{tabaco}
  y \texttt{tabaco.antes} en factores.

  \begin{tcolorbox}[enhanced jigsaw, opacitybacktitle=0.6, toptitle=1mm, opacityback=0, bottomrule=.15mm, colbacktitle=quarto-callout-note-color!10!white, leftrule=.75mm, toprule=.15mm, title=\textcolor{quarto-callout-note-color}{\faInfo}\hspace{0.5em}{Solución}, colframe=quarto-callout-note-color-frame, titlerule=0mm, colback=white, arc=.35mm, rightrule=.15mm, coltitle=black, left=2mm, breakable, bottomtitle=1mm]

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df }\OtherTok{\textless{}{-}} \FunctionTok{mutate}\NormalTok{(df, }\AttributeTok{sexo =} \FunctionTok{factor}\NormalTok{(sexo), }\AttributeTok{edad =} \FunctionTok{factor}\NormalTok{(edad), }\AttributeTok{tabaco =} \FunctionTok{factor}\NormalTok{(tabaco), }\AttributeTok{tabaco.antes =} \FunctionTok{factor}\NormalTok{(tabaco.antes))}
\end{Highlighting}
\end{Shaded}

  \end{tcolorbox}
\item
  Dibujar un diagrama de barras con la frecuencia de niños y niñas.

  \begin{tcolorbox}[enhanced jigsaw, opacitybacktitle=0.6, toptitle=1mm, opacityback=0, bottomrule=.15mm, colbacktitle=quarto-callout-note-color!10!white, leftrule=.75mm, toprule=.15mm, title=\textcolor{quarto-callout-note-color}{\faInfo}\hspace{0.5em}{Solución}, colframe=quarto-callout-note-color-frame, titlerule=0mm, colback=white, arc=.35mm, rightrule=.15mm, coltitle=black, left=2mm, breakable, bottomtitle=1mm]

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{ggplot}\NormalTok{(df, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ sexo)) }\SpecialCharTok{+}
    \FunctionTok{geom\_bar}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

  \pandocbounded{\includegraphics[keepaspectratio]{07-graficos_files/figure-pdf/unnamed-chunk-36-1.pdf}}

  \end{tcolorbox}
\item
  Dibujar un diagrama de barras del \texttt{apgar1} de los neonatos de
  madres fumadoras y no fumadoras durante el embarazo.

  \begin{tcolorbox}[enhanced jigsaw, opacitybacktitle=0.6, toptitle=1mm, opacityback=0, bottomrule=.15mm, colbacktitle=quarto-callout-note-color!10!white, leftrule=.75mm, toprule=.15mm, title=\textcolor{quarto-callout-note-color}{\faInfo}\hspace{0.5em}{Solución}, colframe=quarto-callout-note-color-frame, titlerule=0mm, colback=white, arc=.35mm, rightrule=.15mm, coltitle=black, left=2mm, breakable, bottomtitle=1mm]

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{ggplot}\NormalTok{(df, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ apgar1, }\AttributeTok{fill =}\NormalTok{ tabaco)) }\SpecialCharTok{+}
    \FunctionTok{geom\_bar}\NormalTok{(}\AttributeTok{position =} \StringTok{"dodge"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

  \pandocbounded{\includegraphics[keepaspectratio]{07-graficos_files/figure-pdf/unnamed-chunk-37-1.pdf}}

  \end{tcolorbox}
\item
  Dibujar un histograma acumulado del peso según el sexo con 10 clases.

  \begin{tcolorbox}[enhanced jigsaw, opacitybacktitle=0.6, toptitle=1mm, opacityback=0, bottomrule=.15mm, colbacktitle=quarto-callout-note-color!10!white, leftrule=.75mm, toprule=.15mm, title=\textcolor{quarto-callout-note-color}{\faInfo}\hspace{0.5em}{Solución}, colframe=quarto-callout-note-color-frame, titlerule=0mm, colback=white, arc=.35mm, rightrule=.15mm, coltitle=black, left=2mm, breakable, bottomtitle=1mm]

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{ggplot}\NormalTok{(df, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ peso, }\AttributeTok{fill =}\NormalTok{ sexo)) }\SpecialCharTok{+}
    \FunctionTok{geom\_histogram}\NormalTok{(}\AttributeTok{bins =} \DecValTok{10}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

  \pandocbounded{\includegraphics[keepaspectratio]{07-graficos_files/figure-pdf/unnamed-chunk-38-1.pdf}}

  \end{tcolorbox}
\item
  Dibujar un gráfico de densidad de probabilidad del peso de los
  neonatos de madres fumadoras y no fumadoras durante el embarazo.

  \begin{tcolorbox}[enhanced jigsaw, opacitybacktitle=0.6, toptitle=1mm, opacityback=0, bottomrule=.15mm, colbacktitle=quarto-callout-note-color!10!white, leftrule=.75mm, toprule=.15mm, title=\textcolor{quarto-callout-note-color}{\faInfo}\hspace{0.5em}{Solución}, colframe=quarto-callout-note-color-frame, titlerule=0mm, colback=white, arc=.35mm, rightrule=.15mm, coltitle=black, left=2mm, breakable, bottomtitle=1mm]

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{ggplot}\NormalTok{(df, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ peso, }\AttributeTok{colour =}\NormalTok{ tabaco)) }\SpecialCharTok{+}
    \FunctionTok{geom\_density}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

  \pandocbounded{\includegraphics[keepaspectratio]{07-graficos_files/figure-pdf/unnamed-chunk-39-1.pdf}}

  \end{tcolorbox}
\item
  Dibujar un diagrama de caja del peso de los recién nacidos según sexo
  y si la madre fumaba o no durante el embarazo.

  \begin{tcolorbox}[enhanced jigsaw, opacitybacktitle=0.6, toptitle=1mm, opacityback=0, bottomrule=.15mm, colbacktitle=quarto-callout-note-color!10!white, leftrule=.75mm, toprule=.15mm, title=\textcolor{quarto-callout-note-color}{\faInfo}\hspace{0.5em}{Solución}, colframe=quarto-callout-note-color-frame, titlerule=0mm, colback=white, arc=.35mm, rightrule=.15mm, coltitle=black, left=2mm, breakable, bottomtitle=1mm]

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{ggplot}\NormalTok{(df, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ sexo, }\AttributeTok{y =}\NormalTok{ peso, }\AttributeTok{fill =}\NormalTok{ tabaco)) }\SpecialCharTok{+}
    \FunctionTok{geom\_boxplot}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

  \pandocbounded{\includegraphics[keepaspectratio]{07-graficos_files/figure-pdf/unnamed-chunk-40-1.pdf}}

  \end{tcolorbox}
\item
  Dibujar un diagrama de dispersión del peso de los recién nacidos de
  madres fumadoras durante el embarazo, frente al número de cigarros que
  fumaban las madres. Incluir la recta de regresión.

  \begin{tcolorbox}[enhanced jigsaw, opacitybacktitle=0.6, toptitle=1mm, opacityback=0, bottomrule=.15mm, colbacktitle=quarto-callout-note-color!10!white, leftrule=.75mm, toprule=.15mm, title=\textcolor{quarto-callout-note-color}{\faInfo}\hspace{0.5em}{Solución}, colframe=quarto-callout-note-color-frame, titlerule=0mm, colback=white, arc=.35mm, rightrule=.15mm, coltitle=black, left=2mm, breakable, bottomtitle=1mm]

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df }\SpecialCharTok{\%\textgreater{}\%} 
    \FunctionTok{filter}\NormalTok{(tabaco }\SpecialCharTok{==} \StringTok{"Si"}\NormalTok{) }\SpecialCharTok{\%\textgreater{}\%}
    \FunctionTok{ggplot}\NormalTok{(}\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ cigarros, }\AttributeTok{y =}\NormalTok{ peso)) }\SpecialCharTok{+}
        \FunctionTok{geom\_point}\NormalTok{() }\SpecialCharTok{+}
        \FunctionTok{geom\_smooth}\NormalTok{(}\AttributeTok{method =} \StringTok{"lm"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
`geom_smooth()` using formula = 'y ~ x'
\end{verbatim}

  \pandocbounded{\includegraphics[keepaspectratio]{07-graficos_files/figure-pdf/unnamed-chunk-41-1.pdf}}

  \end{tcolorbox}
\item
  Dibujar un diagrama de dispersión del peso de los recién nacidos de
  madres fumadoras durante el embarazo, frente al número de cigarros que
  fumaban las madres, separando por facetas según el sexo y la edad de
  la madre.

  \begin{tcolorbox}[enhanced jigsaw, opacitybacktitle=0.6, toptitle=1mm, opacityback=0, bottomrule=.15mm, colbacktitle=quarto-callout-note-color!10!white, leftrule=.75mm, toprule=.15mm, title=\textcolor{quarto-callout-note-color}{\faInfo}\hspace{0.5em}{Solución}, colframe=quarto-callout-note-color-frame, titlerule=0mm, colback=white, arc=.35mm, rightrule=.15mm, coltitle=black, left=2mm, breakable, bottomtitle=1mm]

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df }\SpecialCharTok{\%\textgreater{}\%} 
    \FunctionTok{filter}\NormalTok{(tabaco }\SpecialCharTok{==} \StringTok{"Si"}\NormalTok{) }\SpecialCharTok{\%\textgreater{}\%}
    \FunctionTok{ggplot}\NormalTok{(}\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ cigarros, }\AttributeTok{y =}\NormalTok{ peso)) }\SpecialCharTok{+}
        \FunctionTok{geom\_point}\NormalTok{() }\SpecialCharTok{+}
        \FunctionTok{geom\_smooth}\NormalTok{(}\AttributeTok{method =} \StringTok{"lm"}\NormalTok{) }\SpecialCharTok{+}
        \FunctionTok{facet\_wrap}\NormalTok{(}\FunctionTok{vars}\NormalTok{(sexo, edad))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
`geom_smooth()` using formula = 'y ~ x'
\end{verbatim}

  \pandocbounded{\includegraphics[keepaspectratio]{07-graficos_files/figure-pdf/unnamed-chunk-42-1.pdf}}

  \end{tcolorbox}
\end{enumerate}

\end{exercise}

\bookmarksetup{startatroot}

\chapter{Análisis Estadísticos}\label{anuxe1lisis-estaduxedsticos}

El tipo de estudio estadístico más apropiado en cada caso depende de
varios factores:

\begin{itemize}
\tightlist
\item
  El objetivo del estudio.
\item
  El número de variables que intervienen.
\item
  El tipo de las variables dependientes e independientes.
\item
  La naturaleza de las observaciones (independientes o emparejadas).
\end{itemize}

A continuación se presentan los estudios estadísticos más habituales en
función de estos factores. La siguiente
\href{tablas/Tabla\%20Resumen\%20Contraste\%20de\%20Hip\%C3\%B3tesis.pdf}{tabla
de resumen de contrastes de hipótesis más habituales} puede ayudar a
identificar el más apropiado en cada caso.

Variables independientes

Variable dependiente

Objetivo

Ejemplo

Contraste

Ninguna (Una población)

Cuantitativa

Contrastar la normalidad de una variable

Comprobar si la nota de un examen tiene distribución normal (forma de
campana de Gauss)

Komogorov-Smirnov (requiere muestras grandes)

Shapiro-Willks

Cuantitativa normal

Contrastar si la media poblacional de una variable tiene un valor
determinado

Comprobar si la nota media de un examen es 5

Test T para la media de una población

Cuantitativa o cualitativa ordinal

Contrastar si la mediana poblacional de una variable tiene un valor
determinado

Comprobar si la calificación mediana de un examen es Aprobado

Test para la mediana de una población

Cualitativa (2 categorías)

Contrastar si la proporción poblacional de una de las categorías tiene
un valor determinado

Comprobar si la proporción de aprobados es de la mitad (o que el
porcentaje es 50\%)

Test Binomial

Cualitativa

Contrastar si las proporciones de cada una de las categorías tienen un
valor determinado

Comprobar si las proporciones de alumnos matriculados en ciencias,
letras o mixtas son 0.5, 0.2 y 0.3 respectivamente

Test Chi-cuadrado de bondad de ajuste

Una cualitativa con dos categorías independientes (Dos poblaciones
independientes)

Cuantitativa normal

Contrastar si hay diferencias entre las medias la variable dependiente
en dos poblaciones independientes

Comprobar si el grupo de mañana y el grupo de tarde han tenido notas
medias diferentes

Test T para la comparación de medias de poblaciones independientes

Contrastar si hay diferencias entre las varianzas de la variable
dependiente en dos poblaciones independientes

Comprobar si hay diferencias entre la variabilidad de las notas del
grupo de mañana y el de tarde

Test F de Fisher

Contrastar si hay concordancia o acuerdo entre las dos variables

Comprobar si hay concordancia o acuerdo entre las notas que ponen dos
profesores distintos para los mismos exámenes

Correlación intraclase

Cuantitativa o cualitativa ordinal

Contrastar si hay diferencias entre las distribuciones de la variable
dependiente en dos poblaciones independientes

Comprobar si el grupo de mañana y el grupo de tarde han tenido
calificaciones diferentes

Test de la U de Mann-Whitney

Contrastar si hay concordancia o acuerdo entre las dos variables

Comprobar si hay concordancia o acuerdo entre las calificaciones que
ponen dos profesores distintos para los mismos exámenes

Kappa de Cohen

Cualitativa

Contrastar si hay relación entre las dos variables o bien si hay
diferencias entre las proporciones de las categorías de la variable
dependiente en las dos poblaciones definidas por las categorías de la
variable independiente

Comprobar si existe relación entre los aprobados en una asignatura y el
grupo al que pertenecen los alumnos, es decir, si la proporción de
aprobados es diferente en dos grupos distintos.

Test Chi-cuadrado (si no ha más del 20\% de frecuencias esperadas
menores que 5) Test exacto de Fisher

Contrastar si hay concordancia o acuerdo entre las dos variables

Comprobar si hay concordancia o acuerdo entre la valoración (aprobado o
suspenso) que hacen dos profesores distintos para los mismos exámenes

Kappa de Cohen

Una cualitativa con dos categorías relacionadas o pareadas (Dos
poblaciones relacionadas o pareadas)

Cuantitativa normal

Contrastar si hay diferencias entre las medias de la variable
dependiente en dos poblaciones relacionadas o pareadas

Comprobar si las notas medias de dos asignaturas cursadas por los mismos
alumnos han sido diferentes o si las notas medias de un examen realizado
al comienzo del curso (antes) y otro al final (después) de una misma
asignatura han sido diferentes

Test T para la comparación de medias de poblaciones relacionadas o
pareadas

Cuantitativa o cualitativa ordinal

Contrastar si hay diferencias entre las distribuciones de la variable
dependiente en dos poblaciones relacionadas o pareadas

Comprobar si las calificaciones de dos asignaturas cursadas por los
mismos alumnos han sido diferentes

Test de Wilcoxon

Cualitativa con dos categorías

Contrastar si hay diferencias entre las proporciones de las categorías
de la variable dependiente en dos poblaciones relacionadas o pareadas

Comprobar si la proporción o el porcentaje de aprobados en un examen es
distinta al comienzo y al final del curso

Test de McNemar

Una cualitativa con dos o más categorías

independientes (Dos o más poblaciones independientes)

Cuantitativa normal y homogeneidad de varianzas

Contrastar si hay diferencias entre las medias la variable dependiente
en cada una de las poblaciones definidas por las categorías de la
variable independiente

Comprobar si existen diferencias entre las notas medias de tres grupos
distintos de clase.

Análisis de la Varianza de un factor (ANOVA) Si hay diferencias
\textgreater{} Test de Tukey o Bonferroni para la diferencia por pares

Cuantitativa normal

Contrastar si hay diferencias entre las varianzas de la variable
dependiente en cada una de las poblaciones definidas por las categorías
de la variable independiente

Comprobar si la variabilidad de las notas de una asignatura es distinta
en tres grupos diferentes de clase

Prueba de Levene para la homogeneidad de varianzas

Cuantitativa o cualitativa ordinal

Contrastar si hay diferencias entre las distribuciones de la variable
dependiente en cada una de las poblaciones definidas por las categorías
de la variable independiente

Comprobar si existen diferencias entre las calificaciones de tres grupos
distintos de clase

Test de Kruskal Wallis

Cualitativa

Contrastar si hay relación entre las dos variables o bien si hay
diferencias entre las proporciones de las categorías de la variable
dependiente en cada una de las poblaciones definidas por las categorías
de la variable independiente

Comprobar si existe relación entre los aprobados en una asignatura y el
grupo al que pertenecen los alumnos, es decir, si la proporción de
aprobados es diferente en los distintos grupos.

Test Chi-cuadrado (si no ha más del 20\% de frecuencias esperadas
menores que 5) Test exacto de Fisher

Una cualitativa con dos o más categorías relacionadas (medidas
repetidas)

Cuantitativa normal

Contrastar si hay diferencias entre las medias repetidas de la variable
dependiente

Comprobar si hay diferencias entre las notas que otorgan varios
profesores a un mismo examen

Análisis de la Varianza (ANOVA) de medidas repetidas de un factor

Cuantitativa o cualitativa ordinal

Contrastar si hay diferencias entre las medidas repetidas de la variable
dependiente

Comprobar si hay diferencias entre las calificaciones que otorgan varios
profesores a un mismo examen

Test de Friedman

Cualitativa

Contrastar si hay diferencias entre las valoraciones repetidas de la
variable dependiente

Comprobar si hay diferencias entre la valoración (aprobado o suspenso)
que hacen varios profesores de un mismo examen

Regresión logística de medidas repetidas

Una cuantitativa normal

Cuantitativa normal

Contrastar si existe relación lineal entre las dos variables

Comprobar si existe relación entre las notas de dos asignaturas

Correlación de Pearson

Construir un modelo predictivo que explique la variable dependiente en
función de la independiente

Construir el modelo (función de regresión) que mejor explique la
relación entre la nota de un examen y las horas dedicadas a su estudio

Regresión simple (lineal o no lineal)

Cuantitativa o cualitativa ordinal

Contrastar si existe relación lineal entre las dos variables

Comprobar si existe relación entre las calificaciones de dos asignaturas

Correlación de Spearman

Cualitativa

Construir un modelo predictivo que explique la variable dependiente en
función de la independiente

Construir el modelo (función logística) que mejor explique la relación
entre el resultado de un examen (aprobado o suspenso) y las horas
dedicadas a su estudio

Regresión logística simple

Los ejemplos de los distintos test que se presentan a continuación se
han realizado a partir del siguiente conjunto de datos que contiene las
notas y calificaciones de un curso. El fichero con los datos puede
descargarse aquí para reproducir los estudios:
\href{https://raw.githubusercontent.com/asalber/manual-r/master/datos/notas-curso.csv}{notas-curso.csv}.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(tidyverse)}
\NormalTok{df }\OtherTok{\textless{}{-}} \FunctionTok{read.csv}\NormalTok{(}\StringTok{\textquotesingle{}https://raw.githubusercontent.com/asalber/manual{-}r/master/datos/notas{-}curso.csv\textquotesingle{}}\NormalTok{)}
\FunctionTok{head}\NormalTok{(df)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
    sexo  turno grupo trabaja notaA notaB notaC notaD notaE calificacionA
1  Mujer  Tarde     C       N   5.2   6.3   3.4   2.3   2.0      Aprobado
2 Hombre Mañana     A       N   5.7   5.7   4.2   3.5   2.7      Aprobado
3 Hombre Mañana     B       N   8.3   8.8   8.8   8.0   5.5      Aprobado
4 Hombre Mañana     B       N   6.1   6.8   4.0   3.5   2.2      Aprobado
5 Hombre Mañana     A       N   6.2   9.0   5.0   4.4   3.7      Aprobado
6 Hombre Mañana     A       S   8.6   8.9   9.5   8.4   3.9      Aprobado
  calificacionB calificacionC calificacionD calificacionE asinaturas.aprobadas
1      Aprobado      Suspenso      Suspenso      Suspenso                    2
2      Aprobado      Suspenso      Suspenso      Suspenso                    2
3      Aprobado      Aprobado      Aprobado      Aprobado                    5
4      Aprobado      Suspenso      Suspenso      Suspenso                    2
5      Aprobado      Aprobado      Suspenso      Suspenso                    3
6      Aprobado      Aprobado      Aprobado      Suspenso                    4
  nota.media
1        3.8
2        4.3
3        7.9
4        4.5
5        5.7
6        7.8
\end{verbatim}

\section{Una variable cuantitativa}\label{una-variable-cuantitativa}

\subsection{Estudios descriptivos}\label{estudios-descriptivos}

\subsubsection{Estadísticos}\label{estaduxedsticos}

\begin{itemize}
\tightlist
\item
  Tamaño muestral
\item
  Media
\item
  Desviación típica
\item
  Mínimo, Máximo
\item
  Cuartiles
\item
  Coeficiente de asimetría
\item
  Coeficiente de apuntamiento
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Tamaño muestral}
\FunctionTok{nrow}\NormalTok{(df)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 120
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Media}
\FunctionTok{mean}\NormalTok{(df}\SpecialCharTok{$}\NormalTok{notaA, }\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 6.028333
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Desviación típica}
\FunctionTok{sd}\NormalTok{(df}\SpecialCharTok{$}\NormalTok{notaA, }\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 1.340524
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Min, max}
\FunctionTok{min}\NormalTok{(df}\SpecialCharTok{$}\NormalTok{notaA, }\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 2.5
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{max}\NormalTok{(df}\SpecialCharTok{$}\NormalTok{notaA, }\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 9.3
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Cuartiles}
\FunctionTok{quantile}\NormalTok{(df}\SpecialCharTok{$}\NormalTok{notaA, }\FunctionTok{c}\NormalTok{(}\FloatTok{0.25}\NormalTok{, }\FloatTok{0.5}\NormalTok{, }\FloatTok{0.75}\NormalTok{), }\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
  25%   50%   75% 
5.100 5.900 6.825 
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Coef. asimetría}
\FunctionTok{library}\NormalTok{(moments)}
\FunctionTok{skewness}\NormalTok{(df}\SpecialCharTok{$}\NormalTok{notaA, }\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 0.1373915
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Coef. apuntamiento}
\FunctionTok{kurtosis}\NormalTok{(df}\SpecialCharTok{$}\NormalTok{notaA, }\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{) }\SpecialCharTok{{-}} \DecValTok{3}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] -0.102287
\end{verbatim}

\subsubsection{Gráficos}\label{gruxe1ficos}

\begin{itemize}
\tightlist
\item
  Diagrama de barras (variables discretas)
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{ggplot}\NormalTok{(}\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ asinaturas.aprobadas)) }\SpecialCharTok{+} 
  \FunctionTok{geom\_bar}\NormalTok{(}\AttributeTok{fill=}\StringTok{"\#00BFC4"}\NormalTok{) }\SpecialCharTok{+} 
  \CommentTok{\# Cambio de escala del eje X}
  \FunctionTok{scale\_x\_discrete}\NormalTok{(}\AttributeTok{limits=}\DecValTok{0}\SpecialCharTok{:}\DecValTok{5}\NormalTok{) }
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
Warning: Continuous limits supplied to discrete scale.
i Did you mean `limits = factor(...)` or `scale_*_continuous()`?
\end{verbatim}

\pandocbounded{\includegraphics[keepaspectratio]{08-analisis-estadisticos_files/figure-pdf/unnamed-chunk-10-1.pdf}}

\begin{itemize}
\tightlist
\item
  Histograma
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(ggplot2)}
\CommentTok{\# Límites de los intervalos}
\NormalTok{breaks }\OtherTok{=} \DecValTok{0}\SpecialCharTok{:}\DecValTok{10}
\CommentTok{\# Histograma de las notasA}
\NormalTok{df }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{ggplot}\NormalTok{(}\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ notaA)) }\SpecialCharTok{+} 
  \FunctionTok{geom\_histogram}\NormalTok{(}\AttributeTok{breaks =}\NormalTok{ breaks, }\AttributeTok{fill=}\StringTok{"\#00BFC4"}\NormalTok{) }\SpecialCharTok{+} 
  \CommentTok{\# Cambio de escala del eje X}
  \FunctionTok{scale\_x\_continuous}\NormalTok{(}\AttributeTok{limits=}\FunctionTok{c}\NormalTok{(}\DecValTok{0}\NormalTok{, }\DecValTok{10}\NormalTok{), }\AttributeTok{breaks =} \DecValTok{0}\SpecialCharTok{:}\DecValTok{10}\NormalTok{) }
\end{Highlighting}
\end{Shaded}

\pandocbounded{\includegraphics[keepaspectratio]{08-analisis-estadisticos_files/figure-pdf/unnamed-chunk-11-1.pdf}}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Histograma de notasE}
\NormalTok{df }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{ggplot}\NormalTok{(}\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ notaE)) }\SpecialCharTok{+} 
  \FunctionTok{geom\_histogram}\NormalTok{(}\AttributeTok{breaks =}\NormalTok{ breaks, }\AttributeTok{fill=}\StringTok{"\#00BFC4"}\NormalTok{) }\SpecialCharTok{+} 
  \CommentTok{\# Cambio de escala del eje X}
  \FunctionTok{scale\_x\_continuous}\NormalTok{(}\AttributeTok{limits=}\FunctionTok{c}\NormalTok{(}\DecValTok{0}\NormalTok{, }\DecValTok{10}\NormalTok{), }\AttributeTok{breaks =} \DecValTok{0}\SpecialCharTok{:}\DecValTok{10}\NormalTok{) }
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
Warning: Removed 2 rows containing non-finite values (`stat_bin()`).
\end{verbatim}

\pandocbounded{\includegraphics[keepaspectratio]{08-analisis-estadisticos_files/figure-pdf/unnamed-chunk-12-1.pdf}}

\begin{itemize}
\tightlist
\item
  Diagrama de líneas
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Variables discretas}
\NormalTok{df }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{count}\NormalTok{(asinaturas.aprobadas) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{ggplot}\NormalTok{(}\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ asinaturas.aprobadas, }\AttributeTok{y =}\NormalTok{ n)) }\SpecialCharTok{+}
  \FunctionTok{geom\_line}\NormalTok{(}\AttributeTok{col=}\StringTok{"\#00BFC4"}\NormalTok{) }\SpecialCharTok{+} 
  \CommentTok{\# Cambio de escala del eje X}
  \FunctionTok{scale\_x\_discrete}\NormalTok{(}\AttributeTok{limits=}\DecValTok{0}\SpecialCharTok{:}\DecValTok{5}\NormalTok{) }
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
Warning: Continuous limits supplied to discrete scale.
i Did you mean `limits = factor(...)` or `scale_*_continuous()`?
\end{verbatim}

\pandocbounded{\includegraphics[keepaspectratio]{08-analisis-estadisticos_files/figure-pdf/unnamed-chunk-13-1.pdf}}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Agrupación de datos en intervalos}
\NormalTok{df }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{ggplot}\NormalTok{(}\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ notaA)) }\SpecialCharTok{+} 
  \FunctionTok{geom\_freqpoly}\NormalTok{(}\AttributeTok{breaks =}\NormalTok{ breaks, }\AttributeTok{col=}\StringTok{"\#00BFC4"}\NormalTok{) }\SpecialCharTok{+} 
  \CommentTok{\# Cambio de escala del eje X}
  \FunctionTok{scale\_x\_continuous}\NormalTok{(}\AttributeTok{limits=}\FunctionTok{c}\NormalTok{(}\DecValTok{0}\NormalTok{, }\DecValTok{10}\NormalTok{), }\AttributeTok{breaks =} \DecValTok{0}\SpecialCharTok{:}\DecValTok{10}\NormalTok{) }
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
Warning: Removed 2 rows containing missing values (`geom_path()`).
\end{verbatim}

\pandocbounded{\includegraphics[keepaspectratio]{08-analisis-estadisticos_files/figure-pdf/unnamed-chunk-14-1.pdf}}

\begin{itemize}
\tightlist
\item
  Diagrama de caja y bigotes
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{ggplot}\NormalTok{(}\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ notaA)) }\SpecialCharTok{+} 
  \FunctionTok{geom\_boxplot}\NormalTok{(}\AttributeTok{fill=}\StringTok{"\#00BFC4"}\NormalTok{) }\SpecialCharTok{+}
  \CommentTok{\# Cambio de escala del eje X}
  \FunctionTok{scale\_x\_continuous}\NormalTok{(}\AttributeTok{limits=}\FunctionTok{c}\NormalTok{(}\DecValTok{0}\NormalTok{, }\DecValTok{10}\NormalTok{), }\AttributeTok{breaks =} \DecValTok{0}\SpecialCharTok{:}\DecValTok{10}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\pandocbounded{\includegraphics[keepaspectratio]{08-analisis-estadisticos_files/figure-pdf/unnamed-chunk-15-1.pdf}}

\subsection{Estudios inferenciales}\label{estudios-inferenciales}

\subsubsection{Test de normalidad de
Shapiro-Wilk}\label{test-de-normalidad-de-shapiro-wilk}

\textbf{Objetivo}: Comprobar la normalidad de la distribución.

\textbf{Hipótesis nula}: La distribución es normal.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{shapiro.test}\NormalTok{(df}\SpecialCharTok{$}\NormalTok{notaA)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}

    Shapiro-Wilk normality test

data:  df$notaA
W = 0.99424, p-value = 0.907
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{shapiro.test}\NormalTok{(df}\SpecialCharTok{$}\NormalTok{notaE)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}

    Shapiro-Wilk normality test

data:  df$notaE
W = 0.92264, p-value = 4.065e-06
\end{verbatim}

\subsubsection{Test t para la media de una
población}\label{test-t-para-la-media-de-una-poblaciuxf3n}

\textbf{Objetivo}: Estimar la media de una variable o compararla con un
valor dado \emph{μ}0.

\textbf{Requisitos}:

\begin{itemize}
\tightlist
\item
  Una variable cuantitativa.
\item
  Distribución normal o tamaño muestral ≥ 30.
\end{itemize}

\textbf{Hipótesis nula}: La media de la población es igual a \emph{μ}0.

\textbf{Ejemplo}: Comprobar si la nota media de un examen es diferente
de 5.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{t.test}\NormalTok{(df}\SpecialCharTok{$}\NormalTok{notaA, }\AttributeTok{mu =} \DecValTok{5}\NormalTok{, }\AttributeTok{alternative =} \StringTok{"two.sided"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}

    One Sample t-test

data:  df$notaA
t = 8.4033, df = 119, p-value = 1.08e-13
alternative hypothesis: true mean is not equal to 5
95 percent confidence interval:
 5.786023 6.270643
sample estimates:
mean of x 
 6.028333 
\end{verbatim}

\section{Una variable cualitativa}\label{una-variable-cualitativa}

\subsection{Estudios descriptivos}\label{estudios-descriptivos-1}

\subsubsection{Estadísticos}\label{estaduxedsticos-1}

\begin{itemize}
\tightlist
\item
  Tamaños muestral
\item
  Frecuencias muestrales
\item
  Proporciones/porcentajes muestrales
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Tamaño muestral sin datos perdidos}
\FunctionTok{length}\NormalTok{(}\FunctionTok{na.omit}\NormalTok{(df}\SpecialCharTok{$}\NormalTok{calificacionB))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 115
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Frecuencias}
\FunctionTok{table}\NormalTok{(df}\SpecialCharTok{$}\NormalTok{calificacionB)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}

Aprobado Suspenso 
      98       17 
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Proporciones}
\FunctionTok{table}\NormalTok{(df}\SpecialCharTok{$}\NormalTok{calificacionB) }\SpecialCharTok{/} \FunctionTok{length}\NormalTok{(}\FunctionTok{na.omit}\NormalTok{(df}\SpecialCharTok{$}\NormalTok{calificacionB))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}

 Aprobado  Suspenso 
0.8521739 0.1478261 
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Porcentajes}
\FunctionTok{table}\NormalTok{(df}\SpecialCharTok{$}\NormalTok{calificacionB) }\SpecialCharTok{/} \FunctionTok{length}\NormalTok{(}\FunctionTok{na.omit}\NormalTok{(df}\SpecialCharTok{$}\NormalTok{calificacionB)) }\SpecialCharTok{*} \DecValTok{100}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}

Aprobado Suspenso 
85.21739 14.78261 
\end{verbatim}

\subsubsection{Gráficos}\label{gruxe1ficos-1}

\begin{itemize}
\tightlist
\item
  Diagrama de sectores
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{ggplot}\NormalTok{(}\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =} \StringTok{""}\NormalTok{, }\AttributeTok{fill =}\NormalTok{ calificacionA)) }\SpecialCharTok{+} 
  \FunctionTok{geom\_bar}\NormalTok{() }\SpecialCharTok{+}
  \CommentTok{\# Cambiar a coordenadas polares}
  \FunctionTok{coord\_polar}\NormalTok{(}\AttributeTok{theta =} \StringTok{"y"}\NormalTok{) }\SpecialCharTok{+}
  \CommentTok{\# Eliminar ejes}
   \FunctionTok{theme\_void}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\pandocbounded{\includegraphics[keepaspectratio]{08-analisis-estadisticos_files/figure-pdf/unnamed-chunk-23-1.pdf}}

\subsection{Estudios inferenciales}\label{estudios-inferenciales-1}

\subsubsection{Test binomial para una proporción de una
población}\label{test-binomial-para-una-proporciuxf3n-de-una-poblaciuxf3n}

\textbf{Objetivo}: Estimar la propoción de una categoría en una
población o compararla con un valor \emph{p}0.

\textbf{Requisitos}:

\begin{itemize}
\tightlist
\item
  One variable cualitativa
\end{itemize}

\textbf{Hipótesis nula}: La proporción poblacional es igual a \emph{p}0.

\textbf{Ejemplo}: Comprobar si la proporción de aprobados es mayor de
0.5.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{n }\OtherTok{\textless{}{-}} \FunctionTok{nrow}\NormalTok{(df)}
\NormalTok{freq }\OtherTok{\textless{}{-}} \FunctionTok{table}\NormalTok{(df}\SpecialCharTok{$}\NormalTok{calificacionA)[}\StringTok{"Aprobado"}\NormalTok{]}
\FunctionTok{binom.test}\NormalTok{(freq, n, }\AttributeTok{p =} \FloatTok{0.5}\NormalTok{, }\AttributeTok{alternative =} \StringTok{"greater"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}

    Exact binomial test

data:  freq and n
number of successes = 94, number of trials = 120, p-value = 1.57e-10
alternative hypothesis: true probability of success is greater than 0.5
95 percent confidence interval:
 0.7123183 1.0000000
sample estimates:
probability of success 
             0.7833333 
\end{verbatim}

\subsubsection{Test Z para la proporción de una
población}\label{test-z-para-la-proporciuxf3n-de-una-poblaciuxf3n}

\textbf{Objetivo}: Estimar la propoción de una categoría en una
población o compararla con un valor \emph{p}0.

\textbf{Requisitos}:

\begin{itemize}
\tightlist
\item
  Una variable cualitativa
\item
  Tamaño muestral \textgreater= 30
\end{itemize}

\textbf{Observación}: Utiliza la aproximación normal de la distribución
Binomal.

\textbf{Ejemplo}: Comprobar si la proporción de aprobados es mayor de
0.5.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{freq }\OtherTok{\textless{}{-}} \FunctionTok{table}\NormalTok{(df}\SpecialCharTok{$}\NormalTok{calificacionA)[}\StringTok{"Aprobado"}\NormalTok{]}
\FunctionTok{prop.test}\NormalTok{(freq, n, }\AttributeTok{p =} \FloatTok{0.7}\NormalTok{, }\AttributeTok{alternative =} \StringTok{"greater"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}

    1-sample proportions test with continuity correction

data:  freq out of n, null probability 0.7
X-squared = 3.5813, df = 1, p-value = 0.02922
alternative hypothesis: true p is greater than 0.7
95 percent confidence interval:
 0.7111099 1.0000000
sample estimates:
        p 
0.7833333 
\end{verbatim}

\section{Dos variables: Variable dependiente cuantitativa y variable
independiente culitativa con dos categorías o
grupos}\label{dos-variables-variable-dependiente-cuantitativa-y-variable-independiente-culitativa-con-dos-categoruxedas-o-grupos}

\subsection{Estudios descriptivos}\label{estudios-descriptivos-2}

\subsubsection{Estadísticos}\label{estaduxedsticos-2}

\begin{itemize}
\tightlist
\item
  Tamaño muestral de cada grupo
\item
  Media de cada grupo
\item
  Desviación típica de cada grupo
\item
  Mínimo, Máximo de cada grupo
\item
  Cuartiles de cada grupo
\item
  Coeficiente de asimetría de cada grupo
\item
  Coeficiente de apuntamiento de cada grupo
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Tamaño muestral de notaA según el sexo}
\NormalTok{df }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{group\_by}\NormalTok{(sexo) }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{group\_size}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 71 49
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Media, Desviación típica, Mín, Máx, Cuartiles, Coef. Asimetría y Coef. Apuntamiento}
\FunctionTok{library}\NormalTok{(moments)}
\NormalTok{df }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{group\_by}\NormalTok{(sexo) }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{summarize}\NormalTok{(}\AttributeTok{Media =} \FunctionTok{mean}\NormalTok{(notaA, }\AttributeTok{na.rm=}\ConstantTok{TRUE}\NormalTok{), }\AttributeTok{Des.Tip =} \FunctionTok{sd}\NormalTok{(notaA, }\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{), Mín }\OtherTok{=} \FunctionTok{min}\NormalTok{(notaA), Máx }\OtherTok{=} \FunctionTok{max}\NormalTok{(notaA), }\AttributeTok{C1 =} \FunctionTok{quantile}\NormalTok{(notaA, }\FloatTok{0.25}\NormalTok{, }\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{), }\AttributeTok{C2 =} \FunctionTok{quantile}\NormalTok{(notaA, }\FloatTok{0.5}\NormalTok{, }\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{), }\AttributeTok{C3 =} \FunctionTok{quantile}\NormalTok{(notaA, }\FloatTok{0.75}\NormalTok{, }\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{), Coef.Asimetría }\OtherTok{=} \FunctionTok{skewness}\NormalTok{(notaA, }\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{), }\AttributeTok{Coef.Apuntamiento =} \FunctionTok{kurtosis}\NormalTok{(notaA, }\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{) }\SpecialCharTok{{-}} \DecValTok{3}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
# A tibble: 2 x 10
  sexo   Media Des.Tip   Mín   Máx    C1    C2    C3 Coef.Asimetría
  <chr>  <dbl>   <dbl> <dbl> <dbl> <dbl> <dbl> <dbl>          <dbl>
1 Hombre  6.12    1.23   3.5   9.3   5.3   6.1  6.85          0.249
2 Mujer   5.89    1.49   2.5   9.3   5     5.7  6.8           0.135
# i 1 more variable: Coef.Apuntamiento <dbl>
\end{verbatim}

\subsubsection{Gráficos}\label{gruxe1ficos-2}

\begin{itemize}
\tightlist
\item
  Diagrama de cajas y bigotes
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{ggplot}\NormalTok{(}\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ sexo, }\AttributeTok{y =}\NormalTok{ notaA, }\AttributeTok{fill =}\NormalTok{ sexo)) }\SpecialCharTok{+} 
  \FunctionTok{geom\_boxplot}\NormalTok{() }\SpecialCharTok{+}
  \CommentTok{\# Cambio de escala del eje y}
  \FunctionTok{scale\_y\_continuous}\NormalTok{(}\AttributeTok{limits=}\FunctionTok{c}\NormalTok{(}\DecValTok{0}\NormalTok{, }\DecValTok{10}\NormalTok{), }\AttributeTok{breaks =} \DecValTok{0}\SpecialCharTok{:}\DecValTok{10}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\pandocbounded{\includegraphics[keepaspectratio]{08-analisis-estadisticos_files/figure-pdf/unnamed-chunk-28-1.pdf}}

\begin{itemize}
\tightlist
\item
  Diagrama de violín
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{ggplot}\NormalTok{(}\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ sexo, }\AttributeTok{y =}\NormalTok{ notaA, }\AttributeTok{fill =}\NormalTok{ sexo)) }\SpecialCharTok{+} 
  \FunctionTok{geom\_violin}\NormalTok{() }\SpecialCharTok{+}
  \CommentTok{\# Cambio de escala del eje y}
  \FunctionTok{scale\_y\_continuous}\NormalTok{(}\AttributeTok{limits=}\FunctionTok{c}\NormalTok{(}\DecValTok{0}\NormalTok{, }\DecValTok{10}\NormalTok{), }\AttributeTok{breaks =} \DecValTok{0}\SpecialCharTok{:}\DecValTok{10}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\pandocbounded{\includegraphics[keepaspectratio]{08-analisis-estadisticos_files/figure-pdf/unnamed-chunk-29-1.pdf}}

\subsection{Estudios inferenciales}\label{estudios-inferenciales-2}

\subsubsection{Test de normalidad de
Shapiro-Wilks}\label{test-de-normalidad-de-shapiro-wilks}

\textbf{Objetivo}: Comprobar la normalidad de la distribución de cada
población.

\textbf{Hipótesis nula}: La distribución es normal.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{group\_by}\NormalTok{(sexo) }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{summarise}\NormalTok{(}\StringTok{\textasciigrave{}}\AttributeTok{Estadístico W}\StringTok{\textasciigrave{}} \OtherTok{=} \FunctionTok{shapiro.test}\NormalTok{(notaA)}\SpecialCharTok{$}\NormalTok{statistic, }\StringTok{\textasciigrave{}}\AttributeTok{p{-}valor}\StringTok{\textasciigrave{}} \OtherTok{=} \FunctionTok{shapiro.test}\NormalTok{(notaA)}\SpecialCharTok{$}\NormalTok{p.value)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
# A tibble: 2 x 3
  sexo   `Estadístico W` `p-valor`
  <chr>            <dbl>     <dbl>
1 Hombre           0.990     0.872
2 Mujer            0.990     0.942
\end{verbatim}

\subsubsection{Test F de Fisher de comparación de varianzas de dos
poblaciones
independientes}\label{test-f-de-fisher-de-comparaciuxf3n-de-varianzas-de-dos-poblaciones-independientes}

\textbf{Objetivo}: Comparar las varianzas de dos poblaciones
independientes.

\textbf{Requisitos}:

\begin{itemize}
\tightlist
\item
  Variable dependiente cuantitativa.
\item
  Una variable independiente cualitativa con dos categorías
  (poblaciones)
\item
  Distribución normal de la variable dependiente en ambas poblaciones o
  tamaños de las muestras de cada población ≥ 30.
\end{itemize}

\textbf{Hipótesis nula}: La varianzas poblacionales son iguales (no
existe una diferencia significativa entre las medias poblacionales).

\textbf{Ejemplo}: Comprobar si diferencias signicativas entre las notas
medias de hombres y mujeres.

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Test de comparación de varianzas}
\FunctionTok{var.test}\NormalTok{(notaA }\SpecialCharTok{\textasciitilde{}}\NormalTok{ sexo, }\AttributeTok{data =}\NormalTok{ df)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}

    F test to compare two variances

data:  notaA by sexo
F = 0.6769, num df = 70, denom df = 48, p-value = 0.1347
alternative hypothesis: true ratio of variances is not equal to 1
95 percent confidence interval:
 0.3953421 1.1293155
sample estimates:
ratio of variances 
         0.6769032 
\end{verbatim}

\subsubsection{Test t de comparación de medias de dos poblaciones
independientes}\label{test-t-de-comparaciuxf3n-de-medias-de-dos-poblaciones-independientes}

\textbf{Objetivo}: Estimar la diferencia de medias en las dos
poblaciones o comprobar si hay diferencias significativas entre ellas.

\textbf{Requisitos}:

\begin{itemize}
\tightlist
\item
  Variable dependiente cuantitativa.
\item
  Una variable independiente cualitativa con dos categorías
  (poblaciones)
\item
  Distribución normal de la variable dependiente en ambas poblaciones o
  tamaños de las muestras de cada población ≥ 30.
\end{itemize}

\textbf{Hipótesis nula}: La medias poblacionales son iguales (no existe
una diferencia significativa entre las medias poblacionales).

\textbf{Observación}: El resultado del test depende de si las varianzas
poblacionales son iguales o no.

\textbf{Ejemplo}: Comprobar si diferencias signicativas entre las notas
medias de hombres y mujeres.

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Test de comparación de varianzas}
\FunctionTok{var.test}\NormalTok{(notaA }\SpecialCharTok{\textasciitilde{}}\NormalTok{ sexo, }\AttributeTok{data =}\NormalTok{ df)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}

    F test to compare two variances

data:  notaA by sexo
F = 0.6769, num df = 70, denom df = 48, p-value = 0.1347
alternative hypothesis: true ratio of variances is not equal to 1
95 percent confidence interval:
 0.3953421 1.1293155
sample estimates:
ratio of variances 
         0.6769032 
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Test de comparación de medias asumiendo varianzas iguales}
\FunctionTok{t.test}\NormalTok{ (notaA }\SpecialCharTok{\textasciitilde{}}\NormalTok{ sexo, }\AttributeTok{data =}\NormalTok{ df, }\AttributeTok{alternative =} \StringTok{"two.sided"}\NormalTok{, }\AttributeTok{var.equal =} \ConstantTok{FALSE}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}

    Welch Two Sample t-test

data:  notaA by sexo
t = 0.89364, df = 89.873, p-value = 0.3739
alternative hypothesis: true difference in means between group Hombre and group Mujer is not equal to 0
95 percent confidence interval:
 -0.2821809  0.7435779
sample estimates:
mean in group Hombre  mean in group Mujer 
            6.122535             5.891837 
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Test de comparación de medias asumiendo varianzas iguales}
\FunctionTok{t.test}\NormalTok{ (notaA }\SpecialCharTok{\textasciitilde{}}\NormalTok{ sexo, }\AttributeTok{data =}\NormalTok{ df, }\AttributeTok{alternative =} \StringTok{"two.sided"}\NormalTok{, }\AttributeTok{var.equal =} \ConstantTok{TRUE}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}

    Two Sample t-test

data:  notaA by sexo
t = 0.92608, df = 118, p-value = 0.3563
alternative hypothesis: true difference in means between group Hombre and group Mujer is not equal to 0
95 percent confidence interval:
 -0.262615  0.724012
sample estimates:
mean in group Hombre  mean in group Mujer 
            6.122535             5.891837 
\end{verbatim}

\begin{itemize}
\tightlist
\item
  Diagrama de medias
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{ggplot}\NormalTok{(}\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ sexo, }\AttributeTok{y =}\NormalTok{ notaA, }\AttributeTok{colour =}\NormalTok{ sexo)) }\SpecialCharTok{+} 
  \CommentTok{\# Puntos de medias}
  \FunctionTok{stat\_summary}\NormalTok{(}\AttributeTok{fun=}\StringTok{"mean"}\NormalTok{, }\AttributeTok{size=}\DecValTok{3}\NormalTok{,  }\AttributeTok{geom=}\StringTok{"point"}\NormalTok{, }\AttributeTok{position=}\FunctionTok{position\_dodge}\NormalTok{(}\AttributeTok{width=}\FloatTok{0.25}\NormalTok{)) }\SpecialCharTok{+} 
  \CommentTok{\# Intervalos de confianza para la media}
  \FunctionTok{stat\_summary}\NormalTok{(}\AttributeTok{fun.data =} \ControlFlowTok{function}\NormalTok{(x) }\FunctionTok{mean\_cl\_normal}\NormalTok{(x, }\AttributeTok{conf.int=}\FloatTok{0.95}\NormalTok{), }\AttributeTok{geom =} \StringTok{"pointrange"}\NormalTok{, }\AttributeTok{position=}\FunctionTok{position\_dodge}\NormalTok{(}\AttributeTok{width=}\FloatTok{0.25}\NormalTok{)) }
\end{Highlighting}
\end{Shaded}

\pandocbounded{\includegraphics[keepaspectratio]{08-analisis-estadisticos_files/figure-pdf/unnamed-chunk-35-1.pdf}}

\subsubsection{Test U de Mann-Whitney de comparación de dos poblaciones
independientes (no
paramétrico)}\label{test-u-de-mann-whitney-de-comparaciuxf3n-de-dos-poblaciones-independientes-no-paramuxe9trico}

\textbf{Objetivo}: Comprobar si hay diferencias significativas entre
entre dos poblaciones independientes.

\textbf{Requisitos}:

\begin{itemize}
\tightlist
\item
  Variable dependiente cuantitativa.
\item
  Una variable independiente cualitativa con dos categorías
  (poblaciones)
\end{itemize}

\textbf{Hipótesis nula}: La medianas poblacionales son iguales (no
existe una diferencia significativa entre las medianas poblacionales).

\textbf{Ejemplo}: Comprobar si diferencias signicativas entre las notas
de hombres y mujeres.

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Test de rangos U the Mann{-}Whitney}
\FunctionTok{wilcox.test}\NormalTok{(notaA }\SpecialCharTok{\textasciitilde{}}\NormalTok{ sexo, }\AttributeTok{data =}\NormalTok{ df, }\AttributeTok{alternative =} \StringTok{"two.sided"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}

    Wilcoxon rank sum test with continuity correction

data:  notaA by sexo
W = 1917, p-value = 0.3445
alternative hypothesis: true location shift is not equal to 0
\end{verbatim}

\section{Dos variables: Variable dependiente cuantitativa y variable
independiente culitativa con dos categorías o grupos
pareados}\label{dos-variables-variable-dependiente-cuantitativa-y-variable-independiente-culitativa-con-dos-categoruxedas-o-grupos-pareados}

Dos grupos o poblaciones están pareadas o emparejadas cuando los dos
poblaciones contienen los mismos individuos, es decir, se trata en
realidadad de una única población, pero la variable dependiente se mide
dos veces en cada individuo (normalmente antes y después de la algún
suceso) y por tanto cada individuo tiene asociado un par de valores.

Este estudio puede realizarse también creando una nueva variable a
partir de la resta de las dos mediciones y planteando un estudio de una
sola variable cuantitativa.

\textbf{Ejemplo}: Creación de la diferencia de notas de las asignaturas
A y B.

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Creamos la variable diferencia = notaA {-} notaB}
\NormalTok{df }\OtherTok{\textless{}{-}}\NormalTok{ df }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{mutate}\NormalTok{(}\AttributeTok{diferencia =}\NormalTok{ notaA }\SpecialCharTok{{-}}\NormalTok{ notaB)}
\end{Highlighting}
\end{Shaded}

\subsection{Estudios descriptivos}\label{estudios-descriptivos-3}

\subsubsection{Estadísticos}\label{estaduxedsticos-3}

\begin{itemize}
\tightlist
\item
  Tamaño muestral del grupo
\item
  Media de la diferencia
\item
  Desviación típica de la diferencia
\item
  Mínimo, Máximo de la diferencia
\item
  Cuartiles de la diferencia
\item
  Coeficiente de asimetría de la diferencia
\item
  Coeficiente de apuntamiento de la diferencia
\end{itemize}

\textbf{Ejemplo}: Estadísticos descriptivos de la diferencia entre las
notas de las asignaturas A y B de un mismo grupo de alumnos.

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Tamaño muestral de sin contar los datos perdidos}
\FunctionTok{length}\NormalTok{(}\FunctionTok{na.omit}\NormalTok{(df}\SpecialCharTok{$}\NormalTok{diferencia))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 115
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Media, Desviación típica, Mín, Máx, Cuartiles, Coef. Asimetría y Coef. Apuntamiento}
\FunctionTok{library}\NormalTok{(moments)}
\NormalTok{df }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{summarize}\NormalTok{(}\AttributeTok{Media =} \FunctionTok{mean}\NormalTok{(diferencia, }\AttributeTok{na.rm=}\ConstantTok{TRUE}\NormalTok{), }\AttributeTok{Des.Tip =} \FunctionTok{sd}\NormalTok{(diferencia, }\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{), Mín }\OtherTok{=} \FunctionTok{min}\NormalTok{(diferencia, }\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{), Máx }\OtherTok{=} \FunctionTok{max}\NormalTok{(diferencia, }\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{), }\AttributeTok{C1 =} \FunctionTok{quantile}\NormalTok{(diferencia, }\FloatTok{0.25}\NormalTok{, }\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{), }\AttributeTok{C2 =} \FunctionTok{quantile}\NormalTok{(diferencia, }\FloatTok{0.5}\NormalTok{, }\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{), }\AttributeTok{C3 =} \FunctionTok{quantile}\NormalTok{(diferencia, }\FloatTok{0.75}\NormalTok{, }\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{), Coef.Asimetría }\OtherTok{=} \FunctionTok{skewness}\NormalTok{(diferencia, }\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{), }\AttributeTok{Coef.Apuntamiento =} \FunctionTok{kurtosis}\NormalTok{(diferencia, }\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{) }\SpecialCharTok{{-}} \DecValTok{3}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
       Media   Des.Tip  Mín Máx   C1   C2   C3 Coef.Asimetría Coef.Apuntamiento
1 -0.8817391 0.9000568 -3.2 1.1 -1.5 -0.8 -0.3     -0.4304152        -0.1366944
\end{verbatim}

\subsubsection{Gráficos}\label{gruxe1ficos-3}

\begin{itemize}
\tightlist
\item
  Diagrama de cajas y bigotes
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{ggplot}\NormalTok{(}\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ diferencia)) }\SpecialCharTok{+} 
  \FunctionTok{geom\_boxplot}\NormalTok{(}\AttributeTok{fill=}\StringTok{"\#00BFC4"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
Warning: Removed 5 rows containing non-finite values (`stat_boxplot()`).
\end{verbatim}

\pandocbounded{\includegraphics[keepaspectratio]{08-analisis-estadisticos_files/figure-pdf/unnamed-chunk-40-1.pdf}}

\subsection{Estudios inferenciales}\label{estudios-inferenciales-3}

\subsubsection{Test de normalidad de
Shapiro-Wilks}\label{test-de-normalidad-de-shapiro-wilks-1}

\textbf{Objetivo}: Comprobar la normalidad de la distribución de la
diferencia.

\textbf{Hipótesis nula}: La distribución es normal.

\textbf{Ejemplo}: Comprobar la normalidad de la diferencia entre las
notas de las asignaturas A y B de un mismo grupo de alumnos.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{summarise}\NormalTok{(}\StringTok{\textasciigrave{}}\AttributeTok{Estadístico W}\StringTok{\textasciigrave{}} \OtherTok{=} \FunctionTok{shapiro.test}\NormalTok{(diferencia)}\SpecialCharTok{$}\NormalTok{statistic, }\StringTok{\textasciigrave{}}\AttributeTok{p{-}valor}\StringTok{\textasciigrave{}} \OtherTok{=} \FunctionTok{shapiro.test}\NormalTok{(diferencia)}\SpecialCharTok{$}\NormalTok{p.value)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
  Estadístico W    p-valor
1     0.9794023 0.07367451
\end{verbatim}

\subsubsection{Test t de comparación de medias de dos poblaciones
pareadas}\label{test-t-de-comparaciuxf3n-de-medias-de-dos-poblaciones-pareadas}

\textbf{Objetivo}: Estimar la media de la diferencia o compararla con un
valor dado \emph{μ}0.

\textbf{Requisitos}:

\begin{itemize}
\tightlist
\item
  Variable dependiente cuantitativa.
\item
  Una variable independiente cualitativa con dos categorías
  (poblaciones) pareadas
\item
  Distribución normal de la variable diferencia o tamaño muestral ≥ 30.
\end{itemize}

\textbf{Hipótesis nula}: La medias poblacionales son iguales (no existe
una diferencia significativa entre las medias poblacionales).

\textbf{Ejemplo}: Comprobar si hay una diferencia signicativa entre las
notas medias de las asinaturas A y B, o lo que es lo mismo, comprobar si
la media de la diferencia de las notas de A y B es distinta de 0.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{t.test}\NormalTok{ (df}\SpecialCharTok{$}\NormalTok{notaA, df}\SpecialCharTok{$}\NormalTok{notaB, }\AttributeTok{alternative =} \StringTok{"two.sided"}\NormalTok{, }\AttributeTok{paired =} \ConstantTok{TRUE}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}

    Paired t-test

data:  df$notaA and df$notaB
t = -10.506, df = 114, p-value < 2.2e-16
alternative hypothesis: true mean difference is not equal to 0
95 percent confidence interval:
 -1.048005 -0.715473
sample estimates:
mean difference 
     -0.8817391 
\end{verbatim}

\begin{itemize}
\tightlist
\item
  Diagrama de medias
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{ggplot}\NormalTok{(}\FunctionTok{aes}\NormalTok{(}\AttributeTok{x=}\StringTok{""}\NormalTok{, }\AttributeTok{y =}\NormalTok{ diferencia)) }\SpecialCharTok{+} 
  \CommentTok{\# Puntos de medias}
  \FunctionTok{stat\_summary}\NormalTok{(}\AttributeTok{fun=}\StringTok{"mean"}\NormalTok{, }\AttributeTok{size=}\DecValTok{3}\NormalTok{,  }\AttributeTok{geom=}\StringTok{"point"}\NormalTok{) }\SpecialCharTok{+} 
  \CommentTok{\# Intervalos de confianza para la media}
  \FunctionTok{stat\_summary}\NormalTok{(}\AttributeTok{fun.data =} \ControlFlowTok{function}\NormalTok{(x) }\FunctionTok{mean\_cl\_normal}\NormalTok{(x, }\AttributeTok{conf.int=}\FloatTok{0.95}\NormalTok{), }\AttributeTok{geom =} \StringTok{"pointrange"}\NormalTok{, }\AttributeTok{position=}\FunctionTok{position\_dodge}\NormalTok{(}\AttributeTok{width=}\FloatTok{0.25}\NormalTok{)) }
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
Warning: Removed 5 rows containing non-finite values (`stat_summary()`).
Removed 5 rows containing non-finite values (`stat_summary()`).
\end{verbatim}

\pandocbounded{\includegraphics[keepaspectratio]{08-analisis-estadisticos_files/figure-pdf/unnamed-chunk-43-1.pdf}}

\subsubsection{Test Wilcoxon de comparación de dos poblaciones pareadas
(no
paramétrico)}\label{test-wilcoxon-de-comparaciuxf3n-de-dos-poblaciones-pareadas-no-paramuxe9trico}

\textbf{Objetivo}: Comparar las medianas de las dos poblaciones.

\textbf{Requisitos}:

\begin{itemize}
\tightlist
\item
  Variable dependiente cuantitativa.
\item
  Una variable independiente cualitativa con dos categorías
  (poblaciones) pareadas.
\end{itemize}

\textbf{Hipótesis nula}: La medianas poblacionales son iguales (no
existe una diferencia significativa entre las medianas poblacionales).

\textbf{Ejemplo}: Comprobar si hay una diferencia signicativa entre las
notas de las asignaturas A y B.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{wilcox.test}\NormalTok{(df}\SpecialCharTok{$}\NormalTok{notaA, df}\SpecialCharTok{$}\NormalTok{notaB, }\AttributeTok{alternative =} \StringTok{"two.sided"}\NormalTok{, }\AttributeTok{paired =} \ConstantTok{TRUE}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}

    Wilcoxon signed rank test with continuity correction

data:  df$notaA and df$notaB
V = 398, p-value = 2.442e-15
alternative hypothesis: true location shift is not equal to 0
\end{verbatim}

\section{Dos variables: Variable dependiente cuantitativa y variable
independiente culitativa con más de dos categorías o
grupos}\label{dos-variables-variable-dependiente-cuantitativa-y-variable-independiente-culitativa-con-muxe1s-de-dos-categoruxedas-o-grupos}

\subsection{Estudios descriptivos}\label{estudios-descriptivos-4}

\subsubsection{Estadísticos}\label{estaduxedsticos-4}

\begin{itemize}
\tightlist
\item
  Tamaño muestral de cada grupo
\item
  Media de cada grupo
\item
  Desviación típica de cada grupo
\item
  Mínimo, Máximo de cada grupo
\item
  Cuartiles de cada grupo
\item
  Coeficiente de asimetría de cada grupo
\item
  Coeficiente de apuntamiento de cada grupo
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Tamaño muestral de notaA según el grupo}
\NormalTok{df }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{group\_by}\NormalTok{(grupo) }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{group\_size}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 38 35 47
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Media, Desviación típica, Mín, Máx, Cuartiles, Coef. Asimetría y Coef. Apuntamiento}
\FunctionTok{library}\NormalTok{(moments)}
\NormalTok{df }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{group\_by}\NormalTok{(grupo) }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{summarize}\NormalTok{(}\AttributeTok{Media =} \FunctionTok{mean}\NormalTok{(notaA, }\AttributeTok{na.rm=}\ConstantTok{TRUE}\NormalTok{), }\AttributeTok{Des.Tip =} \FunctionTok{sd}\NormalTok{(notaA, }\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{), Mín }\OtherTok{=} \FunctionTok{min}\NormalTok{(notaA, }\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{), Máx }\OtherTok{=} \FunctionTok{max}\NormalTok{(notaA, }\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{), }\AttributeTok{C1 =} \FunctionTok{quantile}\NormalTok{(notaA, }\FloatTok{0.25}\NormalTok{, }\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{), }\AttributeTok{C2 =} \FunctionTok{quantile}\NormalTok{(notaA, }\FloatTok{0.5}\NormalTok{, }\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{), }\AttributeTok{C3 =} \FunctionTok{quantile}\NormalTok{(notaA, }\FloatTok{0.75}\NormalTok{, }\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{), Coef.Asimetría }\OtherTok{=} \FunctionTok{skewness}\NormalTok{(notaA, }\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{), }\AttributeTok{Coef.Apuntamiento =} \FunctionTok{kurtosis}\NormalTok{(notaA, }\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{) }\SpecialCharTok{{-}} \DecValTok{3}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
# A tibble: 3 x 10
  grupo Media Des.Tip   Mín   Máx    C1    C2    C3 Coef.Asimetría
  <chr> <dbl>   <dbl> <dbl> <dbl> <dbl> <dbl> <dbl>          <dbl>
1 A      6.54   0.998   4.3   8.6  5.93   6.6  7.15         -0.250
2 B      6.96   1.23    3.5   9.3  6.2    6.8  7.7          -0.141
3 C      4.92   0.771   2.5   5.9  4.5    5.1  5.5          -1.06 
# i 1 more variable: Coef.Apuntamiento <dbl>
\end{verbatim}

\subsubsection{Gráficos}\label{gruxe1ficos-4}

\begin{itemize}
\tightlist
\item
  Diagrama de cajas y bigotes
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{ggplot}\NormalTok{(}\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ grupo, }\AttributeTok{y =}\NormalTok{ notaA, }\AttributeTok{fill =}\NormalTok{ grupo)) }\SpecialCharTok{+} 
  \FunctionTok{geom\_boxplot}\NormalTok{() }\SpecialCharTok{+}
  \CommentTok{\# Cambio de escala del eje X}
  \FunctionTok{scale\_y\_continuous}\NormalTok{(}\AttributeTok{limits=}\FunctionTok{c}\NormalTok{(}\DecValTok{0}\NormalTok{, }\DecValTok{10}\NormalTok{), }\AttributeTok{breaks =} \DecValTok{0}\SpecialCharTok{:}\DecValTok{10}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\pandocbounded{\includegraphics[keepaspectratio]{08-analisis-estadisticos_files/figure-pdf/unnamed-chunk-47-1.pdf}}

\begin{itemize}
\tightlist
\item
  Diagrama de violín
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{ggplot}\NormalTok{(}\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ grupo, }\AttributeTok{y =}\NormalTok{ notaA, }\AttributeTok{fill =}\NormalTok{ grupo)) }\SpecialCharTok{+} 
  \FunctionTok{geom\_violin}\NormalTok{() }\SpecialCharTok{+}
  \CommentTok{\# Cambio de escala del eje X}
  \FunctionTok{scale\_y\_continuous}\NormalTok{(}\AttributeTok{limits=}\FunctionTok{c}\NormalTok{(}\DecValTok{0}\NormalTok{, }\DecValTok{10}\NormalTok{), }\AttributeTok{breaks =} \DecValTok{0}\SpecialCharTok{:}\DecValTok{10}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\pandocbounded{\includegraphics[keepaspectratio]{08-analisis-estadisticos_files/figure-pdf/unnamed-chunk-48-1.pdf}}

\subsection{Estudios inferenciales}\label{estudios-inferenciales-4}

\subsubsection{Test de normalidad de
Shapiro-Wilks}\label{test-de-normalidad-de-shapiro-wilks-2}

\textbf{Objetivo}: Comprobar la normalidad de la distribución de cada
población.

\textbf{Hipótesis nula}: La distribución es normal.

\textbf{Ejemplo}: Comprobar la normalidad de las distribuciones de la
nota A en los grupos A, B y C.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{group\_by}\NormalTok{(grupo) }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{summarise}\NormalTok{(}\StringTok{\textasciigrave{}}\AttributeTok{Estadístico W}\StringTok{\textasciigrave{}} \OtherTok{=} \FunctionTok{shapiro.test}\NormalTok{(notaA)}\SpecialCharTok{$}\NormalTok{statistic, }\StringTok{\textasciigrave{}}\AttributeTok{p{-}valor}\StringTok{\textasciigrave{}} \OtherTok{=} \FunctionTok{shapiro.test}\NormalTok{(notaA)}\SpecialCharTok{$}\NormalTok{p.value)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
# A tibble: 3 x 3
  grupo `Estadístico W` `p-valor`
  <chr>           <dbl>     <dbl>
1 A               0.984   0.840  
2 B               0.963   0.277  
3 C               0.918   0.00280
\end{verbatim}

\textbf{Interpretación}: La distribución de la nota A en los grupos A y
B es normal (p-valores \textgreater{} 0.05) pero no en el grupo C
(p-valor \textless{} 0.05)

\textbf{Ejemplo}: Comprobar la normalidad de las distribuciones de la
nota C en los grupos A, B y C.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{group\_by}\NormalTok{(grupo) }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{summarise}\NormalTok{(}\StringTok{\textasciigrave{}}\AttributeTok{Estadístico W}\StringTok{\textasciigrave{}} \OtherTok{=} \FunctionTok{shapiro.test}\NormalTok{(notaC)}\SpecialCharTok{$}\NormalTok{statistic, }\StringTok{\textasciigrave{}}\AttributeTok{p{-}valor}\StringTok{\textasciigrave{}} \OtherTok{=} \FunctionTok{shapiro.test}\NormalTok{(notaC)}\SpecialCharTok{$}\NormalTok{p.value)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
# A tibble: 3 x 3
  grupo `Estadístico W` `p-valor`
  <chr>           <dbl>     <dbl>
1 A               0.989     0.961
2 B               0.965     0.343
3 C               0.976     0.442
\end{verbatim}

\textbf{Interpretación}: La distribución de la nota C en los tres grupos
es normal (p-valores \textgreater{} 0.05).

\subsubsection{Test de Levene de comparación de varianzas de dos o más
poblaciones
independientes}\label{test-de-levene-de-comparaciuxf3n-de-varianzas-de-dos-o-muxe1s-poblaciones-independientes}

\textbf{Objetivo}: Comparar las varianzas de dos o más poblaciones
independientes.

\textbf{Requisitos}:

\begin{itemize}
\tightlist
\item
  Variable dependiente cuantitativa.
\item
  Una variable independiente cualitativa con dos o más categorías
  (poblaciones)
\item
  Distribución normal de la variable dependiente en todas las
  poblaciones o tamaños de las muestras de cada población ≥ 30.
\end{itemize}

\textbf{Hipótesis nula}: La varianzas poblacionales son iguales (no
existe una diferencia significativa entre las medias poblacionales).

\textbf{Ejemplo}: Comprobar si diferencias signicativas entre las
varianzas de las notas de la asignatura C de los grupos A, B y C.

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# El test de Levene está disponible en el paquete car}
\FunctionTok{library}\NormalTok{(car)}
\CommentTok{\# Test de comparación de varianzas}
\FunctionTok{leveneTest}\NormalTok{(notaC }\SpecialCharTok{\textasciitilde{}}\NormalTok{ grupo, }\AttributeTok{data =}\NormalTok{ df)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
Warning in leveneTest.default(y = y, group = group, ...): group coerced to
factor.
\end{verbatim}

\begin{verbatim}
Levene's Test for Homogeneity of Variance (center = median)
       Df F value Pr(>F)
group   2  0.3186 0.7278
      116               
\end{verbatim}

\textbf{Interpretación}: No existe diferencia significativa entre las
varianzas de la nota C en los grupos A, B y C (p-valor \textgreater{}
0.05).

\subsubsection{ANOVA de un factor para la comparación medias de más de
dos poblaciones
independientes}\label{anova-de-un-factor-para-la-comparaciuxf3n-medias-de-muxe1s-de-dos-poblaciones-independientes}

\textbf{Objetivo}: Comprobar si hay diferencias significativas entre las
medias de más de dos poblaciones independientes.

\textbf{Requisitos}:

\begin{itemize}
\tightlist
\item
  Variable dependiente cuantitativa.
\item
  Una variable independiente cualitativa con más de dos categorías
  (poblaciones)-
\item
  Distribución normal de la variable dependiente en todas las
  poblaciones o tamaños de las muestras de cada población ≥ 30.
\item
  Homogeneidad de varianzas en las poblaciones.
\end{itemize}

\textbf{Hipótesis nula}: La medias poblacionales son iguales (no existe
una diferencia significativa entre las medias poblacionales).

\textbf{Ejemplo}: Comprobar si diferencias signicativas entre las notas
medias de la asignatura C de los grupos A, B y C.

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Análisis de la varianza de un factor}
\FunctionTok{summary}\NormalTok{(}\FunctionTok{aov}\NormalTok{(notaC }\SpecialCharTok{\textasciitilde{}}\NormalTok{ grupo, }\AttributeTok{data =}\NormalTok{ df))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
             Df Sum Sq Mean Sq F value   Pr(>F)    
grupo         2  80.69   40.34   20.05 3.32e-08 ***
Residuals   116 233.41    2.01                     
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
1 observation deleted due to missingness
\end{verbatim}

\textbf{Interpretación}: Existen diferencias significativas entre las
medias de la nota C entre al menos dos grupos (p-valor=3.32e-08
\textless{} 0.05).

\textbf{Observación}: Cuando se detectan diferencias significativas
entre las medias de al menos dos grupos conviene realizar un test de
comparación múltiple por pares para ver entre qué poblaciones hay
diferencias y entre cuáles no. Los test más habituales de comparación
por pares son el de Tukey y el de Bonferroni.

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Test de comparación múltiple de Tukey}
\FunctionTok{TukeyHSD}\NormalTok{(}\FunctionTok{aov}\NormalTok{(notaC }\SpecialCharTok{\textasciitilde{}}\NormalTok{ grupo, }\AttributeTok{data =}\NormalTok{ df))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
  Tukey multiple comparisons of means
    95% family-wise confidence level

Fit: aov(formula = notaC ~ grupo, data = df)

$grupo
          diff        lwr        upr     p adj
B-A  0.4312693 -0.3637573  1.2262960 0.4048482
C-A -1.4455767 -2.1802858 -0.7108676 0.0000241
C-B -1.8768461 -2.6350758 -1.1186163 0.0000001
\end{verbatim}

\textbf{Interpretación}: No existe una diferencia significativa entre
las notas medias de la asignatura C de los grupos A y B (p-valor=0.4048
\textgreater{} 0.05), pero si existe una diferencia significativa entre
las notas medias de los grupos A y C (p-valor=0.00002 \textless{} 0.05)
y también entre las notas medias de los grupos B y C (p-valor=0.0000001
\textless{} 0.05).

\begin{itemize}
\tightlist
\item
  Diagrama de medias
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{ggplot}\NormalTok{(}\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ grupo, }\AttributeTok{y =}\NormalTok{ notaC, }\AttributeTok{colour =}\NormalTok{ grupo)) }\SpecialCharTok{+} 
  \CommentTok{\# Puntos de medias}
  \FunctionTok{stat\_summary}\NormalTok{(}\AttributeTok{fun=}\StringTok{"mean"}\NormalTok{, }\AttributeTok{size=}\DecValTok{3}\NormalTok{,  }\AttributeTok{geom=}\StringTok{"point"}\NormalTok{, }\AttributeTok{position=}\FunctionTok{position\_dodge}\NormalTok{(}\AttributeTok{width=}\FloatTok{0.25}\NormalTok{)) }\SpecialCharTok{+} 
  \CommentTok{\# Intervalos de confianza para la media}
  \FunctionTok{stat\_summary}\NormalTok{(}\AttributeTok{fun.data =} \ControlFlowTok{function}\NormalTok{(x) }\FunctionTok{mean\_cl\_normal}\NormalTok{(x, }\AttributeTok{conf.int=}\FloatTok{0.95}\NormalTok{), }\AttributeTok{geom =} \StringTok{"pointrange"}\NormalTok{, }\AttributeTok{position=}\FunctionTok{position\_dodge}\NormalTok{(}\AttributeTok{width=}\FloatTok{0.25}\NormalTok{)) }
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
Warning: Removed 1 rows containing non-finite values (`stat_summary()`).
Removed 1 rows containing non-finite values (`stat_summary()`).
\end{verbatim}

\pandocbounded{\includegraphics[keepaspectratio]{08-analisis-estadisticos_files/figure-pdf/unnamed-chunk-54-1.pdf}}

\subsubsection{Test Kruskal-Wallis de comparación de más de dos
poblaciones independientes (no
paramétrico)}\label{test-kruskal-wallis-de-comparaciuxf3n-de-muxe1s-de-dos-poblaciones-independientes-no-paramuxe9trico}

\textbf{Objetivo}: Comprobar si hay diferencias significativas entre
entre más de dos poblaciones independientes.

\textbf{Requisitos}:

\begin{itemize}
\tightlist
\item
  Variable dependiente cuantitativa.
\item
  Una variable independiente cualitativa con más de dos categorías
  (poblaciones)
\end{itemize}

\textbf{Hipótesis nula}: La medianas poblacionales son iguales (no
existe una diferencia significativa entre las medianas poblacionales).

\textbf{Ejemplo}: Comprobar si diferencias signicativas entre las notas
de la asignatura A de los grupos A, B y C.

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Test de Kruskal{-}Wallis}
\FunctionTok{kruskal.test}\NormalTok{(notaA }\SpecialCharTok{\textasciitilde{}}\NormalTok{ grupo, }\AttributeTok{data =}\NormalTok{ df)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}

    Kruskal-Wallis rank sum test

data:  notaA by grupo
Kruskal-Wallis chi-squared = 62.218, df = 2, p-value = 3.087e-14
\end{verbatim}

\textbf{Interpretación}: Existen diferencias significativas entre las
notas de la asignatura A de al menos dos de los grupos.

\textbf{Observación}: Cuando se detectan diferencias significativas
entre al menos dos grupos conviene realizar un test de comparación
múltiple por pares para ver entre qué poblaciones hay diferencias y
entre cuáles no. El test más habitual es el de Wilcoxon.

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Test de comparación múltiple de Wilcoxon}
\FunctionTok{pairwise.wilcox.test}\NormalTok{(df}\SpecialCharTok{$}\NormalTok{notaA, df}\SpecialCharTok{$}\NormalTok{grupo, }\AttributeTok{p.adjust.method =} \StringTok{"BH"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
Warning in wilcox.test.default(xi, xj, paired = paired, ...): cannot compute
exact p-value with ties

Warning in wilcox.test.default(xi, xj, paired = paired, ...): cannot compute
exact p-value with ties

Warning in wilcox.test.default(xi, xj, paired = paired, ...): cannot compute
exact p-value with ties
\end{verbatim}

\begin{verbatim}

    Pairwise comparisons using Wilcoxon rank sum test with continuity correction 

data:  df$notaA and df$grupo 

  A       B      
B 0.19    -      
C 4.2e-10 1.3e-11

P value adjustment method: BH 
\end{verbatim}

\textbf{Interpretación}: No existe una diferencia significativa entre
las notas de la asignatura A de los grupos A y B (p-valor=0.19
\textgreater{} 0.05), pero si existe una diferencia significativa entre
las notas de los grupos A y C (p-valor=4.2e-10 \textless{} 0.05) y
también entre las notas de los grupos B y C (p-valor=1.3e-11 \textless{}
0.05).

\section{Dos variables: Variable dependiente cuantitativa y variable
independiente
cuantitativa}\label{dos-variables-variable-dependiente-cuantitativa-y-variable-independiente-cuantitativa}

\subsection{Estudios descriptivos}\label{estudios-descriptivos-5}

\subsubsection{Estadísticos}\label{estaduxedsticos-5}

\subsubsection{Estadísticos}\label{estaduxedsticos-6}

\begin{itemize}
\tightlist
\item
  Tamaño muestral de cada grupo
\item
  Media de cada variable
\item
  Desviación típica de cada variable
\item
  Mínimo, Máximo de cada variable
\item
  Cuartiles de cada variable
\item
  Coeficiente de asimetría de cada variable
\item
  Coeficiente de apuntamiento de cada variable
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Tamaño muestral de notaA según el grupo}
\FunctionTok{nrow}\NormalTok{(df)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 120
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Media, Desviación típica, Mín, Máx, Cuartiles, Coef. Asimetría y Coef. Apuntamiento}
\FunctionTok{library}\NormalTok{(moments)}
\NormalTok{df }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{summarize}\NormalTok{(}\AttributeTok{Media =} \FunctionTok{mean}\NormalTok{(notaA, }\AttributeTok{na.rm=}\ConstantTok{TRUE}\NormalTok{), }\AttributeTok{Des.Tip =} \FunctionTok{sd}\NormalTok{(notaA, }\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{), Mín }\OtherTok{=} \FunctionTok{min}\NormalTok{(notaA, }\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{), Máx }\OtherTok{=} \FunctionTok{max}\NormalTok{(notaA, }\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{), }\AttributeTok{C1 =} \FunctionTok{quantile}\NormalTok{(notaA, }\FloatTok{0.25}\NormalTok{, }\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{), }\AttributeTok{C2 =} \FunctionTok{quantile}\NormalTok{(notaA, }\FloatTok{0.5}\NormalTok{, }\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{), }\AttributeTok{C3 =} \FunctionTok{quantile}\NormalTok{(notaA, }\FloatTok{0.75}\NormalTok{, }\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{), Coef.Asimetría }\OtherTok{=} \FunctionTok{skewness}\NormalTok{(notaA, }\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{), }\AttributeTok{Coef.Apuntamiento =} \FunctionTok{kurtosis}\NormalTok{(notaA, }\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{) }\SpecialCharTok{{-}} \DecValTok{3}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
     Media  Des.Tip Mín Máx  C1  C2    C3 Coef.Asimetría Coef.Apuntamiento
1 6.028333 1.340524 2.5 9.3 5.1 5.9 6.825      0.1373915         -0.102287
\end{verbatim}

\subsubsection{Gráficos}\label{gruxe1ficos-5}

\begin{itemize}
\tightlist
\item
  Diagrama de dispersión
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{ggplot}\NormalTok{(}\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ notaA, }\AttributeTok{y =}\NormalTok{ notaB)) }\SpecialCharTok{+} 
  \FunctionTok{geom\_point}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
Warning: Removed 5 rows containing missing values (`geom_point()`).
\end{verbatim}

\pandocbounded{\includegraphics[keepaspectratio]{08-analisis-estadisticos_files/figure-pdf/unnamed-chunk-59-1.pdf}}

\subsection{Estudios inferenciales}\label{estudios-inferenciales-5}

\subsubsection{Análisis de regresión}\label{anuxe1lisis-de-regresiuxf3n}

\textbf{Objetivo}: Construir un modelo matemático \(y=f(x)\) que
explique lo mejor posible la variable dependiente en función de la
independiente, para utilizarlo con fines predictivos.

\textbf{Requisitos}:

\begin{itemize}
\tightlist
\item
  Variable dependiente cuantitativa.
\item
  Una variable independiente cuantitativa.
\end{itemize}

\textbf{Ejemplo}: Construir el modelo lineal (recta de regresión) que
mejor explica la relación entre la nota B y la nota A.

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Análisis de la varianza de un factor}
\FunctionTok{lm}\NormalTok{(notaB }\SpecialCharTok{\textasciitilde{}}\NormalTok{ notaA, }\AttributeTok{data =}\NormalTok{ df)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}

Call:
lm(formula = notaB ~ notaA, data = df)

Coefficients:
(Intercept)        notaA  
     1.0224       0.9763  
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Análisis de la varianza de un factor}
\FunctionTok{summary}\NormalTok{(}\FunctionTok{lm}\NormalTok{(notaB }\SpecialCharTok{\textasciitilde{}}\NormalTok{ notaA, }\AttributeTok{data =}\NormalTok{ df))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}

Call:
lm(formula = notaB ~ notaA, data = df)

Residuals:
     Min       1Q   Median       3Q      Max 
-1.99907 -0.59551 -0.07534  0.61398  2.31991 

Coefficients:
            Estimate Std. Error t value Pr(>|t|)    
(Intercept)  1.02243    0.40254    2.54   0.0124 *  
notaA        0.97628    0.06637   14.71   <2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.9035 on 113 degrees of freedom
  (5 observations deleted due to missingness)
Multiple R-squared:  0.6569,    Adjusted R-squared:  0.6539 
F-statistic: 216.3 on 1 and 113 DF,  p-value: < 2.2e-16
\end{verbatim}

\textbf{Interpretación}: La recta de regresión explica el 65\% de la
variabilidad de la nota B.

\subsubsection{Análisis de
correlación}\label{anuxe1lisis-de-correlaciuxf3n}

\textbf{Objetivo}: Estudiar el grado de relación entre las dos
variables.

\textbf{Requisitos}:

\begin{itemize}
\tightlist
\item
  Variable dependiente cuantitativa.
\item
  Una variable independiente cuantitativa.
\end{itemize}

\textbf{Hipótesis nula}: Las dos variables son independientes.

\textbf{Ejemplo}: Ver si las notas A y B están relacionadas y cuál es su
grado de relación.

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Análisis de la varianza de un factor}
\FunctionTok{cor.test}\NormalTok{(df}\SpecialCharTok{$}\NormalTok{notaA, df}\SpecialCharTok{$}\NormalTok{notaB)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}

    Pearson's product-moment correlation

data:  df$notaA and df$notaB
t = 14.709, df = 113, p-value < 2.2e-16
alternative hypothesis: true correlation is not equal to 0
95 percent confidence interval:
 0.7367182 0.8651991
sample estimates:
      cor 
0.8104926 
\end{verbatim}

\textbf{Interpretación}: Existe una correlación fuerte entre la nota A y
la nota C, que además es estadísticamente muy significativa.

\section{Ejercicios}\label{ejercicios-6}

\begin{exercise}[]\protect\hypertarget{exr-analisis-estadisticos-1}{}\label{exr-analisis-estadisticos-1}

El fichero
\href{https://raw.githubusercontent.com/asalber/manual-r/master/datos/genetica.csv}{\texttt{genetica}},
contiene información de la análitica fisiológica, microbiológica y
bioquímica, de una muestra de ratas tratadas con distintos tratamientos.

\begin{enumerate}
\def\labelenumi{\alph{enumi}.}
\item
  Crear un tibble con los datos del fichero.

  \begin{tcolorbox}[enhanced jigsaw, opacitybacktitle=0.6, toptitle=1mm, opacityback=0, bottomrule=.15mm, colbacktitle=quarto-callout-note-color!10!white, leftrule=.75mm, toprule=.15mm, title=\textcolor{quarto-callout-note-color}{\faInfo}\hspace{0.5em}{Solución}, colframe=quarto-callout-note-color-frame, titlerule=0mm, colback=white, arc=.35mm, rightrule=.15mm, coltitle=black, left=2mm, breakable, bottomtitle=1mm]

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(tidyverse)}
\NormalTok{df }\OtherTok{\textless{}{-}} \FunctionTok{read\_csv}\NormalTok{(}\StringTok{\textquotesingle{}https://raw.githubusercontent.com/asalber/manual{-}r/master/datos/genetica.csv\textquotesingle{}}\NormalTok{)}
\NormalTok{df}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
# A tibble: 21 x 20
   `código muestra` Tratamiento  `mas cor (g)`    IHS     IES     ITS     IAS
   <chr>            <chr>                <dbl>  <dbl>   <dbl>   <dbl>   <dbl>
 1 Ct-A1            Control               236  0.0433 0.00198 0.00178 0.00043
 2 Ct-A2            Control               202. 0.044  0.002   0.0017  0.0008 
 3 Ct-B1            Control               246. 0.042  0.002   0.0015  0.0005 
 4 Ct-B2            Control               237. 0.0475 0.00238 0.00203 0.00041
 5 Ct-B3            Control               231. 0.0499 0.002   0.0011  0.0005 
 6 Ct-C1            Control               235. 0.05   0.0021  0.0033  0.0014 
 7 Ct-C2            Control               228. 0.05   0.0018  0.0031  0.00059
 8 Dx-1             Dexametasona          181. 0.061  0.00155 0.0005  0.00012
 9 Dx-2             Dexametasona          198. 0.063  0.00191 0.0011  0.0002 
10 Dx-3             Dexametasona          201. 0.0577 0.0017  0.0001  0.0001 
# i 11 more rows
# i 13 more variables: `glucog(mg/g)` <dbl>, `pbmc(cel/mL)` <dbl>,
#   `CD4(cel/µL)` <dbl>, `monoc(cel/mL)` <dbl>, `IHQ: linfB(cel/mm2)` <dbl>,
#   `pulp.blan(Tx1)` <dbl>, `microorg(log nº/g)` <dbl>, `AI2(absorb)` <dbl>,
#   `gluc(mmol/L)` <dbl>, `TAG(mmol/L)` <dbl>, `col(mmol/L)` <dbl>,
#   `HDL(mmol/L)` <dbl>, `ins(pmol/L)` <dbl>
\end{verbatim}

  \end{tcolorbox}
\item
  Convertir el tratamiento en un factor.

  \begin{tcolorbox}[enhanced jigsaw, opacitybacktitle=0.6, toptitle=1mm, opacityback=0, bottomrule=.15mm, colbacktitle=quarto-callout-note-color!10!white, leftrule=.75mm, toprule=.15mm, title=\textcolor{quarto-callout-note-color}{\faInfo}\hspace{0.5em}{Solución}, colframe=quarto-callout-note-color-frame, titlerule=0mm, colback=white, arc=.35mm, rightrule=.15mm, coltitle=black, left=2mm, breakable, bottomtitle=1mm]

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df }\OtherTok{\textless{}{-}} \FunctionTok{mutate}\NormalTok{(df, }\AttributeTok{Tratamiento =} \FunctionTok{factor}\NormalTok{(Tratamiento))}
\end{Highlighting}
\end{Shaded}

  \end{tcolorbox}
\item
  Calcular el tamaño muestral de cada grupo de tratamiento

  \begin{tcolorbox}[enhanced jigsaw, opacitybacktitle=0.6, toptitle=1mm, opacityback=0, bottomrule=.15mm, colbacktitle=quarto-callout-note-color!10!white, leftrule=.75mm, toprule=.15mm, title=\textcolor{quarto-callout-note-color}{\faInfo}\hspace{0.5em}{Solución}, colframe=quarto-callout-note-color-frame, titlerule=0mm, colback=white, arc=.35mm, rightrule=.15mm, coltitle=black, left=2mm, breakable, bottomtitle=1mm]

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{count}\NormalTok{(df, Tratamiento)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
# A tibble: 3 x 2
  Tratamiento      n
  <fct>        <int>
1 Control          7
2 Dexametasona     7
3 Kanamicina       7
\end{verbatim}

  \end{tcolorbox}
\item
  Comprobar la normalidad de la variable IHS en cada grupo de
  tratamiento.

  \begin{tcolorbox}[enhanced jigsaw, opacitybacktitle=0.6, toptitle=1mm, opacityback=0, bottomrule=.15mm, colbacktitle=quarto-callout-note-color!10!white, leftrule=.75mm, toprule=.15mm, title=\textcolor{quarto-callout-note-color}{\faInfo}\hspace{0.5em}{Solución}, colframe=quarto-callout-note-color-frame, titlerule=0mm, colback=white, arc=.35mm, rightrule=.15mm, coltitle=black, left=2mm, breakable, bottomtitle=1mm]

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{group\_by}\NormalTok{(Tratamiento) }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{summarise}\NormalTok{(}\StringTok{\textasciigrave{}}\AttributeTok{Estadístico W}\StringTok{\textasciigrave{}} \OtherTok{=} \FunctionTok{shapiro.test}\NormalTok{(IHS)}\SpecialCharTok{$}\NormalTok{statistic, }\StringTok{\textasciigrave{}}\AttributeTok{p{-}valor}\StringTok{\textasciigrave{}} \OtherTok{=} \FunctionTok{shapiro.test}\NormalTok{(IHS)}\SpecialCharTok{$}\NormalTok{p.value)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
# A tibble: 3 x 3
  Tratamiento  `Estadístico W` `p-valor`
  <fct>                  <dbl>     <dbl>
1 Control                0.837    0.0928
2 Dexametasona           0.976    0.939 
3 Kanamicina             0.908    0.383 
\end{verbatim}

  \end{tcolorbox}
\item
  Comprobar la homocedasticiad de varianzas de la variable IHS en los
  tres grupos de tratamiento.

  \begin{tcolorbox}[enhanced jigsaw, opacitybacktitle=0.6, toptitle=1mm, opacityback=0, bottomrule=.15mm, colbacktitle=quarto-callout-note-color!10!white, leftrule=.75mm, toprule=.15mm, title=\textcolor{quarto-callout-note-color}{\faInfo}\hspace{0.5em}{Solución}, colframe=quarto-callout-note-color-frame, titlerule=0mm, colback=white, arc=.35mm, rightrule=.15mm, coltitle=black, left=2mm, breakable, bottomtitle=1mm]

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# El test de Levene está disponible en el paquete car}
\FunctionTok{library}\NormalTok{(car)}
\CommentTok{\# Test de comparación de varianzas}
\FunctionTok{leveneTest}\NormalTok{(IHS }\SpecialCharTok{\textasciitilde{}}\NormalTok{ Tratamiento, }\AttributeTok{data =}\NormalTok{ df)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
Levene's Test for Homogeneity of Variance (center = median)
      Df F value Pr(>F)
group  2  0.1636 0.8503
      18               
\end{verbatim}

  \end{tcolorbox}
\item
  Realizar un contraste de ANOVA para comparar las medias de la variable
  IHS entre los tres grupos de tratamiento.

  \begin{tcolorbox}[enhanced jigsaw, opacitybacktitle=0.6, toptitle=1mm, opacityback=0, bottomrule=.15mm, colbacktitle=quarto-callout-note-color!10!white, leftrule=.75mm, toprule=.15mm, title=\textcolor{quarto-callout-note-color}{\faInfo}\hspace{0.5em}{Solución}, colframe=quarto-callout-note-color-frame, titlerule=0mm, colback=white, arc=.35mm, rightrule=.15mm, coltitle=black, left=2mm, breakable, bottomtitle=1mm]

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Análisis de la varianza de un factor}
\FunctionTok{summary}\NormalTok{(}\FunctionTok{aov}\NormalTok{(IHS }\SpecialCharTok{\textasciitilde{}}\NormalTok{ Tratamiento, }\AttributeTok{data =}\NormalTok{ df))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
            Df    Sum Sq  Mean Sq F value   Pr(>F)    
Tratamiento  2 0.0007900 3.95e-04   31.78 1.24e-06 ***
Residuals   18 0.0002237 1.24e-05                     
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
\end{verbatim}

  \end{tcolorbox}
\item
  Realizar los contrastes de comparación de medias de la variable IHS
  por pares de trataimentos.

  \begin{tcolorbox}[enhanced jigsaw, opacitybacktitle=0.6, toptitle=1mm, opacityback=0, bottomrule=.15mm, colbacktitle=quarto-callout-note-color!10!white, leftrule=.75mm, toprule=.15mm, title=\textcolor{quarto-callout-note-color}{\faInfo}\hspace{0.5em}{Solución}, colframe=quarto-callout-note-color-frame, titlerule=0mm, colback=white, arc=.35mm, rightrule=.15mm, coltitle=black, left=2mm, breakable, bottomtitle=1mm]

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Test de comparación múltiple de Tukey}
\FunctionTok{TukeyHSD}\NormalTok{(}\FunctionTok{aov}\NormalTok{(IHS }\SpecialCharTok{\textasciitilde{}}\NormalTok{ Tratamiento, }\AttributeTok{data =}\NormalTok{ df))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
  Tukey multiple comparisons of means
    95% family-wise confidence level

Fit: aov(formula = IHS ~ Tratamiento, data = df)

$Tratamiento
                                 diff          lwr          upr     p adj
Dexametasona-Control     0.0133857143  0.008576441  0.018194988 0.0000037
Kanamicina-Control       0.0007857143 -0.004023559  0.005594988 0.9090945
Kanamicina-Dexametasona -0.0126000000 -0.017409273 -0.007790727 0.0000082
\end{verbatim}

  \end{tcolorbox}
\item
  Realizar un contraste de Kruskal-Wallis para ver si hay diferencias
  significativas en la variable IHS entre los tres grupos de
  tratamiento.

  \begin{tcolorbox}[enhanced jigsaw, opacitybacktitle=0.6, toptitle=1mm, opacityback=0, bottomrule=.15mm, colbacktitle=quarto-callout-note-color!10!white, leftrule=.75mm, toprule=.15mm, title=\textcolor{quarto-callout-note-color}{\faInfo}\hspace{0.5em}{Solución}, colframe=quarto-callout-note-color-frame, titlerule=0mm, colback=white, arc=.35mm, rightrule=.15mm, coltitle=black, left=2mm, breakable, bottomtitle=1mm]

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Test de Kruskal{-}Wallis}
\FunctionTok{kruskal.test}\NormalTok{(IHS }\SpecialCharTok{\textasciitilde{}}\NormalTok{ Tratamiento, }\AttributeTok{data =}\NormalTok{ df)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}

    Kruskal-Wallis rank sum test

data:  IHS by Tratamiento
Kruskal-Wallis chi-squared = 13.433, df = 2, p-value = 0.001211
\end{verbatim}

  \end{tcolorbox}
\item
  Construir la recta de regresión del variable IHS sobre la variable
  IES.

  \begin{tcolorbox}[enhanced jigsaw, opacitybacktitle=0.6, toptitle=1mm, opacityback=0, bottomrule=.15mm, colbacktitle=quarto-callout-note-color!10!white, leftrule=.75mm, toprule=.15mm, title=\textcolor{quarto-callout-note-color}{\faInfo}\hspace{0.5em}{Solución}, colframe=quarto-callout-note-color-frame, titlerule=0mm, colback=white, arc=.35mm, rightrule=.15mm, coltitle=black, left=2mm, breakable, bottomtitle=1mm]

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Test de Kruskal{-}Wallis}
\FunctionTok{lm}\NormalTok{(IHS }\SpecialCharTok{\textasciitilde{}}\NormalTok{ IES, }\AttributeTok{data =}\NormalTok{ df)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}

Call:
lm(formula = IHS ~ IES, data = df)

Coefficients:
(Intercept)          IES  
    0.08266    -15.97510  
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{summary}\NormalTok{(}\FunctionTok{lm}\NormalTok{(IHS }\SpecialCharTok{\textasciitilde{}}\NormalTok{ IES, }\AttributeTok{data =}\NormalTok{ df))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}

Call:
lm(formula = IHS ~ IES, data = df)

Residuals:
       Min         1Q     Median         3Q        Max 
-0.0099081 -0.0040654  0.0006222  0.0031102  0.0142492 

Coefficients:
             Estimate Std. Error t value Pr(>|t|)    
(Intercept)   0.08266    0.01470   5.625 2.01e-05 ***
IES         -15.97510    7.47347  -2.138   0.0458 *  
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.006558 on 19 degrees of freedom
Multiple R-squared:  0.1939,    Adjusted R-squared:  0.1514 
F-statistic: 4.569 on 1 and 19 DF,  p-value: 0.04577
\end{verbatim}

  \end{tcolorbox}
\end{enumerate}

\end{exercise}




\end{document}
